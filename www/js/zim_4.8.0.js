// ZIM js Interactive Media framework http://zimjs.com by Dan Zen http://danzen.com (c) 2017
// Also see http://zimjs.com/code/distill to minify only the functions in your app
// free to use - donations welcome of course! http://zimjs.com/donate

function zid(a){return z_d("1"),document.getElementById(a)}function zss(a){return z_d("2"),document.getElementById(a)?document.getElementById(a).style:void(zon&&zog("zim wrap - zss(): id not found"))}function zgo(a,b,c,d,e,f){if(z_d("3"),!(zot(b)&&""!=b||"_self"==b)){var g="";return c&&(g+="width="+c+","),d&&(g+="height="+d+","),e&&(g+="fullscreen=yes,"),f&&(g+="modal=yes,alwaysRaised=yes"),window.open(a,b,g)}window.location.href=a}function zum(a){if(z_d("4"),!zot(a))return Number(String(a).replace(/[^\d\.\-]/g,""))}function zot(a){return null==a}function zop(a){z_d("5"),zot(a)||(a.stopImmediatePropagation&&a.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0))}function zil(){z_d("6");var a=function(a){a||(a=event),a.keyCode&&a.keyCode>=32&&a.keyCode<=40&&a.preventDefault()},b=function(a){a||(a=event),a.preventDefault()},c=b;return window.addEventListener("keydown",a),window.addEventListener("mousewheel",b),window.addEventListener("DOMMouseScroll",c),[a,b,c]}function zet(a){function b(){var b=this;this.on=function(c,d){if(!(zot(a)||zot(c)||zot(d)))for(var e=b.tags,f=0;f<e.length;f++)e[f].addEventListener(c,d)},this.off=function(c,d){if(!(zot(a)||zot(c)||zot(d)))for(var e=b.tags,f=0;f<e.length;f++)e[f].removeEventListener(c,d)},Object.defineProperty(b,"tags",{get:function(){return zot(a)?[]:"string"==typeof a||a instanceof String?document.querySelectorAll(a):"string"==typeof a.innerHTML?[a]:[]},set:function(a){}}),this.css=function(a,c){for(var d=b.tags,e=0;e<d.length;e++)if(1==arguments.length&&arguments[0].constructor==={}.constructor)for(var f in a)d[e].style[f]=a[f];else{if(1==arguments.length)return b.tags[0].style[a];d[e].style[a]=c}},this.prop=function(a,c){if(!zot(a)){for(var d=b.tags,e=[],f=0;f<d.length;f++)if(zot(c))if(a.constructor==={}.constructor)for(var g in a)d[f][g]=a[g];else e.push(d[f][a]);else d[f][a]=c;return zot(c)?e:void 0}}}return z_d("6.1"),new b}function isDUO(a){return 1==a.length&&a[0].constructor==={}.constructor}function zob(a,b,c,d){if(isDUO(b)){z_d("7");var h,i,e=b[0],f=zot(c)?a.toString().split(/\n/,1)[0].match(/\((.*)\)/)[1].replace(/\s+/g,"").split(","):c.replace(/\s+/g,"").split(","),g=[];for(h=0;h<f.length;h++)i=f[h].split("=")[0],f[h]=i,g.push(e[i]);for(h in e)f.indexOf(h)<0&&zon&&zog(a,"bad argument "+h);var j;return!(j=a.prototype.isPrototypeOf(d)?new(a.bind.apply(a,[null].concat(g))):a.apply(null,g))||j}}function z_d(a){zim&&zim.DISTILL&&zim.distillery.push(a)}function zimify(a){return z_d("83.3"),zim.addDisplayMembers(a),a}"undefined"==typeof zon&&(zon=!1);var zog=console.log.bind(console),zim=function(a){function b(a,b){b?(a.mouseChildren=!0,a.mouseEnabled=!0,a._enabled=!0):(a.mouseChildren=!1,a.mouseEnabled=!1,a._enabled=!1)}if(a.shuffle=function(a){if(z_d("8"),!zot(a)){var c,d,b=a.length;if(0==b)return a;for(;--b;)c=Math.floor(Math.random()*(b+1)),d=a[b],a[b]=a[c],a[c]=d;return a}},a.rand=function(a,b,c,d){z_d("9"),(zot(a)||isNaN(a))&&(a=0),(zot(b)||isNaN(b))&&(b=0),a%1==0&&b%1==0||(c=!1),zot(c)&&(c=!0),d&&Math.random()>.5&&(a*=-1,b*=-1),c&&(a>b?a++:b>a&&b++);var e;return 0==a&&0==b?Math.random():(e=0==b?Math.random()*a:Math.min(a,b)+Math.random()*(Math.max(a,b)-Math.min(a,b)),c?Math.floor(e):e)},a.loop=function(b,c,d,e,f,g){function p(a){return zot(f)&&(f=d?a:0),zot(g)&&(g=d?0:a),d&&g>f||!d&&f>g?0:(f<0&&g)<0||f>a&&g>a?0:(f=Math.max(0,Math.min(f,a)),g=Math.max(0,Math.min(g,a)),Math.floor((d?f-g:g-f)/e)+1)}var i,h="obj, call, reverse, step, start, end";if(i=zob(a.loop,arguments,h))return i;if(z_d("9.5"),!zot(b)&&!zot(c)){zot(d)&&(d=!1),(zot(e)||e<=0)&&(e=1);var j="number"==typeof b?"number":b.constructor===Array?"array":b.constructor==={}.constructor?"object":"invalid";if("invalid"!=j)if("number"==j||"array"==j){var k="number"==j?b:b.length,l=p(k-1);if(0==l)return;if(d)for(var m=f;m>=g;m-=e){if("number"==j)var n=c(m,l,f,g,b);else var n=c(b[m],m,l,f,g,b);if("undefined"!=typeof n)return n}else for(var m=f;m<=g;m+=e){if("number"==j)var n=c(m,l,f,g,b);else var n=c(b[m],m,l,f,g,b);if("undefined"!=typeof n)return n}}else if("object"==j){var k=0,o=[];for(var m in b)k++,o.push(m);var l=p(k-1);if(0==l)return;if(d)for(var m=f;m>=g;m-=e){var n=c(o[m],b[o[m]],m,l,f,g,b);if("undefined"!=typeof n)return n}else for(var m=f;m<=g;m+=e){var n=c(o[m],b[o[m]],m,l,f,g,b);if("undefined"!=typeof n)return n}}}},a.timeout=function(a,b){function e(){var f=Date.now();return c.time+=f-d,d=f,c.time>=a?(b(c),void c.clear()):void(c.rid=requestAnimationFrame(e))}if(z_d("9.7"),!zot(b)&&"function"==typeof b){zot(a)&&(a=1e3);var c={startTime:Date.now(),time:0,paused:!1},d=c.startTime;return e(),c.pause=function(a){zot(a)&&(a=!0),a?cancelAnimationFrame(c.rid):e(),c.paused=a},c.clear=function(){c&&cancelAnimationFrame(c.rid);for(var a in c)delete c[a];c.pause=function(){},c.clear=function(){}},c}},a.interval=function(b,c,d,e){function g(){f.startTime=Date.now(),f.interval=h(b),f.id=setTimeout(function(){f.rid=requestAnimationFrame(g),f.count++,c(f),i()},f.interval)}function h(b){return Array.isArray(b)?b.length>1?a.rand(b[0],b[1]):1==b.length?b[0]:1e3:b}function i(){zot(d)||f.count>=(e?d-1:d)&&f.clear()}if(z_d("9.8"),!zot(c)&&"function"==typeof c&&(zot(b)&&(b=1e3),zot(e)&&(e=!1),zot(d)||!(isNaN(d)||d<=0))){var f={count:0,paused:!1};g(),e&&setTimeout(function(){c(f),i()},10);var j;return f.pause=function(a){zot(a)&&(a=!0),a?(clearTimeout(j),cancelAnimationFrame(f.rid),clearTimeout(f.id),f.pauseTimeLeft=f.interval-(Date.now()-f.startTime)):(j=setTimeout(function(){f.count++,c(f),g(),i()},f.pauseTimeLeft),f.pauseTimeLeft=null),f.paused=a},f.clear=function(){clearTimeout(j),cancelAnimationFrame(f.rid),clearTimeout(f.id);var a=f.count;for(var b in f)delete f[b];f.count=a,f.pause=function(){},f.clear=function(){}},f}},a.copy=function(b){if(z_d("10"),null==b||"object"!=typeof b)return b;if(b instanceof Array)return b.slice(0);if(b instanceof Object){copy={};for(var c in b)b.hasOwnProperty(c)&&(copy[c]=a.copy(b[c]));return copy}},a.arraysEqual=function(b,c,d){if(z_d("11"),zot(b)||zot(c))return!1;if(zot(d)&&(d=!0),b.length!=c.length)return!1;for(var e=0;e<b.length;e++)if(b[e]instanceof Array&&c[e]instanceof Array){if(!a.arraysEqual(b[e],c[e],d))return!1}else{if(d&&b[e]!=c[e])return!1;if(!d)return a.arraysEqual(b.sort(),c.sort(),!0)}return!0},a.isEmpty=function(a){if(z_d("11.5"),!zot(a)){var b=0;for(var c in a){b++;break}return 0==b}},a.merge=function(){z_d("12");var b,c,a={};for(b=0;b<arguments.length;b++)for(c in arguments[b])arguments[b].hasOwnProperty(c)&&(a[c]=arguments[b][c]);return a},a.decimals=function(a,b,c){if(z_d("13"),zot(a)||0==a)return 0;if(zot(b)&&(b=1),zot(c)&&(c=!1),c&&b<0){for(var d=String(a).indexOf("."),e=String(a).length,f=d<0?e:d,g=0;g<-b-f;g++)a="0"+a;return a}var h=Math.round(a*Math.pow(10,b))/Math.pow(10,b);if(c&&b>0&&0!=h){var d=String(h).indexOf("."),e=String(h).length;d<0&&(d=e++,h+=".");for(var g=0;g<b-(e-d-1);g++)h+="0"}return h},a.sign=function(a){return z_d("13.1"),a?a<0?-1:1:0},a.constrain=function(a,b,c,d){if(z_d("13.2"),!zot(a))return zot(b)&&(b=0),zot(c)&&(c=Number.MAX_VALUE),c<b&&(max2=b,c=b,b=max2),zot(d)&&(d=!1),d&&a<0?Math.max(-c,Math.min(a,-b)):Math.max(b,Math.min(a,c))},a.dist=function(a,b,c,d){if(z_d("13.3"),!zot(a)&&!zot(b))return zot(c)&&(c=0),zot(d)&&(d=0),Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2))},a.makeID=function(a,b,c){z_d("13.5"),zot(a)&&(a="mixed"),zot(b)&&(b=5),zot(c)&&(c="uppercase");var d,e=[2,3,4,5,6,7,8,9],f="abcdefghjkmnpqrstuvwxyz".split("");d=a.constructor===Array?a:"numbers"==a?e:"letters"==a?f:e.concat(f);for(var h,i,g="",j=0;j<b;j++)h=d[Math.floor(Math.random()*b)],i=Math.random(),"uppercase"==c||"mixed"==c&&i>.5?h.toUpperCase&&(h=h.toUpperCase()):h.toLowerCase&&(h=h.toLowerCase()),g+=String(h);return g},a.Damp=function(b,c){z_d("14");var e,d="startValue, damp";return(e=zob(a.Damp,arguments,d,this))?e:(this.lastValue=zot(b)?0:b,void(this.damp=zot(c)?.1:c))},a.Damp.prototype.convert=function(a){return this.lastValue=this.lastValue+(a-this.lastValue)*this.damp},a.Damp.prototype.immediate=function(a){return this.lastValue=a,this},a.Proportion=function(b,c,d,e,f,g){var i,h="baseMin, baseMax, targetMin, targetMax, factor, targetRound";if(i=zob(a.Proportion,arguments,h,this))return i;z_d("15"),zot(d)&&(d=0),zot(e)&&(e=1),zot(f)&&(f=1),zot(g)&&(g=!1);var j,k,l;j=b,this.convert=function(a){if(!isNaN(a))return a=Math.max(a,b),a=Math.min(a,c),k=(a-b)/(c-b),l=f>0?d+(e-d)*k:e-(e-d)*k,g&&(l=Math.round(l)),l}},a.ProportionDamp=function(b,c,d,e,f,g,h){function t(){isNaN(l)||(l=Math.max(l,b),l=Math.min(l,c),m=(l-b)/(c-b),n=e-d,o=g>0?d+n*m:e-n*m,q=o,p=q-r,r+=p*k.damp)}var j,i="baseMin, baseMax, targetMin, targetMax, damp, factor, targetRound";if(j=zob(a.ProportionDamp,arguments,i,this))return j;z_d("16"),zot(d)&&(d=0),zot(e)&&(e=1),zot(f)&&(f=.1),zot(g)&&(g=1),zot(h)&&(h=!1),this.damp=f;var l,m,n,o,p,k=this,q=0,r=0;l=b,r=d;var s=setInterval(t,20);this.immediate=function(a){return k.convert(a),t(),r=o,h&&(r=Math.round(r)),k},this.convert=function(a){return l=a,h?Math.round(r):r},this.dispose=function(){return clearInterval(s),!0}},a.Dictionary=function(a){z_d("17"),this.length=0,this.unique=a;var b=this.objects=[],c=this.values=[];this.add=function(a,d){zot(a)||(zot(d)&&(d=!0),this.unique&&this.remove(a),b.push(a),c.push(d),this.length++)},this.at=function(a){if(!zot(a)){var d=b.indexOf(a);return d>-1?c[d]:null}},this.remove=function(a){if(!zot(a)){var d=b.indexOf(a);d>-1&&(b.splice(d,1),c.splice(d,1),this.length--)}},this.dispose=function(){return b=null,c=null,this.length=null,!0}},a.swapProperties=function(a,b,c){if(z_d("17.1"),zot(b)||zot(c)||zot(b[a])||zot(c[a]))return!1;var d=c[a];return c[a]=b[a],b[a]=d,!0},a.swapHTML=function(b,c){return z_d("17.2"),a.swapProperties("innerHTML",zid(b),zid(c))},a.scrollX=function(b,c){return z_d("18"),a.abstractScroll("X","Left",b,c)},a.scrollY=function(b,c){return z_d("19"),a.abstractScroll("Y","Top",b,c)},a.abstractScroll=function(b,c,d,e){z_d("20");var f="X"==b?"Y":"X";if(zot(d)){var g=0,h=navigator.appName,i=navigator.userAgent.indexOf("Safari");if(i!=-1||"Safari"==h)var g=1;return g||"CSS1Compat"!=document.compatMode?document.body["scroll"+c]:document.documentElement["scroll"+c]}if(zot(e))window.scrollTo(a["scroll"+f](),d);else{var j=50;e<j&&(e=j);var k=e/j,l=a["scroll"+b](),m=d-l,n=m/k,o=0,p=setInterval(function(){o++,l+=n,window.scrollTo(a["scroll"+f](),l),o>=k&&(window.scrollTo(a["scroll"+f](),d),clearInterval(p))},j)}return d},a.windowWidth=function(){return z_d("21"),isNaN(window.innerWidth)?window.clientWidth:window.innerWidth},a.windowHeight=function(){return z_d("22"),isNaN(window.innerHeight)?window.clientHeight:window.innerHeight},a.urlEncode=function(a){z_d("23");var a=(a+"").toString();return encodeURIComponent(a).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},a.urlDecode=function(a){return z_d("24"),decodeURIComponent((a+"").replace(/\+/g,"%20"))},a.setCookie=function(a,b,c){if(z_d("25"),!zot(a)&&!zot(b)){if(c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="; expires="+d.toGMTString()}else var e="";return document.cookie=a+"="+escape(b)+e+"; path=/",!0}},a.getCookie=function(a){z_d("26");var e,b=document.cookie.split(/;\s*/),c=new Array;for(d=0;d<b.length;d++)e=b[d].split("="),c[e[0]]=e[1];if("undefined"!=typeof c[a])return unescape(c[a])},a.deleteCookie=function(b){return z_d("27"),!zot(a.getCookie(b))&&(a.setCookie(b,"",-1),!0)},a.mobile=function(a){return z_d("28"),zot(a)&&(a=!0),/ip(hone|od|ad)/i.test(navigator.userAgent)?"ios":/android|nexus/i.test(navigator.userAgent)?"android":/blackberry/i.test(navigator.userAgent)?"blackberry":/nokia|phone|mobile/i.test(navigator.userAgent)?"windows":/opera mini|webos/i.test(navigator.userAgent)?"other":!(!a||void 0===window.orientation)},a.async=function(b,c){if(z_d("29"),!zot(b)){var d=document.createElement("script");if(c){var e=c.toString().split(/\n/,1)[0].match(/^function\s?([^\s(]*)/)[1];a.async[e]=function(){var a=d;return function(b){a&&a.parentNode.removeChild(a),a=null,c(b)}}()}else a.async.z_s&&a.async.z_s.parentNode&&a.async.z_s.parentNode.removeChild(a.async.z_s),a.async.z_s=d;b.match(/\?/)||(b+="?"),d.setAttribute("src",b+"&r="+Math.random()),document.getElementsByTagName("head")[0].appendChild(d)}},"undefined"==typeof createjs)return zon&&zog("ZIM >= 4.3.0 requires createjs namespace to be loaded (import createjs before zim)"),a;a.ANIMATE=!0,a.Ticker={stages:null,myUpdate:null,alwaysList:new a.Dictionary,list:new a.Dictionary,setFPS:function(b,c){zot(b)&&zot(c)?(b=30,c=60):zot(b)?b=30:zot(c)&&(c=b),a.Ticker.framerate=createjs.Ticker.framerate=a.mobile()?b:c},setTimingMode:function(a){createjs.Ticker.timingMode=createjs.Ticker.RAF,"synched"==a&&(createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED),"timeout"==a&&(createjs.Ticker.timingMode=createjs.Ticker.TIMEOUT)},add:function(b,c){z_d("30");var d=a.Ticker;return d.framerate||d.setFPS(),zot(c)||!c.update?void zog("zim.Ticker.add() - needs stage parameter"):zot(b)||"function"!=typeof b?void zog("zim.Ticker.add() - only add functions"):(d.ticker||(d.ticker=createjs.Ticker.on("tick",d.call)),d.list.at(c)?d.list.at(c).push(b):d.list.add(c,[b]),b)},call:function(b){for(var d,e,c=a.Ticker,f=0;f<c.list.length;f++){d=c.list.objects[f],e=c.list.values[f];for(var g=0;g<e.length;g++)e[g]();c.alwaysList.at(d)?d.update():e.length>0&&(zot(c.update)&&!a.OPTIMIZE?d.update():c.update&&d.update())}for(f=0;f<c.alwaysList.length;f++)d=c.alwaysList.objects[f],null==c.list[d]&&d.update()},always:function(b){z_d("30");var c=a.Ticker;return c.framerate||c.setFPS(),zot(b)||!b.update?void zog("zim.Ticker.always(stage) - needs stage parameter"):(c.alwaysList.add(b,!0),void(c.ticker||(c.ticker=createjs.Ticker.on("tick",c.call))))},alwaysOff:function(b){var c=a.Ticker;return zot(b)||!b.update?void zog("zim.Ticker.alwaysOff(stage) - needs stage parameter"):void c.alwaysList.remove(b)},remove:function(b){var c=a.Ticker;if(zot(b)||"function"!=typeof b)return void zog("zim.Ticker - only remove functions");for(var e,d=0,f=0;f<c.list.length;f++){e=c.list.objects[f];var g=c.list.values[f].indexOf(b);g>-1&&c.list.values[f].splice(g,1),d+=c.list.values[f].length}c.alwaysList.length>0||0==d&&(createjs.Ticker.off("tick",c.ticker),c.ticker=null)},removeAll:function(b){for(var e,c=a.Ticker,d=0,f=0;f<c.list.length;f++)e=c.list.objects[f],(zot(b)||b===e)&&(c.list.values[f]=[]),d+=c.list.values[f].length;c.alwaysList.length>0||0==d&&(createjs.Ticker.off("tick",c.ticker),c.ticker=null)},dispose:function(b){for(var e,c=a.Ticker,d=0,f=c.list.length-1;f>=0;f--)e=c.list.objects[f],zot(b)||b===e?(c.list.remove(b),c.alwaysList.remove(b)):d+=c.list.values[f].length;if(!(c.alwaysList.length>0))return 0==d&&(createjs.Ticker.off("tick",c.ticker),c.ticker=null),!0}},Object.defineProperty(a.Ticker,"update",{get:function(){return a.Ticker.myUpdate},set:function(b){var c=a.Ticker;"boolean"!=typeof b&&(b=null),c.myUpdate=b,c.myUpdate===!1&&(cancelAnimationFrame(c.ticker),c.alwaysList=new a.Dictionary)}}),a.drag=function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function z(){u=0,v=0,b.zimDragRect&&(h?(x=a.boundsToGlobal(b.parent,b.zimDragRect),j&&(y=b.zimDragRect)):(x=b.zimDragRect,j&&(y=a.boundsToGlobal(b.parent,b.zimDragRect,!0)))),x&&p&&(w=b.parent.localToGlobal(b.x,b.y),Q(b,w.x,w.y)),k&&(b.zimDragMoving=!0,S())}function A(){b.zimDragTicker&&a.Ticker.remove(b.zimDragTicker)}function Q(c,d,e){if(zot(c)&&(c=P?P:b),c.parent&&c.getStage()){if(zot(d)||zot(e)){var f=c.parent.localToGlobal(c.x,c.y);u=v=0,b.zimDragRect&&(h?(x=a.boundsToGlobal(c.parent,b.zimDragRect),j&&(y=c.zimDragRect)):(x=b.zimDragRect,j&&(y=a.boundsToGlobal(c.parent,b.zimDragRect,!0)))),d=f.x,e=f.y,k&&(J=c.x,K=c.y,P=c,B.immediate(J),C.immediate(K))}var i,g=c.parent.globalToLocal(d,e);k&&m?"vertical"==m?(i=R(c,g.x-u,g.y-v),c.x=i.x,c.y=g.y-v):"horizontal"==m?(i=R(c,g.x-u,g.y-v),c.x=g.x-u,c.y=i.y):(c.x=g.x-u,c.y=g.y-v):(i=R(c,g.x-u,g.y-v),c.x=i.x,c.y=i.y),c.zimMask&&(c.zimMask.x=c.x,c.zimMask.y=c.y)}}function R(a,b,c){if(x)if(j){var d=a.getBounds().width,e=a.getBounds().height,f=a.getBounds().x,g=a.getBounds().y;d<y.width?b=y.x+(y.width-d)/2+(a.regX-f):(b-(a.regX-f)>y.x&&(b=y.x+(a.regX-f)),b-(a.regX-f)+d<y.x+y.width&&(b=y.x+y.width+(a.regX-f)-d)),a.height<y.height?c=y.y+(y.height-e)/2+(a.regY-g):(c-(a.regY-g)>y.y&&(c=y.y+(a.regY-g)),c-(a.regY-g)+e<y.y+y.height&&(c=y.y+y.height+(a.regY-g)-e))}else{var h=a.parent.localToGlobal(b,c);b=Math.max(x.x,Math.min(x.x+x.width,h.x)),c=Math.max(x.y,Math.min(x.y+x.height,h.y)),h=a.parent.globalToLocal(b,c),b=h.x,c=h.y}return{x:b,y:c}}function S(){function d(a,c,d,e,f){Math.abs(a.x-N)<.1&&Math.abs(a.y-O)<.1?(b.zimDragMoving=!1,a.x=e,a.y=f,a.dispatchEvent("slidestop")):(N=c,O=d)}var c=b.getStage();b.zimDragTicker=function(){if(P||(P=b),t){var a=P.parent.globalToLocal(c.mouseX,c.mouseY);E++,F.push(a.x),G.push(a.y),E>=D?(L=F.shift(),M=G.shift()):(L=F[0],M=G[0])}else{if(!b.zimDragMoving)return;var e=J+H-L,f=K+I-M;if(x){var g=R(P,e,f);e=g.x,f=g.y}if(m)P.x=B.convert(e),P.y=C.convert(f),d(P,P.x,P.y,e,f);else{var g=R(P,B.convert(e),C.convert(f));P.x=g.x,P.y=g.y,d(P,P.x,P.y,P.x,P.y)}}},a.Ticker.add(b.zimDragTicker,c)}var r,q="obj, rect, overCursor, dragCursor, currentTarget, swipe, localBounds, onTop, surround, slide, slideDamp, slideSnap, reg, removeTweens, startBounds";if(r=zob(a.drag,arguments,q))return r;if(z_d("31"),!zot(b)&&b.on){b.cursor=zot(d)?"pointer":d,zot(f)&&(f=!1),zot(g)&&(g=!1),zot(h)&&(h=!1),zot(i)&&(i=!0),zot(j)&&(j=!1),zot(k)&&(k=!1),zot(l)&&(l=.3),zot(m)&&(m=!0);var s=["horizontal","vertical","auto"];m!==!0&&s.indexOf(m)<0&&(m=!1),zot(n)&&(n=!1),zot(o)&&(o=!0),zot(p)&&(p=!0),a.setSwipe(b,g),b.zimDragRect=c,b.zimLocalBounds=h;var u,v,w,x,y,t=!1;if(b.zimAdded=b.on("added",z,null,!0),b.zimRemoved=b.on("removed",A,null,!0),b.parent&&z(),k)var B=new a.Damp(b.x,l),C=new a.Damp(b.y,l),D=3,E=0,F=[],G=[],H=b.x,I=b.y,J=b.x,K=b.y,L=b.x,M=b.y,N=-1e4,O=-1e4;var P;return b.zimDown=b.on("mousedown",function(c){if(P=f?c.currentTarget:c.target,b.zimDragRect&&!P.getBounds())return void zog("zim.drag() - drag object needs bounds set");t=!0,b.getStage().mouseMoveOutside=!0,k||(b.zimDragTicker&&a.Ticker.remove(b.zimDragTicker),b.zimDragTicker=a.Ticker.add(function(){},b.getStage())),o&&createjs.Tween.removeTweens(P),i&&P.parent.setChildIndex(P,P.parent.numChildren-1);var d=P.parent.globalToLocal(c.stageX,c.stageY);n&&(P.x=d.x,P.y=d.y),u=d.x-P.x,v=d.y-P.y,b.zimDragRect&&(h?(x=a.boundsToGlobal(P.parent,b.zimDragRect),j&&(y=b.zimDragRect)):(x=b.zimDragRect,j&&(y=a.boundsToGlobal(P.parent,b.zimDragRect,!0)))),b.cursor=zot(e)?"pointer":e,k&&(E=0,F=[d.x],G=[d.y],N=-1e4,O=-1e4,b.zimDragMoving=!0)},!0),b.zimMove=b.on("pressmove",function(a){t&&Q(P,a.stageX,a.stageY)},!0),b.zimPosition=Q,b.zimUp=b.on("pressup",function(c){if(t)if(b.cursor=zot(d)?"pointer":d,k){var e=P.parent.globalToLocal(c.stageX,c.stageY);t=!1,H=e.x,I=e.y,J=P.x,K=P.y,B.immediate(P.x),C.immediate(P.y)}else b.zimDragTicker&&a.Ticker.remove(b.zimDragTicker)},!0),b}},a.noDrag=function(b){if(z_d("32"),!zot(b)&&b.on)return b.cursor="default",a.setSwipe(b,!0),b.off("added",b.zimAdded),b.off("removed",b.zimRemoved),b.off("mousedown",b.zimDown),b.off("pressmove",b.zimMove),b.off("pressup",b.zimUp),a.Ticker&&b.zimDragSlide&&a.Ticker.remove(b.zimDragSlide),b.zimDragMoving=b.zimAdded=b.zimRemoved=b.zimDown=b.zimMove=b.zimUp=b.zimDragRect=b.zimDragSlide=null,b},a.dragRect=function(a,b){if(z_d("33"),!zot(a)&&a.on&&!zot(b))return a.zimDragRect=b,a.zimDragMoving=!0,a.zimPosition&&a.zimPosition(),a},a.setSwipe=function(a,b){function c(b){for(var e,d=b.getNumChildren(),f=0;f<d;f++)e=b.getChildAt(f),e.zimNoSwipe=a.zimNoSwipe,e instanceof createjs.Container&&c(e)}if(z_d("34"),!zot(a)&&a.on)return a.zimNoSwipe=!b||null,a instanceof createjs.Container&&c(a),a},a.hitTestPoint=function(a,b,c){if(z_d("35"),!a.stage)return!1;if(!zot(a)&&a.globalToLocal){var d=a.globalToLocal(b,c),e=a.getBounds();if(e){if(d.x>e.x+e.width||d.x<e.x)return;if(d.y>e.y+e.height||d.y<e.y)return}return a.hitTest(d.x,d.y)}},a.hitTestReg=function(a,b){if(z_d("36"),!a.stage||!b.stage)return!1;if(!zot(a)&&!zot(b)&&a.localToLocal&&b.localToLocal){var c=b.localToLocal(b.regX,b.regY,a),d=a.getBounds();if(d){if(c.x>d.x+d.width||c.x<d.x)return;if(c.y>d.y+d.height||c.y<d.y)return}return a.hitTest(c.x,c.y)}},a.hitTestRect=function(b,c,d){if(z_d("37"),!b.stage||!c.stage)return!1;if(!zot(b)&&!zot(c)&&b.hitTest&&c.getBounds){zot(d)&&(d=0);var e=c.getBounds();if(!e)return void zog("zim create - hitTestRect():\n please setBounds() on param b object");var f=b.getBounds();if(!f||a.hitTestBounds(b,c)){var g=e.x+e.width/2,h=e.y+e.height/2,i=c.localToLocal(g,h,b);if(b.hitTest(i.x,i.y))return!0;for(var j,k,i,l=0;l<=d;l++){if(j=e.width*(l+1)/(d+1),k=e.height*(l+1)/(d+1),i=c.localToLocal(e.x+j,e.y,b),b.hitTest(i.x,i.y))return!0;if(i=c.localToLocal(e.x+e.width,e.y+k,b),b.hitTest(i.x,i.y))return!0;if(i=c.localToLocal(e.x+e.width-j,e.y+e.height,b),b.hitTest(i.x,i.y))return!0;if(i=c.localToLocal(e.x,e.y+e.height-k,b),b.hitTest(i.x,i.y))return!0}}}},a.hitTestCircle=function(b,c,d){if(z_d("38"),!b.stage||!c.stage)return!1;if(!zot(b)&&!zot(c)&&b.hitTest&&c.getBounds){zot(d)&&(d=8);var e=c.getBounds();if(!e)return void zog("zim create - hitTestCircle():\n please setBounds() on param b object");var f=b.getBounds();if(!f||a.hitTestBounds(b,c)){var g=e.x+e.width/2,h=e.y+e.height/2,i=c.localToLocal(g,h,b);if(b.hitTest(i.x,i.y))return!0;for(var k,l,m,j=(e.width+e.height)/2/2,n=0;n<d;n++)if(k=n/d*2*Math.PI,l=g+j*Math.cos(k),m=h+j*Math.sin(k),i=c.localToLocal(l,m,b),b.hitTest(i.x,i.y))return!0}}},a.hitTestBounds=function(b,c,d){function k(a,b){return!(a.x>=b.x+b.width||a.x+a.width<=b.x||a.y>=b.y+b.height||a.y+a.height<=b.y)}if(z_d("39"),!b.stage||!c.stage)return!1;if(!zot(b)&&!zot(c)&&b.getBounds&&c.getBounds){var e=!1;d&&d.graphics&&(e=!0);var f=b.getBounds(),g=c.getBounds();if(!f||!g)return void zog("zim create - hitTestBounds():\n please setBounds() on both objects");var h=a.boundsToGlobal(b),i=a.boundsToGlobal(c);if(e){var j=d.graphics;j.c(),j.ss(1).s("blue"),j.r(h.x,h.y,h.width,h.height),j.s("green"),j.r(i.x,i.y,i.width,i.height),d.getStage().update()}return k(h,i)}},a.boundsToGlobal=function(a,b,c){if(z_d("40"),!zot(a)&&a.getBounds){zot(c)&&(c=!1);var d=a.getBounds();if(!d&&zot(b))return void zog("zim create - boundsToGlobal():\n please setBounds() on object (or a rectangle)");if(b&&(d=b),c)var e=a.globalToLocal(d.x,d.y),f=a.globalToLocal(d.x+d.width,d.y),g=a.globalToLocal(d.x+d.width,d.y+d.height),h=a.globalToLocal(d.x,d.y+d.height);else var e=a.localToGlobal(d.x,d.y),f=a.localToGlobal(d.x+d.width,d.y),g=a.localToGlobal(d.x+d.width,d.y+d.height),h=a.localToGlobal(d.x,d.y+d.height);var i=Math.min(e.x,f.x,g.x,h.x),j=Math.min(e.y,f.y,g.y,h.y),k=Math.max(e.x,f.x,g.x,h.x),l=Math.max(e.y,f.y,g.y,h.y);return new createjs.Rectangle(i,j,k-i,l-j)}},a.hitTestGrid=function(a,b,c,d,e,f,g,h,i,j,k,l,m){if(z_d("41"),!a.stage)return!1;if(!zot(a)&&!l){var n=a.globalToLocal(f,g);f=n.x,g=n.y}zot(h)&&(h=0),zot(i)&&(i=0),zot(j)&&(j=0),zot(k)&&(k=0);var o=b/d,p=c/e,q=Math.min(d-1,Math.max(0,Math.floor((f-h)/o))),r=Math.min(e-1,Math.max(0,Math.floor((g-i)/p)));if(!(f-h>o*(q+1)-j||f-h<o*q||g-i>p*(r+1)-k||g-i<p*r)){var s=r*d+q;return zot(m)||"index"==m?s:"col"==m?q:"row"==m?r:"array"==m?[s,q,r]:void 0}},a.move=function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){var E,D="target, x, y, time, ease, call, params, wait, loop, loopCount, loopWait, loopCall, loopParams, rewind, rewindWait, rewindCall, rewindParams, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, props, protect, override, from, set, id";if(E=zob(a.move,arguments,D))return E;if(z_d("44"),!zot(c)||!zot(d)){var F={x:c,y:d};return zot(c)?F={y:d}:zot(d)&&(F={x:c}),a.animate(b,F,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,null,y,z,A,B,C)}},a.animate=function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){function P(){for(var b,f,d=h,e=0,g=0;g<c.length;g++)if(b=c[g],!zot(b.target)){zot(b.time)&&(b.time=J),d+=b.wait?b.wait:0,f=b.time,b.rewind&&(f=2*f+(b.rewindWait?b.rewindWait:0)),b.loop&&(f*=b.loopCount,f+=(b.loopCount-1)*(b.loopWait?b.loopWait:0));var i={target:b.target,obj:b.obj,wait:e+d,time:b.time,ease:b.ease,from:b.from,rewind:b.rewind,call:b.call,params:b.params,loop:b.loop,loopCount:b.loopCount,loopWait:b.loopWait,loopCall:b.loopCall,loopParams:b.loopParams,rewind:b.rewind,rewindWait:b.rewindWait,rewindCall:b.rewindCall,rewindParams:b.rewindParams,set:b.set,override:!1,id:C};g==c.length-1&&Q(i),a.animate(i),e+=d+f,d=0}}function Q(a){w.loop&&(!w.count||O<w.count)?a.call=function(){function a(){for(var a=0;a<N.objects.length;a++)N.objects[a].set&&N.objects[a].set(N.values[a]);w.loopCall&&"function"==typeof w.loopCall&&w.loopCall(w.loopParams),P()}w.loopWait?K=b.zimTweens[C]=b.zimTween=createjs.Tween.get(b,{override:w.override}).wait(w.loopWait).call(a):a()}:a.call=function(){f&&"function"==typeof f&&f(g),ma(C)},O++}function R(){var d=new a.Dictionary;N=new a.Dictionary;for(var f=0;f<c.length;f++)if(S=c[f],b||(b=S.target),zot(S.target)&&(S.target=b),zot(S.ease)&&(S.ease=e),!zot(S.target)){if(S.loop&&(zot(S.loopCount)||S.loopCount<=0)&&(S.loopCount=0,c.splice(f+1,c.length)),zot(S.obj.scale)||(S.obj.scaleX=S.obj.scaleY=S.obj.scale,delete S.obj.scale),S.from){var g=d.at(S.target);if(g){if(S.set){var h=a.copy(S.obj),i=a.merge(g,S.set);S.obj=V(S.target,S.obj,i),S.set=a.merge(S.set,h)}else S.set=a.copy(S.obj),S.obj=V(S.target,S.obj,g);S.from=!1}else d.add(S.target,V(S.target,S.obj,S.set))}var j={};for(var k in S.obj)j[k]=S.set&&S.set[k]?S.set[k]:S.target[k];zot(N.at(S.target))&&N.add(S.target,{});var l=a.merge(N.at(S.target),j);N.remove(S.target),N.add(S.target,l)}zot(b.zimTweens)&&(b.zimTweens={})}function T(){setTimeout(function(){b.zimBusy||(b.zimBusy={});for(var a in c)b.zimBusy[a]=!0},300)}function U(){zot(C)?C=a.makeID(10):(C=String(C),M=C),zot(b.zimIdSets)&&(b.zimIdSets={}),zot(b.zimIdSets[C])?zot(b.zimTweens[C])||(L=C,C=a.makeID(10),b.zimIdSets[L]=[L],b.zimTweens[L].zimIdSet=L,b.zimIdSets[L].push(C)):(L=C,C=a.makeID(10),b.zimIdSets[L].push(C))}function V(a,b,c,d){var e={};for(var f in b)c&&!zot(c[f])?e[f]=c[f]:e[f]=a[f],d&&(a[f]=b[f]);return e}function ca(){var a=ha();b.set&&b.set(B),K=b.zimTweens[C]=b.zimTween=createjs.Tween.get(b,w).to(c,J,createjs.Ease[e]).call(ia).wait(_).to(a,J,createjs.Ease[$]).call(ga).wait(X),la()}function da(){var a=ha();b.set&&b.set(B),K=b.zimTweens[C]=b.zimTween=createjs.Tween.get(b,w).to(c,J,createjs.Ease[e]).wait(_).to(a,J,createjs.Ease[$]).call(ga).wait(X),la()}function ea(){b.set&&b.set(B),K=b.zimTweens[C]=b.zimTween=createjs.Tween.get(b,w).to(c,J,createjs.Ease[e]).call(ga).wait(X),la()}function ga(){if(w.loop){if(!(W>0))return void(Y&&"function"==typeof Y&&Y(Z));if(O<W)return Y&&"function"==typeof Y&&Y(Z),void O++;n?b.set&&b.set(ha()):b.set&&b.set(c)}ma(C),f&&"function"==typeof f&&f(g)}function ha(){var a={};for(var d in c)x?zot(B[d])?a[d]=b.style[d]:a[d]=B[d]:zot(B[d])?a[d]=b[d]:a[d]=B[d];return a}function ia(){aa&&"function"==typeof aa&&aa(ba)}function ja(c){if(b.zimBusy){for(var d in c)delete b.zimBusy[d];a.isEmpty(b.zimBusy)&&(b.zimBusy=null)}}function la(){K.zimObj=c,K.zimTicker=fa,K.zimPaused=ka,L&&(K.zimIdSet=L),M&&(zot(a.idSets)&&(a.idSets={}),zot(a.idSets[M])?a.idSets[M]=[b]:a.idSets[M].indexOf(b)<0&&a.idSets[M].push(b)),a.animatedObjects||(a.animatedObjects=new a.Dictionary(!0)),a.animatedObjects.add(b,!0)}function ma(c){if(!zot(b.zimTweens)&&!zot(b.zimTweens[c])){ja(b.zimTweens[c].zimObj),b.zimTweens[c].setPaused(!0),na(c);var d=b.zimTweens[c].zimIdSet;if(!zot(d)&&b.zimIdSets){var e=b.zimIdSets[d];e&&e.splice(e.indexOf(c),1),e&&0==e.length&&(delete b.zimIdSets[d],a.isEmpty(b.zimIdSets)&&delete b.zimIdSets)}delete b.zimTweens[c],a.isEmpty(b.zimTweens)&&b.stopZimAnimate(),b.zimTweens&&b.zimTweens[c]||b.zimIdSets&&b.zimIdSets[d?d:c]||a.idSets&&a.idSets[d?d:c]&&(delete a.idSets[d?d:c],a.isEmpty(a.idSets)&&delete a.idSets)}}function na(c){-function(){var d=b.zimTweens[c].zimTicker;setTimeout(function(){d&&a.Ticker.remove(d),d=null},200)}()}function oa(c,d){var e=b.zimTweens[c];e.setPaused(d),d!=e.zimPaused&&(e.zimPaused=d,d?e.zimTicker&&(e.zimAnimateTimeout=setTimeout(function(){a.Ticker.remove(e.zimTicker)},200)):(clearTimeout(e.zimAnimateTimeout),e.zimTicker&&a.Ticker.add(e.zimTicker,b.getStage())))}function pa(a){for(var c=[],d=0;d<a.length;d++)b.zimIdSets&&!zot(b.zimIdSets[a[d]])?c=c.concat(b.zimIdSets[a[d]]):c.push(a[d]);return c}var E,D="target, obj, time, ease, call, params, wait, loop, loopCount, loopWait, loopCall, loopParams, rewind, rewindWait, rewindCall, rewindParams, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, props, css, protect, override, from, set, id";if(E=zob(a.animate,arguments,D))return E;if(z_d("45"),0!=a.ANIMATE){var F={override:!0};if(zot(i)||(F.loop=i),zot(j)||(F.count=j),zot(k)||(F.loopWait=k),zot(l)||(F.loopCall=l),zot(m)||(F.loopParams=m),zot(n)||(F.rewind=n),zot(o)||(F.rewindWait=o),zot(p)||(F.rewindCall=p),zot(q)||(F.rewindParams=q),zot(w)||(F=a.merge(F,w)),w=F,zot(r)&&(r=0),r>0&&b.addChild){for(var G=[],H=0;H<b.numChildren;H++)G.push(b.getChildAt(H));b=G}if(b instanceof Array){u&&b.reverse();for(var I=0,H=0;H<b.length;H++)-function(){var i=H;if(A){var j;b[H].zimObj={};for(var k in c)j=c[k],b[H].zimObj[k]=b[H][k],b[H][k]=j}else b[H].zimObj=c;setTimeout(function(){var c=b[I];if(I++,a.animate(c,c.zimObj,d,e,f,g,h,null,null,null,null,null,null,null,null,null,null,null,null,null,v,a.copy(w),x,y,z,null,B,C),i==b.length-1&&s){var j=d?d:1e3;w&&w.rewind&&(j+=(d?d:1e3)+(w.rewindWait?w.rewindWait:0)),w&&w.loop&&w.loopWait&&(j+=w.loopWait),setTimeout(function(){s(t)},j)}},r*H)}()}else{var J=d;zot(J)&&(J=1e3),zot(e)&&(e="quadInOut"),zot(h)&&(h=0),zot(w)&&(w={override:!0}),zot(g)&&(g=b),zot(v)&&(v=!0),zot(x)&&(x=!1),zot(y)&&(y=!1),zot(A)&&(A=!1),zot(B)&&(B={}),B.scale&&(B.scaleX=B.scaleY=B.scale,delete B.scale),zot(z)||(w.override=z);var K,L,M;if(c instanceof Array){var N,O=1;return 0==c.length?this:(R(),U(),void P())}if(!zot(b)){if(zot(b.zimTweens)&&(b.zimTweens={}),v&&(zot(b.getStage)||zot(b.getStage())))return void(zon&&zog("zim.move(), zim.animate() - please add target to stage before animating"));zot(c.scale)||(c.scaleX=c.scaleY=c.scale,delete c.scale);for(var S in c){if(!b.zimBusy)break;b.zimBusy[S]&&delete c[S]}if(!a.isEmpty(c)){(y||w.loop||w.rewind)&&T(),U(),A&&(c=V(b,c,B,!0));var W=0;if(w.loop&&!zot(w.count)){W=w.count,delete w.count;var O=1}var X=0;w.loopWait&&(X=w.loopWait,delete w.loopWait);var Y;w.loopCall&&(Y=w.loopCall,delete w.loopCall);var Z=b;if(w.loopParams&&(Z=w.loopParams,delete w.loopParams),w.rewind){if(e){var $=e;$.indexOf("InOut")==-1&&($.indexOf("Out")!=-1?$=$.replace("Out","In"):$.indexOf("In")!=-1&&($=$.replace("In","Out")))}var _=0;if(delete w.rewind,w.rewindWait&&(_=w.rewindWait,delete w.rewindWait),w.rewindCall){var aa=w.rewindCall,ba=w.rewindParams;zot(ba)&&(ba=b),delete w.rewindCall,delete w.rewindParams,h>0?K=b.zimTweens[C]=b.zimTween=createjs.Tween.get(b,{override:w.override}).wait(h).call(ca):ca()}else h>0?K=b.zimTweens[C]=b.zimTween=createjs.Tween.get(b).wait(h,{override:w.override}).call(da):da()}else h>0?K=b.zimTweens[C]=b.zimTween=createjs.Tween.get(b,{override:w.override}).wait(h).call(ea):ea();var fa;!x&&v&&(fa=b.zimMask?a.Ticker.add(function(){a.copyMatrix(b.zimMask,b),b.zimMask.regX=b.regX,b.zimMask.regY=b.regY},b.getStage()):a.Ticker.add(function(){},b.getStage()));var ka=!1;return la(),b.stopZimAnimate||(b.stopZimAnimate=function(c,d){if(zot(d)&&(d=!0),zot(c)){if(!d)return;b.zimBusy=null,createjs.Tween.removeTweens(b);for(var e in b.zimTweens)na(e);b.zimTweens=null,b.zimIdSets=null,a.idSets&&a.idSets[L?L:e]&&(delete a.idSets[L?L:e],a.isEmpty(a.idSets)&&delete a.idSets),a.animatedObjects.remove(b)}else{Array.isArray(c)||(c=[c]);var f=pa(c);for(var e in b.zimTweens)d&&f.indexOf(e)>=0&&ma(e),!d&&f.indexOf(e)<0&&ma(e)}return b},b.pauseZimAnimate=function(a,c,d){if(zot(a)&&(a=!0),zot(d)&&(d=!0),
!zot(c)||d){if(zot(c))for(var e in b.zimTweens)oa(e,a);else{Array.isArray(c)||(c=[c]);var f=pa(c);for(var e in b.zimTweens)d&&f.indexOf(e)>=0&&oa(e,a),!d&&f.indexOf(e)<0&&oa(e,a)}return b}}),b}}}}},a.stopZimAnimate=function(b){if(z_d("45.1"),zot(b)){if(a.animatedObjects)for(var c=a.animatedObjects.length-1;c>=0;c--)a.animatedObjects.objects[c].stopZimAnimate()}else if(Array.isArray(b)||(b=[b]),a.idSets)for(var d=0;d<b.length;d++){var e=b[d];if(a.idSets[e])for(var c=a.idSets[e].length-1;c>=0;c--)a.idSets[e][c].stopZimAnimate(e)}},a.pauseZimAnimate=function(b,c){if(z_d("45.2"),zot(b)&&(b=!0),zot(c)){if(a.animatedObjects)for(var d=a.animatedObjects.length-1;d>=0;d--)a.animatedObjects.objects[d].pauseZimAnimate(b)}else if(Array.isArray(c)||(c=[c]),a.idSets)for(var e=0;e<c.length;e++){var f=c[e];if(a.idSets[f])for(var d=a.idSets[f].length-1;d>=0;d--)a.idSets[f][d].pauseZimAnimate(b,f)}},a.loop=function(b,c,d,e,f,g){function p(a){return zot(f)&&(f=d?a:0),zot(g)&&(g=d?0:a),d&&g>f||!d&&f>g?0:(f<0&&g)<0||f>a&&g>a?0:(f=Math.max(0,Math.min(f,a)),g=Math.max(0,Math.min(g,a)),Math.floor((d?f-g:g-f)/e)+1)}var i,h="obj, call, reverse, step, start, end";if(i=zob(a.loop,arguments,h))return i;if(z_d("45.3"),!zot(b)&&!zot(c)){zot(d)&&(d=!1),(zot(e)||e<=0)&&(e=1);var j="number"==typeof b?"number":b.constructor===Array?"array":b.constructor==={}.constructor?"object":"container";if("container"!=j||b.addChild)if("number"==j||"array"==j){var k="number"==j?b:b.length,l=p(k-1);if(0==l)return;if(d)for(var m=f;m>=g;m-=e){if("number"==j)var n=c(m,l,f,g,b);else var n=c(b[m],m,l,f,g,b);if("undefined"!=typeof n)return n}else for(var m=f;m<=g;m+=e){if("number"==j)var n=c(m,l,f,g,b);else var n=c(b[m],m,l,f,g,b);if("undefined"!=typeof n)return n}}else if("object"==j){var k=0,o=[];for(var m in b)k++,o.push(m);var l=p(k-1);if(0==l)return;if(d)for(var m=f;m>=g;m-=e){var n=c(o[m],b[o[m]],m,l,f,g,b);if("undefined"!=typeof n)return n}else for(var m=f;m<=g;m+=e){var n=c(o[m],b[o[m]],m,l,f,g,b);if("undefined"!=typeof n)return n}}else{var l=p(b.numChildren-1);if(0==l)return;if(d)for(var m=f;m>=g;m-=e){var n=c(b.getChildAt(m),m,l,f,g,b);if("undefined"!=typeof n)return n}else for(var m=f;m<=g;m+=e){var n=c(b.getChildAt(m),m,l,f,g,b);if("undefined"!=typeof n)return n}}}},a.copyMatrix=function(a,b){return z_d("45.5"),a.x=b.x,a.y=b.y,a.scaleX=b.scaleX,a.scaleY=b.scaleY,a.regX=b.regX,a.regY=b.regY,a.rotation=b.rotation,a.skewX=b.skewX,a.skewY=b.skewY,a},a.pos=function(a,b,c){if(z_d("41.5"),!zot(a))return zot(b)||(a.x=b),zot(c)||(a.y=c),a},a.mov=function(a,b,c){if(z_d("41.6"),!zot(a))return zot(b)||(a.x+=b),zot(c)||(a.y+=c),a},a.alp=function(a,b){if(z_d("41.7"),!zot(a))return zot(b)||(a.alpha=b),a},a.rot=function(a,b){if(z_d("41.8"),!zot(a))return zot(b)||(a.rotation=b),a},a.siz=function(a,b,c,d){if(z_d("41.85"),!zot(a))return zot(d)&&(d=!1),zot(b)||zot(c)?zot(b)?zot(c)||(d?a.heightOnly=c:a.height=c):d?a.widthOnly=b:a.width=b:(a.widthOnly=b,a.heightOnly=c),a},a.ske=function(a,b,c){if(z_d("41.9"),!zot(a))return zot(b)||(a.skewX=b),zot(c)||(a.skewY=c),a},a.reg=function(a,b,c){if(z_d("41.95"),!zot(a))return zot(b)||(a.regX=b),zot(c)||(a.regY=c),a},a.sca=function(a,b,c){if(z_d("41.97"),!zot(a)&&!zot(a.scaleX))return zot(b)&&(b=a.scaleX),zot(c)&&(c=b),a.scaleX=b,a.scaleY=c,a},a.scale=function(a,b,c){if(z_d("42"),!zot(a)&&!zot(a.scaleX))return zot(b)&&(b=a.scaleX),zot(c)&&(c=b),a.scaleX=b,a.scaleY=c,a},a.scaleTo=function(b,c,d,e,f){var h,g="obj, boundObj, percentX, percentY, type";if(h=zob(a.scaleTo,arguments,g))return h;if(z_d("43"),zot(b)||!b.getBounds||!b.getBounds())return void zog("zim create - scaleTo(): please provide an object (with setBounds) to scale");if(zot(c)||!c.getBounds||!c.getBounds())return void zog("zim create - scaleTo(): please provide a boundObject (with setBounds) to scale to");zot(d)&&(d=-1),zot(e)&&(e=-1),d==-1&&e==-1&&(d=e=100),zot(f)&&(f="smallest");var i=c.getBounds().width*d/100,j=c.getBounds().height*e/100;if((d==-1||e==-1)&&"both"!=f&&"stretch"!=f)return d==-1?a.scale(b,j/b.getBounds().height):a.scale(b,i/b.getBounds().width),b;if("both"==f||"stretch"==f)return b.scaleX=d!=-1?i/b.getBounds().width:b.scaleX,b.scaleY=e!=-1?j/b.getBounds().height:b.scaleY,b;if("biggest"==f||"largest"==f||"outside"==f)var k=Math.max(i/b.getBounds().width,j/b.getBounds().height);else var k=Math.min(i/b.getBounds().width,j/b.getBounds().height);return a.scale(b,k),b},a.fit=function(b,c,d,e,f,g){var i,h="obj, left, top, width, height, inside";if(i=zob(a.fit,arguments,h))return i;if(z_d("46"),!zot(b)&&b.getBounds){if(!b.getBounds())return void zog("zim create - fit(): please setBounds() on object");if(zot(c)){if(!b.getStage())return void zog("zim create - fit(): please add boundary dimensions or add obj to stage first");if(!b.getStage().getBounds())return void zog("zim create - fit(): please add boundary dimensions or add obj with bounds to stage first");var j=b.getStage().getBounds().width,k=b.getStage().getBounds().height;c=0,d=0,e=j,f=k}zot(g)&&(g=!0),b.scaleX=b.scaleY=1;var p,l=e,m=f,n=b.getBounds().width,o=b.getBounds().height;p=g?l/m>=n/o?m/o:l/n:l/m>=n/o?l/n:m/o,b.scaleX=b.scaleY=p;var q=n*p,r=o*p;return b.x=b.regX*p+c+(l-q)/2,b.y=b.regY*p+d+(m-r)/2,{x:b.x,y:b.y,width:q,height:r,scale:p,bX:c,bY:d,bWidth:e,bHeight:f}}},a.outline=function(b,c,d){var f,e="obj, color, size";if(f=zob(a.outline,arguments,e))return f;if(z_d("47"),zot(b)||!b.getBounds)return void zog("zim create - outline(): please provide object with bounds set");if(!b.getBounds())return void zog("zim create - outline(): please setBounds() on object");if(!b.parent)return void zog("zim create - outline(): object should be on stage first");zot(c)&&(c="brown"),zot(d)&&(d=2);var g=b.getBounds(),h=new createjs.Shape,i=new createjs.Shape,j=b.parent,k=b.localToLocal(g.x,g.y,j),l=b.localToLocal(g.x+g.width,g.y,j),m=b.localToLocal(g.x+g.width,g.y+g.height,j),n=b.localToLocal(g.x,g.y+g.height,j),o=b.localToLocal(0,0,j),p=h.graphics,q=i.graphics;p.s(c).ss(d).mt(k.x,k.y).lt(l.x,l.y).lt(m.x,m.y).lt(n.x,n.y).lt(k.x,k.y);var r=10,s=r+1;return q.s("white").ss(d+2),q.mt(-s,0).lt(s,0),q.mt(0,-s).lt(0,s),q.s(c).ss(d),q.mt(-r,0).lt(r,0),q.mt(0,-r).lt(0,r),i.x=o.x,i.y=o.y,i.rotation=b.rotation,p.s("white").ss(d+2).dc(b.x,b.y,r+6),p.s(c).ss(d).dc(b.x,b.y,r+6),b.parent.addChild(h),b.parent.addChild(i),b.getStage()&&b.getStage().update(),b},a.addTo=function(a,b,c){return z_d("47.5"),zot(a)?void zog("zim create - addTo(): please provide object"):zot(b)?void zog("zim create - addTo(): please provide container"):(zot(c)||isNaN(c)?b.addChild(a):b.addChildAt(a,c),a)},a.removeFrom=function(a,b){return z_d("47.6"),zot(a)?void zog("zim create - removeFrom(): please provide object"):zot(b)?void zog("zim create - removeFrom(): please provide container"):(b.removeChild(a),a)},a.centerReg=function(b,c,d,e){var g,f="obj, container, add, index";if(g=zob(a.centerReg,arguments,f))return g;if(z_d("48"),zot(b)||!b.getBounds||!b.getBounds())return void zog("zim create - centerReg(): please provide object with bounds set");var h=b.getBounds();return b.regX=h.x+h.width/2,b.regY=h.y+h.height/2,c?a.center(b,c,d,e):b},a.center=function(b,c,d,e){var g,f="obj, container, add, index";if(g=zob(a.center,arguments,f))return g;if(z_d("48.1"),zot(b)||!b.getBounds)return void zog("zim.center(): please provide object with bounds");if(zot(c)||!c.getBounds)return void zog("zim.center(): please provide container with bounds");var h=b.getBounds(),i=c.getBounds();if(zot(d)&&(d=!0),d&&c.addChild&&(zot(e)||Number.isNaN(e)?c.addChild(b):c.addChildAt(b,e)),zot(i))return b;if(zot(h))return b.x=c.getBounds().width/2,b.y=c.getBounds().height/2,b;var j=b.localToLocal(b.regX,b.regY,c),k=a.boundsToGlobal(b),l=a.boundsToGlobal(c,k,!0);if(b.x=i.x+i.width/2-l.width/2+(j.x-l.x),b.y=i.y+i.height/2-l.height/2+(j.y-l.y),!d&&c.getStage&&c.getStage()&&b.parent){var m=c.localToLocal(b.x,b.y,b.parent);b.x=m.x,b.y=m.y}return b},a.place=function(b,c){function d(){zog(c+".x = "+Math.round(b.x)+"; "+c+".y = "+Math.round(b.y)+";")}z_d("49"),zot(b)||(zot(c)&&(c="obj"),a.drag({obj:b,currentTarget:!0,dragCursor:"crosshair"}),zog("place "+c+" - to get new position"),b.on("click",d))},a.expand=function(a,b,c){if(z_d("50"),zot(a)||!a.getBounds)return void zog("zim create - expand(): please provide object with bounds set");zot(b)&&(b=20),zot(c)&&(c=b);var d=a.getBounds(),e=new createjs.Shape;return e.graphics.f("0").r(d.x-b,d.y-c,d.width+2*b,d.height+2*c),a.hitArea=e,a},a.setMask=function(b,c){if(z_d("50.1"),zot(b))return void zog("zim create - setMask(): please provide obj");var d;return c&&c.shape?(c.zimMask=d=c.shape.clone(),a.copyMatrix(d,c),d.regX=c.regX,d.regY=c.regY,a.addDisplayMembers(d),c.addChildAt(d,0),d.alpha=0):d=c,b.mask=d,d},a.OPTIMIZE=!1,a.ACTIONEVENT="mousedown",a.extend=function(b,c,d,e,f){function k(){this.constructor=b}var h,g="subclass, superclass, override, prefix, prototype";if(h=zob(a.extend,arguments,g))return h;if((zot(b)||zot(c))&&zon)return void zog("zim.extend() - please supply a class and its superclass");zot(e)&&(e="super"),zot(d)&&(d=[]),Array.isArray(d)||(d=[d]),zot(f)&&(f=!0);var i={};for(var j in b.prototype)Object.defineProperty(i,j,Object.getOwnPropertyDescriptor(b.prototype,j));k.prototype=c.prototype,b.prototype=new k;for(j in i)Object.defineProperty(b.prototype,j,Object.getOwnPropertyDescriptor(i,j));var l=b.prototype,m=Object.getPrototypeOf&&Object.getPrototypeOf(l)||l.__proto__;if(m){l[(e+="_")+"constructor"]=m.constructor;for(var n,o=0;o<d.length;o++)n=d[o],"function"==typeof m[n]&&(l[e+n]=m[n]);if(f)for(n in m)l.hasOwnProperty(n)&&"function"==typeof m[n]&&(l[e+n]=m[n])}return b},a.displayMethods={drag:function(b,c,d,e,f,g,h,i,j,k,l,m,n){return isDUO(arguments)?(arguments[0].obj=this,a.drag(arguments[0])):a.drag(this,b,c,d,e,f,g,h,i,j,k,l,m,n)},noDrag:function(){return a.noDrag(this)},dragRect:function(b){return a.dragRect(this,b)},setSwipe:function(b){return a.setSwipe(this,b)},hitTestPoint:function(b,c){return a.hitTestPoint(this,b,c)},hitTestReg:function(b){return a.hitTestReg(this,b)},hitTestRect:function(b,c){return a.hitTestRect(this,b,c)},hitTestCircle:function(b,c){return a.hitTestCircle(this,b,c)},hitTestBounds:function(b,c){return a.hitTestBounds(this,b,c)},boundsToGlobal:function(b,c){return a.boundsToGlobal(this,b,c)},hitTestGrid:function(b,c,d,e,f,g,h,i,j,k,l,m){return a.hitTestGrid(this,b,c,d,e,f,g,h,i,j,k,l,m)},move:function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){return isDUO(arguments)?(arguments[0].target=this,a.move(arguments[0])):a.move(this,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z)},animate:function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){return isDUO(arguments)?(arguments[0].target=this,a.animate(arguments[0])):a.animate(this,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z)},loop:function(b,c,d,e,f){return a.loop(this,b,c,d,e,f)},copyMatrix:function(b){return a.copyMatrix(this,b)},pos:function(b,c){return a.pos(this,b,c)},mov:function(b,c){return a.mov(this,b,c)},alp:function(b){return a.alp(this,b)},rot:function(b){return a.rot(this,b)},siz:function(b,c,d){return a.siz(this,b,c,d)},ske:function(b,c){return a.ske(this,b,c)},reg:function(b,c){return a.reg(this,b,c)},sca:function(b,c){return a.sca(this,b,c)},scale:function(b,c){return a.scale(this,b,c)},scaleTo:function(b,c,d,e){return isDUO(arguments)?(arguments[0].obj=this,a.scaleTo(arguments[0])):a.scaleTo(this,b,c,d,e)},fit:function(b,c,d,e,f){return isDUO(arguments)?(arguments[0].obj=this,a.fit(arguments[0])):a.fit(this,b,c,d,e,f)},outline:function(b,c){return isDUO(arguments)?(arguments[0].obj=this,a.outline(arguments[0])):a.outline(this,b,c)},addTo:function(b,c){return a.addTo(this,b,c)},removeFrom:function(b){return a.removeFrom(this,b)},centerReg:function(b,c,d){return isDUO(arguments)?(arguments[0].obj=this,a.centerReg(arguments[0])):a.centerReg(this,b,c,d)},center:function(b,c,d){return isDUO(arguments)?(arguments[0].obj=this,a.center(arguments[0])):a.center(this,b,c,d)},place:function(b){return a.place(this,b)},expand:function(b,c){return a.expand(this,b,c)},setMask:function(b){return a.setMask(this,b)},cloneProps:function(b){return b.alpha=this.alpha,b.mouseEnabled=this.mouseEnabled,b.tickEnabled=this.tickEnabled,b.name=this.name,b.regX=this.regX,b.regY=this.regY,b.visible=this.visible,b.shadow=this.shadow,a.copyMatrix(b,this),b.compositeOperation=this.compositeOperation,b.snapToPixel=this.snapToPixel,b.filters=null==this.filters?null:this.filters.slice(0),b.mask=this.mask,b.hitArea=this.hitArea,b.cursor=this.cursor,b._bounds=this._bounds,b},cloneChildren:function(a){a.children.length&&a.removeAllChildren();for(var b=a.children,c=0,d=this.children.length;c<d;c++){var e=this.children[c].clone();e.parent=a,b.push(e)}return a}},a.addDisplayMembers=function(b){z_d("50.4");for(var c in a.displayMethods)a.displayMethods.hasOwnProperty(c)&&(b[c]=a.displayMethods[c]);return Object.defineProperty(b,"width",{enumerable:!0,get:function(){var a=this.getBounds();return zot(a)?null:a.width*this.scaleX},set:function(a){var b=this.getBounds();if(zot(b)||0==b.width)return void zog("width needs bounds set with setBounds()");var c=a/b.width;this.scaleX=this.scaleY=c}}),Object.defineProperty(b,"height",{enumerable:!0,get:function(){var a=this.getBounds();return zot(a)?null:a.height*this.scaleY},set:function(a){var b=this.getBounds();if(zot(b)||0==b.height)return void zog("height needs bounds set with setBounds()");var c=a/b.height;this.scaleX=this.scaleY=c}}),Object.defineProperty(b,"widthOnly",{enumerable:!0,get:function(){var a=this.getBounds();return zot(a)?null:a.width*this.scaleX},set:function(a){var b=this.getBounds();if(zot(b)||0==b.width)return void zog("widthOnly needs bounds set with setBounds()");var c=a/b.width;this.scaleX=c}}),Object.defineProperty(b,"heightOnly",{enumerable:!0,get:function(){var a=this.getBounds();return zot(a)?null:a.height*this.scaleY},set:function(a){var b=this.getBounds();if(zot(b)||0==b.height)return void zog("heightOnly needs bounds set with setBounds()");var c=a/b.height;this.scaleY=c}}),b},a.Container=function(b,c,d,e){if(z_d("50.5"),this.cjsContainer_constructor(),zot(d))var f=0,g=b,h=0,i=c;else var f=b,g=d,h=c,i=e;zot(i)&&(i=g),zot(b)||this.setBounds(f,h,g,i),this.clone=function(){return this.cloneChildren(this.cloneProps(new a.Container(f,h,g,i)))}},a.addDisplayMembers(a.Container.prototype),a.extend(a.Container,createjs.Container,"clone","cjsContainer",!1),a.Shape=function(b,c,d,e,f){z_d("50.6"),this.cjsShape_constructor(f);var g=this;if(zot(d))var h=0,i=b,j=0,k=c;else var h=b,i=d,j=c,k=e;zot(k)&&(k=i),zot(b)||this.setBounds(h,j,i,k),this.clone=function(b){zot(b)&&(b=!0);var c=g.cloneProps(new a.Shape(i,k,h,j,f));return b?c.graphics=g.graphics.clone():c.graphics=g.graphics,c}},a.extend(a.Shape,createjs.Shape,"clone","cjsShape",!1),a.addDisplayMembers(a.Shape.prototype),a.Bitmap=function(b,c){z_d("50.7"),this.cjsBitmap_constructor(b),this.id=c,this.clone=function(){return this.cloneProps(new a.Bitmap(b,c))}},a.extend(a.Bitmap,createjs.Bitmap,"clone","cjsBitmap",!1),a.addDisplayMembers(a.Bitmap.prototype),a.Sprite=function(b,c,d,e,f,g,h,i,j,k,l,m,n,o){var q,p="image, cols, rows, count, offsetX, offsetY, spacingX, spacingY, width, height, animations, json, id, globalControl";if(q=zob(a.Sprite,arguments,p,this))return q;z_d("50.8");var r=this;if(zot(m)&&!zot(b)){zot(c)&&(c=1),zot(d)&&(d=1),zot(e)&&(e=c*d),zot(f)&&(f=0),zot(g)&&(g=0),zot(h)&&(h=0),zot(i)&&(i=0),zot(j)&&(j=b.width),zot(k)&&(k=b.height);var s=(j-f+h)/c-h,t=(k-g+i)/d-i,u=[],v=0;a:for(var w=0;w<d;w++)for(var x=0;x<c;x++){if(++v>e)break a;u.push([f+x*(s+h),g+w*(t+i),s,t])}var y={images:[b.image],frames:u,animations:l};spriteSheet=new createjs.SpriteSheet(y)}else l=m.animations,spriteSheet=new createjs.SpriteSheet(m);this.animations=l,this.cjsSprite_constructor(spriteSheet),zot(n)&&(n=a.makeID()),this.id=n,zot(o)&&(o=!0),r.globalControl=o,this.parseFrames=function(a,b,c){function f(a){Array.isArray(a)?g(a):a.constructor=={}.constructor?h(a):isNaN(a)||d.push({f:Math.floor(a),s:1})}function g(a){i(a[0],a[1],a[3]),a[2]&&!zot(r.animations[a[2]])&&f(r.animations[a[2]])}function h(a){if(!zot(a.frames)){zot(a.speed)&&(a.speed=1);for(var b=0;b<a.frames.length;b++)d.push({f:a.frames[b],s:a.speed});a.next&&!zot(r.animations[a.next])&&f(r.animations[a.next])}}function i(a,b,c){zot(c)&&(c=1);for(var e=a;e<=b;e++)d.push({f:e,s:c})}var d=[];if(zot(a))zot(b)&&(b=0),zot(c)&&(c=r.totalFrames-1),i(b,c);else{if(zot(r.animations)||zot(r.animations[a]))return[];var e=r.animations[a];f(e)}return d},this.run=function(b,c,d,e,f,g,h,i,j,k,m,n,o,p,q,s,t,u,v){function H(a){function c(a){"number"==typeof a?q=s=a:a.constructor=={}.constructor?(zot(a.frames)?(zon&&zog("zim.Sprite() - run() does not support nested labels - see docs"),q=0,s=spriteSheet.getNumFrames()-1):c(a.frames),q=a.frames):(q=a[0],s=a[a.length-1])}var b=l[a];return c(b),[q,s]}var x,w="time, label, call, params, wait, loop, loopCount, loopWait, loopCall, loopParams, rewind, rewindWait, rewindCall, rewindParams, startFrame, endFrame, tweek, id, globalControl";if(x=zob(this.run,arguments,w))return x;var y,z;if(zot(t)&&(t=1),zot(u)||(r.id=u),zot(v)||(r.globalControl=v),Array.isArray(c)){var A,B;y=[];for(var D,C=0,E=0;E<c.length;E++){if(A=c[E],zot(A.label)||zot(l)||zot(l[A.label])){if(zot(A.startFrame)&&zot(A.endFrame)){zon&&zog("zim.Sprite - run() - bad multiple label format - see docs");continue}zot(A.endFrame)&&(A.endFrame=spriteSheet.getNumFrames()-1),zot(A.startFrame)&&(A.startFrame=0),q=A.startFrame,s=A.endFrame}else{var F=H(A.label);q=F[0],s=F[1]}delete A.startFrame,delete A.endFrame,A.obj=a.merge(A.obj,{frame:s}),A.set=a.merge(A.set,{frame:q}),zot(A.wait)&&(A.wait=C*t),B=A.label,delete A.label,y.push(A),C=0;var G=zot(A.time)?b:A.time;s-q>0&&(C=G/(s-q)/2),0==E&&(D=q)}if(q=D,0==y.length)return this;1==y.length&&(b=y[0].time,c=B,y=null)}if(!Array.isArray(c)){if(zot(c)||zot(l)||zot(l[c]))c=null,zot(q)&&(q=0),zot(s)&&(s=spriteSheet.getNumFrames()-1);else{var F=H(c);q=F[0],s=F[1]}y={frame:s},z={frame:q}}if(zot(b)&&(b=1e3),r.running&&r.stopZimAnimate(r.id),r.running=!0,!Array.isArray(y)){var C=0;s-q>0&&(C=b/(s-q)/2),zot(i)&&(i=C*t),zot(n)&&(n=C*t)}r.frame=q;var I=function(){d&&"function"==typeof d&&d(e),r.running=!1};return a.animate({target:r,obj:y,time:b,ease:"linear",call:I,params:e,wait:f,override:!1,loop:g,loopCount:h,loopWait:i,loopCall:j,loopParams:k,rewind:m,rewindWait:n,rewindCall:o,rewindParams:p,id:r.id}),r.runPaused=!1,r},this.runPaused=!0,this.pauseRun=function(b){zot(b)&&(b=!0),r.runPaused=b,r.globalControl?a.pauseZimAnimate(b,r.id):r.pauseZimAnimate(b,r.id)},this.stopRun=function(){r.runPaused=!0,r.running=!1,r.globalControl?a.stopZimAnimate(r.id):r.stopZimAnimate(r.id)},Object.defineProperty(this,"frame",{get:function(){return this.currentFrame},set:function(a){zot(a)&&(a=0),a=Math.round(a),this.paused?this.gotoAndStop(a):this.gotoAndPlay(a)}}),Object.defineProperty(this,"totalFrames",{get:function(){return spriteSheet.getNumFrames()},set:function(a){zog("zim.Sprite - totalFrames is readOnly")}}),this.clone=function(){return this.cloneProps(new a.Sprite(b,c,d,e,f,g,h,i,j,k,l,spriteSheet))}},a.extend(a.Sprite,createjs.Sprite,"clone","cjsSprite",!1),a.addDisplayMembers(a.Sprite.prototype),a.MovieClip=function(b,c,d,e){var g,f="mode, startPosition, loop, labels";return(g=zob(a.MovieClip,arguments,f,this))?g:(z_d("50.9"),this.cjsMovieClip_constructor(b,c,d,e),void(this.clone=function(){return this.cloneProps(new a.MovieClip(b,c,d,e))}))},a.extend(a.MovieClip,createjs.MovieClip,"clone","cjsMovieClip",!1),a.addDisplayMembers(a.MovieClip.prototype),a.Circle=function(b,c,d,e){function r(){n.c(),o=n.f(j).command,(zot(l)||l>0)&&(zot(k)&&zot(l)||(zot(k)&&(k="black"),p=n.s(k).command,q=n.ss(l).command)),n.dc(0,0,i),h.setBounds(-i,-i,2*i,2*i)}var g,f="radius, color, borderColor, borderWidth";if(g=zob(a.Circle,arguments,f,this))return g;z_d("51"),this.zimContainer_constructor(),zot(b)&&(b=50),zot(c)&&(c="black");var h=this,i=b,j=c,k=d,l=e;this.mouseChildren=!1;var m=this.shape=new createjs.Shape;this.addChild(m);var o,p,q,n=m.graphics;r(),Object.defineProperty(h,"color",{get:function(){return j},set:function(a){zot(a)&&(a="black"),j=a,o.style=j}}),Object.defineProperty(h,"borderColor",{get:function(){return k},set:function(a){k=a,p?p.style=k:r()}}),Object.defineProperty(h,"borderWidth",{get:function(){return l},set:function(a){a>0||(a=0),l=a,q&&0!=l?q.width=l:r()}}),Object.defineProperty(h,"radius",{get:function(){return i},set:function(a){i=a,r()}}),this.clone=function(){return h.cloneProps(new a.Circle(b,c,d,e))}},a.extend(a.Circle,a.Container,"clone","zimContainer",!1),a.Rectangle=function(b,c,d,e,f,g,h){function t(){p.c(),q=p.f(l).command,(zot(n)||n>0)&&(zot(m)&&zot(n)||(zot(m)&&(m="black"),r=p.s(m).command,s=p.ss(n).command)),g>0?h?p.rc(0,0,b,c,g,g,0,0):p.rr(0,0,b,c,g):p.r(0,0,b,c),k.setBounds(0,0,b,c)}var j,i="width, height, color, borderColor, borderWidth, corner, flatBottom";if(j=zob(a.Rectangle,arguments,i,this))return j;z_d("52"),this.zimContainer_constructor(),zot(b)&&(b=100),zot(c)&&(c=100),zot(d)&&(d="black"),zot(g)&&(g=0),zot(h)&&(h=!1);var k=this,l=d,m=e,n=f;this.mouseChildren=!1;var o=this.shape=new createjs.Shape;this.addChild(o);var q,r,s,p=o.graphics;t(),Object.defineProperty(k,"color",{get:function(){return l},set:function(a){zot(a)&&(a="black"),l=a,q.style=l}}),Object.defineProperty(k,"borderColor",{get:function(){return m},set:function(a){m=a,r?r.style=m:t()}}),Object.defineProperty(k,"borderWidth",{get:function(){return n},set:function(a){a>0||(a=0),n=a,s&&0!=n?s.width=n:t()}}),this.clone=function(){return k.cloneProps(new a.Rectangle(b,c,d,e,f,g,h))}},a.extend(a.Rectangle,a.Container,"clone","zimContainer",!1),a.Triangle=function(b,c,d,e,f,g,h,i){function w(){s.c(),t=s.f(m).command,(zot(o)||o>0)&&(zot(n)&&zot(o)||(zot(n)&&(n="black"),u=s.s(n).command,v=s.ss(o).command)),s.mt(0,0),l.one={x:0,y:0},s.lt(b,0),l.two={x:b,y:0};var a=180*Math.acos((Math.pow(bb,2)+Math.pow(cc,2)-Math.pow(aa,2))/(2*bb*cc))/Math.PI,d=180*Math.asin(bb*Math.sin(a*Math.PI/180)/aa)/Math.PI,e=180-a-d,f=[a,d,e];l.angles=[f[q[1]],f[q[2]],f[q[0]]];var g=l.angles[1],j=Math.cos(g*Math.PI/180)*c,k=Math.sin(g*Math.PI/180)*c,p=Math.max(b,b-j),w=k;l.setBounds(0,0,p,w),r.y=w,s.lt(b-j,0-k),l.three={x:b-j,y:0-k},s.cp(),h&&(l.regX=p/2,l.regY=w/2+i)}var k,j="a, b, c, color, borderColor, borderWidth, center, adjust";if(k=zob(a.Triangle,arguments,j,this))return k;z_d("53"),this.zimContainer_constructor(),zot(b)&&(b=100),zot(c)&&(c=b),zot(d)&&(d=c),d==-1&&(d=Math.sqrt(Math.pow(b,2)+Math.pow(c,2))),zot(e)&&(e="black"),zot(h)&&(h=!0),zot(i)&&(i=0);var l=this,m=e,n=f,o=g;this.mouseChildren=!1;var p=[b,c,d];p.sort(function(a,b){return b-a}),aa=p[0],bb=p[1],cc=p[2];var q=[p.indexOf(b),p.indexOf(c),p.indexOf(d)];if(aa>bb+cc)return void zog("zim build - Triangle(): invalid triangle lengths");var r=this.shape=new createjs.Shape;this.addChild(r);var t,u,v,s=r.graphics;w(),Object.defineProperty(l,"color",{get:function(){return m},set:function(a){zot(a)&&(a="black"),m=a,t.style=m}}),Object.defineProperty(l,"borderColor",{get:function(){return n},set:function(a){n=a,u?u.style=n:w()}}),Object.defineProperty(l,"borderWidth",{get:function(){return o},set:function(a){a>0||(a=0),o=a,v&&0!=o?v.width=o:w()}}),this.clone=function(){return l.cloneProps(new a.Triangle(b,c,d,e,f,g,h,i))}},a.extend(a.Triangle,a.Container,"clone","zimContainer"),a.Label=function(c,d,e,f,g,h,i,j,k,l,m,n,o){function t(){var b,a=s.getBounds();"top"==k?(s.y=d-d/6,b=0):"center"==k||"middle"==k?(b=-a.height/2,s.y=.3*d):b=-a.height,s.setBounds(a.x,b,a.width,a.height),r.setBounds(a.x,b,a.width,a.height)}var q,p="text, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, lineWidth, lineHeight, fontOptions, backing";if(q=zob(a.Label,arguments,p,this))return q;z_d("54"),this.zimContainer_constructor(),zot(c)&&(c="LABEL"),""===c&&(c=" "),zot(d)&&(d=36),zot(e)&&(e="arial"),zot(f)&&(f="black"),zot(g)&&(g=f),zot(h)&&(h=-1),zot(i)&&(i=14),zot(j)&&(j="left"),zot(k)&&(k="top"),zot(n)&&(n="");var r=this;this.mouseChildren=!1;var s=this.label=new createjs.Text(String(c),n+" "+d+"px "+e,f);if(s.textAlign=j,s.lineWidth=l,s.lineHeight=m,s.textBaseline="alphabetic",h!=-1&&i>0&&(s.shadow=new createjs.Shadow(h,3,3,i)),this.addChild(s),t(),zot(o)){var u=new createjs.Shape;u.graphics.f("black").r(s.getBounds().x,s.getBounds().y,s.getBounds().width,s.getBounds().height),this.hitArea=u}else this.backing=o,a.center(o,this,!0,0),o.y-=d/16;Object.defineProperty(r,"text",{get:function(){var a=" "==s.text?"":s.text;return a},set:function(a){zot(a)&&(a=" "),s.text=String(a),t()}}),Object.defineProperty(r,"color",{get:function(){return f},set:function(b){f=b,s.color=f,!a.OPTIMIZE&&r.getStage()&&r.getStage().update()}}),Object.defineProperty(r,"rollColor",{get:function(){return g},set:function(a){g=a}}),this._enabled=!0,Object.defineProperty(r,"enabled",{get:function(){return r._enabled},set:function(c){b(r,c),s.color=f,r.mouseChildren=!1,!a.OPTIMIZE&&r.getStage()&&r.getStage().update()}}),this.showRollColor=function(a){zot(a)&&(a=!0),a?s.color=g:s.color=f,r.getStage()&&r.getStage().update()},this.on("mouseover",function(a){r.showRollColor()}),this.on("mouseout",function(a){r.showRollColor(!1)}),this.clone=function(){return r.cloneProps(new a.Label(r.text,d,e,f,g,h,i,j,k,l,m,n,o))},this.dispose=function(){return r.removeAllEventListeners(),!0}},a.extend(a.Label,a.Container,"clone","zimContainer"),a.Button=function(c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){function I(a){H=!0,zot(q)?B.color=g:zot(r)||(zot(t)&&A.toggled?(A.removeChild(v),A.addChildAt(w,0)):(A.removeChild(q),A.addChildAt(r,0))),zot(u)||(A.toggled?(A.removeChild(v),A.addChild(w)):(A.removeChild(t),A.addChild(u))),A.label.showRollColor(),A.getStage()&&A.getStage().update()}function J(a){H=!1,A.off("mouseout",J),A.rollPersist?G||K():K()}function K(){zot(q)?B.color=f:zot(r)||(zot(t)&&A.toggled?(A.removeChild(w),A.addChildAt(v,0)):(A.removeChild(r),A.addChildAt(q,0))),zot(u)||(A.toggled?(A.removeChild(w),A.addChild(v)):(A.removeChild(u),A.addChild(t))),A.label.showRollColor(!1),A.getStage()&&A.getStage().update()}function N(){"string"==typeof v?(A.text=A.toggled?v:M,!a.OPTIMIZE&&A.getStage()&&A.getStage().update()):zot(t)?A.setBackings(A.toggled?v:q,A.toggled?w:r):A.setIcons(A.toggled?v:t,A.toggled?w:u)}function O(b,e,f,g,h){A.contains(A[b])?(A.removeChild(A[b]),A.addChildAt(f,h)):A.contains(A[e])&&(A.removeChild(A[e]),A.addChildAt(g,h)),A[b]=f,A[e]=g,A[b]&&(A[b].x=c/2,A[b].y=d/2),A[e]&&(A[e].x=c/2,A[e].y=d/2),!a.OPTIMIZE&&A.getStage()&&A.getStage().update()}var z,y="width, height, label, color, rollColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, flatBottom, backing, rollBacking, rollPersist, icon, rollIcon, toggle, rollToggle, toggleEvent";if(z=zob(a.Button,arguments,y,this))return z;z_d("55"),this.zimContainer_constructor(),zot(c)&&(c=200),zot(d)&&(d=60),zot(f)&&(f="#C60"),zot(g)&&(g="#F93"),zot(h)&&(h=null),zot(i)&&(i=null),zot(j)&&(j=20),zot(k)&&(k="rgba(0,0,0,.3)"),zot(l)&&(l=14),zot(m)&&(m=0),zot(n)&&(n=0),zot(o)&&(o=0),zot(p)&&(p=!1),zot(e)&&(e=zot(t)?"PRESS":""),!zot(v)&&zot(x)&&(x=a.mobile()?"mousedown":"click"),"string"!=typeof e&&"number"!=typeof e||(e=new a.Label(e,36,"arial","white",null,null,null,"center","middle")),zot(s)&&(s=!1),this.rollPersist=s;var A=this;this.mouseChildren=!1,this.cursor="pointer";var B;zot(q)?B=new a.Rectangle(c,d,f,h,i,j,p):(B=q,B.x=c/2,B.y=d/2,zot(r)||(r.x=c/2,r.y=d/2,this.rollBacking=r)),this.addChild(B),this.backing=B,zot(t)||(this.addChild(t),t.x=c/2,t.y=d/2,this.icon=t),zot(u)||(this.rollIcon=u,u.x=c/2,u.y=d/2);var C=p?0:j;if(n>0&&zot(q)){var D=new createjs.Shape;D.graphics.lf(["rgba(255,255,255,"+n+")","rgba(0,0,0,"+n+")"],[0,1],0,0,0,d-i),D.graphics.rc(i/2,i/2,c-i,d-i,j,j,C,C),B.addChild(D)}if(o>0&&zot(q)){var E=new createjs.Shape;E.graphics.f("rgba(255,255,255,"+o+")"),E.graphics.rc(i/2,i/2,c-i,(d-i)/2,j,j,0,0),E.graphics.f("rgba(0,0,0,"+o+")"),E.graphics.rc(i/2,d/2,c-i,(d-i)/2,0,0,C,C),B.addChild(E)}if(m>0){var F=new createjs.Shape;F.graphics.f("#000").r(-m,-m,c+2*m,d+2*m),this.hitArea=F}k!=-1&&l>0&&(B.shadow=new createjs.Shadow(k,3,3,l),zot(r)||(r.shadow=new createjs.Shadow(k,3,3,l))),this.setBounds(0,0,c,d),this.addChild(e),e.center(this),e.y+=2,this.label=e;var G=!1;this.on("mousedown",function(){G=!0}),this.on("pressup",function(){G=!1,A.rollPersist&&!H&&K()});var H=!1;this.on("mouseover",I),this.on("mouseout",J),this.toggled=!1,this.toggleObj=v,this.rollToggle=w;var L,M=e.text;zot(v)||(L=this.on(x,function(){A.toggled=!A.toggled,N(A.toggled)})),Object.defineProperty(A,"text",{get:function(){var a=" "==e.text?"":e.text;return a},set:function(a){e.text=a,e.center(this),e.y+=2}}),Object.defineProperty(A,"color",{get:function(){return f},set:function(b){f=b,B.color?B.color=f:zon&&zog("zim.Button - backing has no color property"),!a.OPTIMIZE&&A.getStage()&&A.getStage().update()}}),Object.defineProperty(A,"rollColor",{get:function(){return g},set:function(a){g=a}}),this._enabled=!0,Object.defineProperty(A,"enabled",{get:function(){return A._enabled},set:function(c){b(A,c),A.mouseChildren=!1,e.color=e.color,!a.OPTIMIZE&&A.getStage()&&A.getStage().update()}}),this.setBackings=function(a,b){O("backing","rollBacking",a,b,0)},this.setIcons=function(a,b){O("icon","rollIcon",a,b,A.numChildren-1)},this.toggle=function(a){zot(a)?A.toggled=!A.toggled:A.toggled=a,N()},this.clone=function(){var b=new a.Button(c,d,e.clone(),f,g,h,i,j,k,l,m,n,o,p,zot(q)?null:q.clone(),zot(r)?null:r.clone(),s,zot(t)?null:t.clone(),zot(u)?null:u.clone(),zot(v)?null:"string"==typeof v?v:v.clone(),zot(w)?null:w.clone(),x);return A.cloneProps(b)},this.dispose=function(){return A.removeAllEventListeners(),A.removeChild(B),A.removeChild(r),A.removeChild(t),A.removeChild(A.label),A.label.dispose(),B=null,r=null,t=null,A.label=null,!0}},a.extend(a.Button,a.Container,"clone","zimContainer",!1),a.CheckBox=function(c,d,e,f,g,h){function v(a){k=!k,l.setChecked(k),l.dispatchEvent("change")}var j,i="size, label, startChecked, color, margin, type";if(j=zob(a.CheckBox,arguments,i,this))return j;z_d("56"),this.zimContainer_constructor(),zot(c)&&(c=60),zot(d)&&(d=null),"string"!=typeof d&&"number"!=typeof d||(d=new a.Label(d,5*c/6,"arial",f));var k=!zot(e)&&e;zot(f)&&(f="#111"),zot(g)&&(g=10),"box"!=h&&"square"!=h&&"x"!=h&&(h="check"),this.setBounds(-g,-g,c+2*g,c+2*g);var l=this;this.cursor="pointer";var m=new createjs.Shape,n=m.graphics;n.f("rgba(255,255,255,.5)").r(0,0,c,c),n.s(f).ss(c/10).r(c/7,c/7,c-c/7*2,c-c/7*2),this.addChild(m);var o=c;d&&(this.addChild(d),d.x=1.3*c+g,d.y=c/8,this.label=d,this.setBounds(-g,-g,c+3*g+d.getBounds().width,Math.max(c+2*g,d.getBounds().height)),o=d.x+d.width);var p=new createjs.Shape;n=p.graphics,n.f("rgba(0,0,0,.01)").r(this.getBounds().x,this.getBounds().y,o+2*g,this.getBounds().height),this.hitArea=p;var q=new createjs.Shape,r=q.graphics,s="#000";"check"==h?r.f(s).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"):"box"==h||"square"==h?r.f(s).dr(-35,-35,70,70):r.f(s).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg");var t=95;q.setBounds(-t/2,-t/2,t,t);var u=c/(t+66);q.scaleX=q.scaleY=u,q.alpha=.9,q.x=c/2,q.y=c/2,k&&this.addChild(q),this.on("mousedown"==a.ACTIONEVENT?"mousedown":"click",v),Object.defineProperty(l,"checked",{get:function(){return k},set:function(a){l.setChecked(a)}}),Object.defineProperty(l,"text",{get:function(){if(d)return d.text},set:function(b){d&&(d.text=b,!a.OPTIMIZE&&l.getStage()&&l.getStage().update())}}),Object.defineProperty(q,"color",{get:function(){return s},set:function(b){k&&l.removeChild(q),q=new createjs.Shape,r=q.graphics,s=b,r.f(s).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"),q.scaleX=q.scaleY=u,q.alpha=.9,q.x=c/2,q.y=c/2,k&&l.addChild(q),!a.OPTIMIZE&&l.getStage()&&l.getStage().update()}}),Object.defineProperty(l,"check",{get:function(){return q},set:function(a){zog("ZIM CheckBox - check is read only");
}}),this._enabled=!0,Object.defineProperty(l,"enabled",{get:function(){return l._enabled},set:function(a){b(l,a)}}),this.setChecked=function(b){zot(b)&&(b=!0),k=b,k?l.addChild(q):l.removeChild(q),!a.OPTIMIZE&&l.getStage()&&l.getStage().update()},this.clone=function(){return l.cloneProps(new a.CheckBox(c,d.clone(),e,f,g,h))},this.dispose=function(){return l.removeAllEventListeners(),!0}},a.extend(a.CheckBox,a.Container,"clone","zimContainer",!1),a.RadioButtons=function(c,d,e,f,g,h,i){function q(a){var b=p.getChildIndex(a.target);i&&l.selectedIndex==b||(l.setSelected(b),l.dispatchEvent("change"))}function s(){for(var b,h=!1,i=d.length-1;i>=0;i--)b=d[i],b.selected&&b.selected===!0&&(h?b.selected="false":(h=!0,l.id=b.id));p.removeAllChildren();for(var j,k=0,i=0;i<d.length;i++){if(b=d[i],"string"==typeof b||"number"==typeof b){var n={selected:!1,label:new a.Label(b,5*c/6,"arial",f)};b=n}(b.label&&"string"==typeof b.label||"number"==typeof b.label)&&(b.label=new a.Label(b.label,5*c/6,"arial",f)),l.labels.push(b.label),b.index=i,d[i]=b,j=t(b.selected,b.label),j.obj=b,b.selected&&(m=j.obj),p.addChild(j),e?(j.y=k,k+=j.getBounds().height+g):(j.x=k,k+=j.getBounds().width+g)}}function t(b,d){var e=new a.Container;e.mouseChildren=!1,e.setBounds(-h,-h,c+2*h,c+2*h);var g=new createjs.Shape,i=g.graphics;i.f("rgba(255,255,255,.5)").dc(c/2,c/2,c/1.85),i.s(f).ss(c/9).dc(c/2,c/2,c/2-c/2/5),e.addChild(g);var j=e.check=new a.Circle(c/5.2,"rgba(0,0,0,.7)");l.dots.push(j),j.mouseEnabled=!1,j.alpha=.95,j.regX=j.regY=-c/2;var k=c;d&&(e.addChild(d),d.x=e.getBounds().width,d.y=c/8,e.setBounds(-h,-h,c+2*h+d.getBounds().width,Math.max(c+2*h,d.getBounds().height)),k=d.x+d.width),b&&(e.addChild(j),l.label=d,l.label&&(l.text=d.text));var m=new createjs.Shape;return i=m.graphics,i.f("rgba(0,0,0,.01)").r(e.getBounds().x,e.getBounds().y,k+2*h,e.getBounds().height),e.hitArea=m,e}var k,j="size, buttons, vertical, color, spacing, margin, always";if(k=zob(a.RadioButtons,arguments,j,this))return k;z_d("57"),this.zimContainer_constructor(),zot(c)&&(c=60),c=Math.max(5,c),zot(d)&&(d=["A","B","C"]),zot(e)&&(e=!0),zot(f)&&(f="#111"),zot(g)&&(g=e?.2*c:c),zot(h)&&(h=c/5);var l=this;this.cursor="pointer",this.labels=[],this.dots=[];var m;if("string"==typeof d){var n=d;d=[];for(var o=0;o<n.length;o++)d.push({label:n[o]})}var p=new a.Container;this.addChild(p),p.on("mousedown"==a.ACTIONEVENT?"mousedown":"click",q),s();this.getBounds()||this.setBounds(0,0,c,c),this.setBounds(-h,-h,this.getBounds().width+h,this.getBounds().height+h),this.setSelected=function(b){if(zot(b)&&(b=-1),b==-1||p.getChildAt(b)){for(var c,d=0;d<p.getNumChildren();d++)c=p.getChildAt(d),c.removeChild(c.check);if(b>=0){c=p.getChildAt(b);var e=-2;m&&(e=m.index),m=c.obj}b==-1||e==m.index?(m=null,l.id=null,l.label=null,l.text=""):(c.addChild(c.check),l.id=m.id,l.label=m.label,l.label&&(l.text=l.label.text)),!a.OPTIMIZE&&l.getStage()&&l.getStage().update()}},Object.defineProperty(l,"selected",{get:function(){return m},set:function(a){zog("ZIM RadioButton - selected is read only")}}),Object.defineProperty(l,"selectedIndex",{get:function(){return m?m.index:-1},set:function(a){var b=a;i&&l.selectedIndex==b||l.setSelected(b)}}),this._enabled=!0,Object.defineProperty(l,"enabled",{get:function(){return l._enabled},set:function(a){b(l,a)}}),this.clone=function(){for(var b=a.copy(d),j=0;j<b.length;j++)b[j].label=b[j].label.clone();return l.cloneProps(new a.RadioButtons(c,b,e,f,g,h,i))},this.dispose=function(){return l.removeAllEventListeners(),!0}},a.extend(a.RadioButtons,a.Container,"clone","zimContainer",!1),a.Pane=function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function w(a){A(),b.getStage().update(),v.dispatchEvent("close"),a.stopImmediatePropagation()}function A(){function c(){b.removeChild(v),a.OPTIMIZE||b.getStage().update(),h&&(isNaN(v.resetX)||(v.x=v.resetX),isNaN(v.resetY)||(v.y=v.resetY))}q>0?v.animate({obj:{alpha:0},time:q,call:c}):c()}function B(a,e){return a=Math.max(c/2,Math.min(b.getBounds().width-c/2,a)),e=Math.max(d/2,Math.min(b.getBounds().height-d/2,e)),{x:a,y:e}}var s,r="container, width, height, label, color, drag, resets, modal, corner, backingAlpha, shadowColor, shadowBlur, center, displayClose, backing, fadeTime";if(s=zob(a.Pane,arguments,r,this))return s;if(z_d("58"),this.zimContainer_constructor(),zot(b)||!b.getBounds)return void zog("zim build - Pane(): Please pass in a reference to a container with bounds set as first parameter");if(!b.getBounds())return void zog("zim build - Pane(): Please give the container bounds using setBounds()");if(zot(b.getStage))return void zog("zim build - Pane(): The container must have a stage property");zot(c)&&(c=200),zot(d)&&(d=200),zot(e)&&(e=null),"string"!=typeof e&&"number"!=typeof e||(e=new a.Label(e,40,"arial","black")),zot(f)&&(f="white"),zot(g)&&(g=!1),zot(h)&&(h=!0),zot(i)&&(i=!0),zot(j)&&(j=20),zot(k)&&(k=.14),zot(l)&&(l="rgba(0,0,0,.3)"),zot(m)&&(m=20),zot(n)&&(n=!0),zot(o)&&(o=!0),g&&(o=!1),zot(q)&&(q=0);var t=this.backdrop=new createjs.Shape,u=t.graphics;u.f("black"),u.drawRect(-5e3,-5e3,1e4,1e4),this.setBounds(-c/2,-d/2,c,d),t.alpha=k;var v=this;t.on("mousedown"==a.ACTIONEVENT?"mousedown":"click",w),t.on("mousedown",function(a){a.stopImmediatePropagation()}),i&&this.addChild(t);var x;if(zot(p)?(x=this.display=new createjs.Shape,u=x.graphics,u.f(f),u.rr(0,0,c,d,j),x.setBounds(0,0,c,d),x.regX=c/2,x.regY=d/2):x=p,o&&(x.cursor="pointer",x.on("mousedown"==a.ACTIONEVENT?"mousedown":"click",w)),l!=-1&&m>0&&(x.shadow=new createjs.Shadow(l,8,8,m)),x.on("click",function(a){a.stopImmediatePropagation()}),this.resetX,this.resetY,g){x.cursor="pointer";var y,z;x.on("mousedown",function(a){isNaN(v.resetX)&&(v.resetX=v.x),isNaN(v.resetY)&&(v.resetY=v.y),y=a.stageX-v.x,z=a.stageY-v.y,x.cursor="pointer"}),x.on("pressmove",function(a){var c=B(a.stageX-y,a.stageY-z);v.x=c.x,v.y=c.y,b.getStage().update()}),this.on("pressup",function(a){x.cursor="pointer",b.getStage().update()})}this.addChild(x),e&&(this.addChild(e),a.center(e,this),this.label=e,this.text=e.text,e.mouseEnabled=!1),Object.defineProperty(v,"text",{get:function(){var a=" "==e.text?"":e.text;return a},set:function(a){e.text=a}}),this.hide=function(){A()},this.show=function(){return n&&isNaN(v.resetX)&&(v.x=b.getBounds().width/2,v.y=b.getBounds().height/2),b.addChild(v),q>0?(v.alpha=0,v.animate({alpha:1},q)):b.getStage()&&b.getStage().update(),v},this.toggle=function(){return b.contains(v)?v.hide():v.show(),v},this.clone=function(){var r=e.x,s=e.y,t=v.cloneProps(new a.Pane(b,c,d,e.clone(),f,g,h,i,j,k,l,m,n,o,zot(p)?p.clone():null,q));return t.label.x=r,t.label.y=s,t},this.dispose=function(){return x.removeAllEventListeners(),v.removeChild(x),x=null,!0}},a.extend(a.Pane,a.Container,"clone","zimContainer",!1),a.Window=function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){function S(){a.dragRect(D,new createjs.Rectangle(0,0,N?-y.scrollXMax:0,O?-y.scrollYMax:0))}function T(){N&&j&&(H.x=L.convert(D.x)),O&&j&&(J.y=M.convert(D.y))}function U(){i&&(a.drag({obj:D,currentTarget:!0,localBounds:!0,slide:o,slideDamp:p,slideSnap:(i===!0||"auto"==i||"vertical"==i)&&q}),D.getBounds()&&D.getBounds().width>0&&setTimeout(function(){S()},300))}function V(b){E&&(E.x=-D.x,E.y=-D.y),a.Ticker.remove(T),N&&n&&a.animate(H,{alpha:0},G.fadeTime),O&&n&&a.animate(J,{alpha:0},G.fadeTime)}function Z(){Y=Date.now(),a.Ticker.add(ga,D.stage)}function $(){fa||(y.dispatchEvent("hoverout"),fa=!0),a.Ticker.remove(ga)}function ga(){Math.abs(_-D.stage.mouseX)>ea||Math.abs(aa-D.stage.mouseY)>ea?(fa||(y.dispatchEvent("hoverout"),fa=!0),Y=Date.now(),_=D.stage.mouseX,aa=D.stage.mouseY):Date.now()-Y>da&&((Math.abs(ba-D.stage.mouseX)>ea||Math.abs(ca-D.stage.mouseY)>ea)&&(y.contentMouse=D.globalToLocal(D.stage.mouseX,D.stage.mouseY),y.dispatchEvent("hoverover"),ba=D.stage.mouseX,ca=D.stage.mouseY,fa=!1),Y=Date.now())}var x,w="width, height, color, borderColor, borderWidth, padding, corner, swipe, indicatorActive, indicatorDrag, indicatorColor, indicatorAlpha, indicatorFade, slide, slideDamp, slideSnap, interactive, shadowColor, shadowBlur, paddingHorizontal, paddingVertical";if(x=zob(a.Window,arguments,w,this))return x;z_d("58.1"),this.zimContainer_constructor(),zot(b)&&(b=300),zot(c)&&(c=200),zot(d)&&(d="#333"),zot(e)&&(e="#999"),zot(f)&&(f=1),zot(g)&&(g=10),zot(h)&&(h=0),zot(i)&&(i=!0),zot(j)&&(j=!0),zot(k)&&(k=!1),zot(l)&&(l=e),zot(m)&&(m=.3),zot(n)&&(n=!0),k&&(n=!1),zot(o)&&(o=!0),zot(p)&&(p=.6),zot(q)&&(q="vertical"),zot(r)&&(r=!0),zot(s)&&(s="rgba(0,0,0,.3)"),zot(t)&&(t=20),zot(v)&&(v=g),zot(u)&&(u=g);var y=this;this.scrollX=this.scrollY=this.scrollXMax=this.scrollYMax=0,this.setBounds(0,0,b,c),this.setBounds(0,0,b,c);var z=this.backing=new createjs.Shape,A=z.graphics;A.f(d).rr(0,0,b,c,h),this.addChild(z),s!=-1&&t>0&&(z.shadow=new createjs.Shadow(s,8,8,t));var B=new createjs.Shape,C=B.graphics;this.addChild(B);var D=this.content=new a.Container;if(this.addChild(D),D.mask=B,!r){var E=new createjs.Shape;E.graphics.f("red").dr(0,0,b,c),D.hitArea=E}if(f>0){var F=new createjs.Shape;A=F.graphics,A.s(e).ss(f).rr(0,0,b,c,h),this.addChild(F)}var G=this.indicator={};if(G.size=6,G.spacing=3.5+f/2,G.margin=0,G.corner=G.size/2,G.showTime=500,G.fadeTime=3e3,j){var H=this.hIndicator=new a.Shape,I=H.graphics;H.alpha=m,this.addChild(H),k&&H.drag({localBounds:!0});var J=this.vIndicator=new a.Shape,K=J.graphics;J.alpha=m,this.addChild(J),k&&J.drag({localBounds:!0})}var L,M,N,O,P,Q,R;if(this.update=function(){j&&(I.clear(),K.clear()),P=j?G.size+2*G.spacing:0,Q=D.getBounds().width,R=D.getBounds().height,N=Q>b-u&&(i===!0||"auto"==i||"horizontal"==i),O=R>c-v&&(i===!0||"auto"==i||"vertical"==i),y.scrollXMax=Q+2*u-b+(O?P+G.margin:0),y.scrollYMax=R+2*v-c+(N?P+G.margin:0),C.clear(),C.f("rgba(0,0,0,.01)").rr(f/2,f/2,b-(O&&j?G.size+2*G.spacing:0)-(O?0:f),c-(N&&j?G.size+2*G.spacing:0)-(N?0:f),h);var d=Math.max(h,Math.min(G.corner,G.spacing)),e=d+f/2,g=d+(O?P:0)+f/2,m=d+f/2,n=d+(N?P:0)+f/2;if(N&&j&&(indicatorLength=Math.max(20,(b-e-g)*(b-e-g)/(Q+u+G.margin)),I.f(l).rr(0,0,indicatorLength,G.size,G.corner),H.x=e,H.y=c-G.size-G.spacing,L=new a.Proportion(-y.scrollXMax,0,e,b-indicatorLength-g,-1),k)){H.setBounds(0,0,indicatorLength,G.size);var o=new createjs.Rectangle(e,H.y,b-indicatorLength-e-g,0);H.dragRect(o),H.proportion=new a.Proportion(o.x,o.x+o.width,0,-y.scrollXMax),H.on("pressmove",function(){D.x=H.proportion.convert(H.x)})}if(O&&j&&(indicatorLength=Math.max(20,(c-m-n)*(c-m-n)/(R+v+G.margin)),K.f(l).rr(0,0,G.size,indicatorLength,G.corner),J.x=b-G.size-G.spacing,J.y=m,M=new a.Proportion(-y.scrollYMax,0,m,c-indicatorLength-n,-1),k)){J.setBounds(0,0,G.size,indicatorLength);var o=new createjs.Rectangle(J.x,m,0,c-indicatorLength-m-n);J.dragRect(o),J.proportion=new a.Proportion(o.y,o.y+o.height,0,-y.scrollYMax),J.on("pressmove",function(){D.y=J.proportion.convert(J.y)})}setTimeout(function(){S()},300)},this.add=function(a){return a.getBounds()?(D.addChild(a),0==a.x&&(a.x=u),0==a.y&&(a.y=v),void y.update()):void zog("SwipeBox.add() - please add content with bounds set")},this.remove=function(a){D.removeChild(a),y.update()},i&&D.on("mousedown",function(){j&&a.Ticker.add(T,D.stage),N&&j&&n&&a.animate(H,{alpha:m},G.showTime),O&&j&&n&&a.animate(J,{alpha:m},G.showTime)}),this.on("added",U,null,!0),o?D.on("slidestop",V):D.on("mousedown",function(){D.stage.on("stagemouseup",V,null,!0)}),r){var W,X;D.on("mousedown",function(){W=D.stage.mouseX,X=Date.now()}),D.on("click",function(){Date.now()-X<600&&Math.abs(D.stage.mouseX-W)<5&&(y.contentMouse=D.globalToLocal(D.stage.mouseX,D.stage.mouseY),y.dispatchEvent("select"))}),D.on("mouseover",Z),D.on("mouseout",$);var Y,_=0,aa=0,ba=0,ca=0,da=300,ea=2,fa=!1}Object.defineProperty(y,"scrollX",{get:function(){return D.x},set:function(a){D.x=a,T()}}),Object.defineProperty(y,"scrollY",{get:function(){return D.y},set:function(a){D.y=a,T()}}),this.clone=function(w){zot(w)&&(w=!0);var x=y.cloneProps(new a.Window(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v));return w&&(y.content.cloneChildren(x.content),x.update()),x},this.dispose=function(){return this.removeAllEventListeners(),D.removeAllEventListeners(),a.Ticker.remove(ga),a.Ticker.remove(T),a.noDrag(D),!0}},a.extend(a.Window,a.Container,"clone","zimContainer",!1),a.Waiter=function(b,c,d,e,f,g,h,i){var k,j="container, speed, color, circleColor, corner, shadowColor, shadowBlur, fadeTime";if(k=zob(a.Waiter,arguments,j,this))return k;if(z_d("59"),this.zimContainer_constructor(),zot(b)||!b.getBounds)return void zog("zim build - Waiter(): Please pass in a reference to a container with bounds set as first parameter");if(!b.getBounds())return void zog("zim build - Waiter(): Please give the container bounds using setBounds()");if(zot(b.getStage))return void zog("zim build - Waiter(): Please give the container that has a stage property");zot(c)&&(c=600),zot(d)&&(d="orange"),zot(e)&&(e="white"),zot(f)&&(f=16),zot(g)&&(g="rgba(0,0,0,.3)"),zot(h)&&(h=14),zot(i)&&(i=0);var l=40,m=3,n=.6*l/2,o=(l-2*n)/2,p=m*(2*n+o)+o;this.setBounds(-p/2,-l/2,p,l);var q=this,r=this.display=new createjs.Shape;this.addChild(r),r.setBounds(0,0,p,l),r.regX=p/2,r.regY=l/2;var s=r.graphics;s.f(d),s.rr(0,0,p,l,f),g!=-1&&h>0&&(r.shadow=new createjs.Shadow(g,3,3,h)),r.on("click",function(a){a.stopImmediatePropagation()});var t=new a.Container;this.addChild(t);for(var u,v=0;v<m;v++)u=new createjs.Shape,u.graphics.f(e).dc(0,0,n),u.x=(v-(m-1)/2)*(2*n+o),t.addChild(u),u.cache(-n,-n,2*n,2*n),u.alpha=0;this.hide=function(){function a(){b.removeChild(q),b.getStage().update()}i>0?q.animate({obj:{alpha:0},time:i,call:a}):a()},this.show=function(){for(var a,d=0,e=0;e<t.getNumChildren();e++)q.alpha=0,createjs.Tween.get(q,{override:!0}).to({alpha:1},300),setTimeout(function(){a=t.getChildAt(d),createjs.Tween.get(a,{loop:!0}).to({alpha:1},c/m/2).wait(c/m).to({alpha:0},c/m).wait(c-c/m-c/m/2),d++},e*c/m);return q.ticker=createjs.Ticker.on("tick",function(){b.getStage().update()}),q.x=b.getBounds().width/2,q.y=b.getBounds().height/2,b.addChild(q),i>0&&(q.alpha=0,q.animate({alpha:1},i)),q},this.clone=function(){return q.cloneProps(new a.Waiter(b,c,d,e,f,g,h,i))},this.dispose=function(){return q.ticker&&createjs.Ticker.off("tick",q.ticker),r.removeAllEventListeners(),q.removeChild(r),q.removeChild(t),r=null,t=null,!0}},a.extend(a.Waiter,a.Container,"clone","zimContainer",!1),a.Indicator=function(b,c,d,e,f,g,h,i,j,k,l,m,n,o){function D(b){b>=d&&(b=-1);for(var c,g=0;g<d;g++)c=j&&g<b?e:f,g==b&&(c=e),w.getChildAt(g).color=c;!a.OPTIMIZE&&s.getStage()&&s.getStage().update()}var q,p="width, height, num, color, offColor, borderColor, backingColor, type, fill, scale, lightScale, press, shadowColor, shadowBlur";if(q=zob(a.Indicator,arguments,p,this))return q;z_d("60"),this.zimContainer_constructor(),zot(b)&&(b=300),zot(c)&&(c=50),zot(d)&&(d=6),zot(e)&&(e="#f58e25"),zot(f)&&(f="#666"),f<0&&(f="rgba(0,0,0,.01)"),g<0&&(g=null),zot(h)&&(h=-1),zot(i)&&(i="dot"),zot(j)&&(j=!1),zot(k)&&(k=1),zot(l)&&(l=1),zot(m)&&(m=!1),zot(n)&&(n="rgba(0,0,0,.3)"),zot(o)&&(o=5);var r="mousedown"==a.ACTIONEVENT?"mousedown":"click",s=this;this.lights=[];var t;new a.Container;if(h!=-1){var v=new a.Rectangle(b,c,h);this.addChild(v),this.backing=v}var w=this.lightsContainer=new a.Container;this.addChild(w);var x,y=.5*c,z=b/(d+1),A=new createjs.Shape;"square"==i||"box"==i?A.graphics.f("black").dr(-z/2/l+y/2,-c/2+y/2,z/l,c):A.graphics.f("black").dr(-z/2/l,-c/2,z/l,c);for(var B=0;B<d;B++)"square"==i||"box"==i?(x=new a.Rectangle(y,y,f,g),x.regX=x.width/2,x.regY=x.height/2):x=new a.Circle(y/2,f,g),this.lights.push(x),x.znum=B,x.scaleX=x.scaleY=l,x.hitArea=A,x.x=z+z*B,x.y=c/2,w.addChild(x);if(w.setBounds(0,0,b,c),w.regX=w.x=b/2,w.regY=w.y=c/2,this.addChild(w),n!=-1&&o>0&&(w.shadow=new createjs.Shadow(n,2,2,o)),m){w.cursor="pointer";w.on(r,function(a){t!=a.target.znum&&(t=a.target.znum,D(t),s.dispatchEvent("change"))})}w.scaleX=w.scaleY=k,Object.defineProperty(this,"selectedIndex",{get:function(){return t},set:function(a){t=Math.floor(a),D(t)}}),Object.defineProperty(this,"num",{get:function(){return d},set:function(a){zon&&zog("num is read only")}}),this.clone=function(){return s.cloneProps(new a.Indicator(b,c,d,e,f,g,h,i,j,k,l,m,n,o))},this.dispose=function(){return s.removeAllEventListeners(),!0}},a.extend(a.Indicator,a.Container,"clone","zimContainer",!1),a.Stepper=function(c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B){function Q(a){var b=String(a).split(".")[1];return b=b?b.length:0}function fa(b,c,d){if(o){da=E.getStage().mouseX,holdY=E.getStage().mouseY,0==da&&(da=1),0==holdY&&(holdY=1),r||(s=1),ea=new a.Proportion(0,t,q,q*s);var e=q;Y=setTimeout(function(){function a(){Z=setTimeout(function(){var f=b;if(r){var g=Math.abs(S-da),i=Math.abs(T-holdY);h?(c||d||(g=0),d&&(i=0)):(c||d||(i=0),d&&(g=0)),(g>=10||i>=10)&&(g>i?(I=h?y:x,f=S-da>0?1:-1,e=ea.convert(Math.abs(da-S))):(I=h?x:y,f=T-holdY>0?-1:1,e=ea.convert(Math.abs(holdY-T))))}la(f),a()},e)}X=!0,a()},p)}}function ga(){X=!1,clearTimeout(Y),clearTimeout(Z)}function la(b){var e;if("number"==u){var f=J;J+=I*b*K,J=a.decimals(J,M),m?J>w?J=v:J<v&&(J=w):(J>w?(J=1==x?w:f,n&&($.cursor="default")):n&&($.cursor="pointer"),J<v&&(J=1==x?v:f))}else{if(e=F+b,m)e>c.length-1&&(e=0),e<0&&(e=c.length-1);else{if(e>c.length-1)return void(n&&($.cursor="default"));if(n&&($.cursor="pointer"),e<0)return}F=e}ma("number"==u?J:c[F],"number"==u?J:F),E.dispatchEvent("change")}function ma(b,d){F=d,n&&("number"==u&&0!=b&&M>0&&(b=a.decimals(b,M,!0)),g.text=b,g.x=$.x+$.getBounds().width/2,g.y=$.y+($.getBounds().height-g.getBounds().height)/2),V.alpha=1,W.color=e,V.cursor="pointer",_.alpha=1,aa.color=e,_.cursor="pointer",m||("number"==u?(F==v&&(K>0?na():oa()),F==w&&(K>0?oa():na())):(0==F&&na(),F==c.length-1&&oa())),!a.OPTIMIZE&&_.getStage()&&_.getStage().update()}function na(){V.alpha=.8,W.color="#aaa",V.cursor="default"}function oa(){_.alpha=.8,aa.color="#aaa",_.cursor="default"}var D,C="list, width, color, borderColor, label, vertical, arrows, corner, shadowColor, shadowBlur, loop, display, hold, holdDelay, holdSpeed, drag, dragSensitivity, dragRange, type, min, max, step, step2, arrows2, arrows2Scale, keyEnabled";if(D=zob(a.Stepper,arguments,C,this))return D;z_d("61"),this.zimContainer_constructor(),zot(c)&&(c=[0,1,2,3,4,5,6,7,8,9]),zot(d)&&(d=200),zot(e)&&(e="white"),zot(f)&&(f=null),zot(g)&&(g=""),"string"!=typeof g&&"number"!=typeof g||(g=new a.Label(g,64,"arial","#555",null,null,null,"center")),zot(h)&&(h=!1),zot(i)&&(i=!0),zot(j)&&(j=16),zot(k)&&(k="rgba(0,0,0,.3)"),zot(l)&&(l=14),zot(m)&&(m=!1),zot(n)&&(n=!0),zot(o)&&(o=!0),zot(p)&&(p=400),zot(q)&&(q=200),zot(r)&&(r=!0),(zot(s)||s<=0)&&(s=.1),zot(t)&&(t=200),zot(u)&&(u="list"),zot(v)&&(v=0),zot(w)&&(w=100),zot(x)&&(x=1),zot(y)&&(y=x),zot(z)&&y!=x&&"number"==u&&(z=!0),zot(A)&&(A=.5),zot(B)&&(B=!0);var F,J,M,E=this,G=100,H=G/4,I=x,K=1;if("number"==u){if(v=Number(v),w=Number(w),NaN==v&&(v=0),NaN==w&&(w=100),w<v){K=-1;var N=w;w=v,v=N,J=w}else J=v;0>v&&0<w&&(J=0),x=Math.abs(x),M=Math.max(Q(x),Q(y))}else if("letter"==u){c="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),"string"!=typeof v&&(v="A"),"string"!=typeof w&&(w="Z"),v=v.substr(0,1).toUpperCase(),w=w.substr(0,1).toUpperCase();var O=c.indexOf(v);O<0&&(v="A",O=0);var P=c.indexOf(w);P<0&&(w="Z",P=c.length),P<O&&(c.reverse(),O=c.length-1-O,P=c.length-1-P),c=c.splice(O,P-O+1)}else u="list";var R,S=0,T=0;r&&this.on("mousedown",function(){this.getStage().mouseMoveOutside=!0,R=this.getStage().on("stagemousemove",function(a){S=a.rawX,T=a.rawY})},null,!0),this.label=g,g.mouseChildren=!1,g.mouseEnabled=!1;var U=new createjs.Shape;U.graphics.f("rgba(255,255,255,.11)").r(0,0,1.5*G,1.5*G),U.regX=1.5*G/2,U.regY=1.5*G/2+H/2;var V=this.prev=new a.Container;this.addChild(V),V.hitArea=U;var W=this.arrowPrev=new a.Triangle(G,.8*G,.8*G,e);k!=-1&&l>0&&(V.shadow=new createjs.Shadow(k,3,3,l)),V.addChild(W),V.cursor="pointer";var Y,Z,X=!1;if(V.on("mousedown",function(a){I=x,la(-1),fa(-1)}),o&&V.on("pressup",ga),h?(V.rotation=180,V.x=d/2,n?V.y=V.height+H+G+V.height/2+H:V.y=2*V.height):(V.rotation=-90,V.x=V.height/2,V.y=V.width/2),n){var $=this.textBox=new createjs.Shape;$.cursor="pointer",this.addChild($),$.setBounds(0,0,d,G),null!=f&&$.graphics.s(f).ss(1.5),$.graphics.f(e).rr(0,0,d,G,j),k!=-1&&l>0&&($.shadow=new createjs.Shadow(k,3,3,l)),h?$.y=W.height+H:$.x=W.height+H,this.addChild(g),c.length>0&&(F=0,g.text=c[F]),g.x=50+$.x+$.getBounds().width/2,g.y=$.y+($.getBounds().height-g.getBounds().height)/2}else c.length>0&&(F=0);var _=this.next=new a.Container;this.addChild(_),_.hitArea=U.clone();var aa=this.arrowNext=new a.Triangle(G,.8*G,.8*G,e);k!=-1&&l>0&&(_.shadow=new createjs.Shadow(k,3,3,l)),_.addChild(aa),_.cursor="pointer",_.on("mousedown",function(a){I=x,la(1),fa(1)});var ba,ca=!1;n&&$.on("mousedown",function(a){fa(1,!0),"number"==u&&(clearTimeout(ba),ca=!0,ba=setTimeout(function(){ca=!1},200))}),$.on("pressup",function(){ca&&(J=Math.round(J),ma(J,J),E.dispatchEvent("change"))}),o&&(_.on("pressup",ga),n&&$.on("pressup",ga),clearTimeout(ba)),h?(_.rotation=0,_.x=d/2,_.y=_.getBounds().height/2):(_.rotation=90,n?_.x=$.x+$.getBounds().width+_.getBounds().height/2+H:_.x=V.x+V.getBounds().width,_.y=_.getBounds().width/2);var da,ea;if(z){var ha=this.prev2=new a.Container;ha.hitArea=U.clone();var ia=this.arrowPrev2=new a.Triangle(G,.8*G,.8*G,"rgba(0,0,0,.2)",e,2);ha.addChild(ia),ha.cursor="pointer",ha.scale(A),ha.alpha=.5,ha.on("mousedown",function(a){I=y,la(-1),fa(-1,null,!0)}),o&&ha.on("pressup",ga);var ja=this.next2=new a.Container;ja.hitArea=U.clone();var ka=this.arrowNext2=new a.Triangle(G,.8*G,.8*G,"rgba(0,0,0,.2)",e,2);ja.addChild(ka),ja.cursor="pointer",ja.scale(A),ja.alpha=.5,ja.on("mousedown",function(a){I=y,la(1),fa(1,null,!0)}),o&&ja.on("pressup",ga),h?(ha.y=this.height/2,ha.x=-ha.width/2-H*Math.max(.2,Math.min(1,A)),ha.rotation=270,ja.y=this.height/2,ja.x=this.width+ja.width/2+H*Math.max(.2,Math.min(1,A)),ja.rotation=90):(ja.x=this.width/2,ja.y=-ja.height/2-H*Math.max(.2,Math.min(1,A)),ja.rotation=0,ha.x=this.width/2,ha.y=this.height+ha.height/2+H*Math.max(.2,Math.min(1,A)),ha.rotation=180),this.addChild(ha,ja)}ma("number"==u?J:c[F],"number"==u?J:F),zot(a.focus)&&(a.focus=this),Object.defineProperty(this,"currentIndex",{get:function(){return"number"==u?void 0:F},set:function(a){zot(a)||(a=Math.min(c.length-1,Math.max(0,a)),F=a,ma(c[F],F))}}),Object.defineProperty(this,"currentValue",{get:function(){return"number"==u?J:c[F]},set:function(a){if(!zot(a))if("number"==u){if(w>v){if(a>w||a<v)return}else if(a<w||a>v)return;J=a,ma(J,J)}else{if(c.indexOf(a)>-1&&(a=c.indexOf(a)),a==E.currentIndex)return;F=a,ma(c[F],F)}}}),Object.defineProperty(this,"loop",{get:function(){return m},set:function(a){m=a,"number"==u?ma(J,J):ma(c[E.currentIndex],E.currentIndex)}}),Object.defineProperty(this,"stepperArray",{get:function(){return c},set:function(a){c=a,E.currentIndex=E.currentIndex}}),Object.defineProperty(this,"focus",{get:function(){return a.focus==E},set:function(b){b?a.focus=E:a.focus==E&&(a.focus=null)}}),this._enabled=!0,Object.defineProperty(E,"enabled",{get:function(){return E._enabled},set:function(d){b(E,d),d?("number"==u?ma(J,J):ma(c[E.currentIndex],E.currentIndex),window.addEventListener("keydown",E.keyDownEvent)):(na(),oa(),window.removeEventListener("keydown",E.keyDownEvent),n&&(g.mouseChildren=!1),n&&(g.mouseEnabled=!1)),!a.OPTIMIZE&&_.getStage()&&_.getStage().update()}});var pa=!1,qa=!1,ra=!1;this.on("mousedown",function(){a.focus=E,pa=!0,qa=!1,ra=!1}),this.keyDownEvent=function(b){if(a.focus==E){b||(b=event);var c=b.keyCode;if(i&&c>=37&&c<=40&&(38==c||39==c?(I=h&&38==c||!h&&39==c?x:y,la(1)):37!=c&&40!=c||(I=h&&40==c||!h&&37==c?x:y,la(-1))),B&&"number"==u){var d;!b.shiftKey&&c>=48&&c<=57?d=c-48:c>=96&&c<=105?d=c-96:190==c?qa=!0:173==c||189==c?(E.currentValue=E.currentValue*-1,E.dispatchEvent("change"),ra=!ra):46==c&&(pa=!0,qa=!1),pa&&!zot(d)?(qa&&(d/=10),ra&&(d*=-1),E.currentValue=d,pa=!1,E.dispatchEvent("change")):zot(d)||(qa&&(d=String(d/10).substr(1)),E.currentValue=Number(Math.floor(Number(g.text))+String(d)),E.dispatchEvent("change"))}}},window.addEventListener("keydown",this.keyDownEvent),this.next=function(){la(1)},this.prev=function(){la(-1)},this.clone=function(){return E.cloneProps(new a.Stepper(c,d,e,f,g.clone(),h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B))},this.dispose=function(){return E.removeAllEventListeners(),window.removeEventListener("keydown",E.keyDownEvent),stage.off(R),!0}},a.extend(a.Stepper,a.Container,"clone","zimContainer",!1),a.Slider=function(c,d,e,f,g,h,i,j,k,l){function F(a){return 0==e?a:Math.round(a/e)*e}function I(b){var e=s.globalToLocal(b.stageX,b.stageY),g=J(e.x-G,e.y-H,w);j?(f.x=g.x,t=F((g.y-w.y)/w.height*(d-c)),f.y=w.y+t*w.height/(d-c),t+=c,f.y!=u&&s.dispatchEvent("change"),u=f.y):(t=F((g.x-w.x)/w.width*(d-c)),f.x=w.x+t*w.width/(d-c),t+=c,f.y=g.y,f.x!=u&&s.dispatchEvent("change"),u=f.x),!a.OPTIMIZE&&s.getStage()&&s.getStage().update()}function J(a,b,c){return a=Math.max(c.x,Math.min(c.x+c.width,a)),b=Math.max(c.y,Math.min(c.y+c.height,b)),{x:a,y:b}}var n,m="min, max, step, button, barLength, barWidth, barColor, vertical, useTicks, inside";if(n=zob(a.Slider,arguments,m,this))return n;if(z_d("62"),this.zimContainer_constructor(),zot(c)&&(c=0),zot(d)&&(d=10),d-c==0)return void zog("ZIM Slider range must not be 0");if(zot(e)&&(e=0),zot(g)&&(g=300),zot(h)&&(h=3),zot(i)&&(i="#666"),zot(j)&&(j=!1),zot(k)&&(k=!1),zot(l)&&(l=!1),zot(f)){var o=30,p=40;j&&(o=50,p=40),f=new a.Button(o,p,"","#fff","#ddd","#666",1,0,null,null,30)}f.rollPersist=!0;var q,r;j?(q=f.width,l?(r=g,this.setBounds(0,0,q,r)):(r=g+f.height,this.setBounds(-f.width/2,-f.height/2,q,r))):(r=f.height,l?(q=g,this.setBounds(0,0,q,r)):(q=g+f.width,this.setBounds(-f.width/2,-f.height/2,q,r)));var s=this,t=c,u=0;this.button=f,this.cursor="pointer";var v,w,x,y,z;if(k&&0!=e){y=this.ticks=new createjs.Shape,this.addChild(y),z=y.graphics,z.ss(1).s(i);var A=Math.round((d-c)/e),B=(d-c)/A;if(B!=e&&zon&&zog("zim.Slider() : non-divisible step ("+e+") adjusted"),e=B,l)var C=(g-(j?f.height:f.width))/A;else var C=g/A}if(j){var D=l?f.height/2:0;if(k&&0!=e){for(var E=0;E<=A;E++)z.mt(0,D+C*E).lt(20,D+C*E);y.x=10}v=this.bar=new a.Rectangle(h,g,i),this.addChild(v),a.centerReg(f),this.addChild(f),x=v.getBounds(),w=new createjs.Rectangle(x.width/2,x.y+D,0,x.height-2*D)}else{var D=l?f.width/2:0;if(k&&0!=e){for(var E=0;E<=A;E++)z.mt(D+C*E,0).lt(D+C*E,-20);y.y=-10}v=this.bar=new a.Rectangle(g,h,i),this.addChild(v),a.centerReg(f),this.addChild(f),x=v.getBounds(),w=new createjs.Rectangle(x.x+D,x.height/2,x.width-2*D,0)}f.x=w.x,f.y=w.y;var G,H;f.on("mousedown",function(a){var b=s.globalToLocal(a.stageX,a.stageY);G=b.x-f.x,H=b.y-f.y,s.getStage()&&(s.getStage().mouseMoveOutside=!0)}),f.on("pressmove",function(a){I(a)}),v.on("mousedown",function(a){G=f.width/2,H=f.height/2,I(a)}),Object.defineProperty(this,"currentValue",{get:function(){return t},set:function(b){zot(b)||(c<d?(b<c&&(b=c),b>d&&(b=d)):(b>c&&(b=c),b<d&&(b=d)),t=b=F(b),j?(f.y=(b-c)/(d-c)*w.height+D,u=f.y):(f.x=(b-c)/(d-c)*w.width+D,u=f.x),!a.OPTIMIZE&&s.getStage()&&s.getStage().update())}}),Object.defineProperty(this,"min",{get:function(){return c},set:function(a){zon&&zog("min is read only")}}),Object.defineProperty(this,"max",{get:function(){return d},set:function(a){zon&&zog("max is read only")}}),Object.defineProperty(this,"step",{get:function(){return e},set:function(a){zon&&zog("step is read only")}}),this._enabled=!0,Object.defineProperty(s,"enabled",{get:function(){return s._enabled},set:function(a){b(s,a)}}),this.clone=function(){return s.cloneProps(new a.Slider(c,d,e,f.clone(),g,h,i,j,k,l))},this.dispose=function(){return f.removeAllEventListeners(),!0}},a.extend(a.Slider,a.Container,"clone","zimContainer",!1),a.Dial=function(c,d,e,f,g,h,i,j,k,l,m,n,o,p){function G(a){return 0==e?a:Math.round(a/e)*e}function N(b){var f;b<0&&(b+=360),b%=360,0!=e?(b=Math.min(b,360-360/(B+1)),f=G(b/(360-360/(B+1))*(d-c)),E.rotation=f*(360-360/(B+1))/(d-c)):(E.rotation=b,f=b/360*(d-c)),f!=v&&(v=f,u=f+c,s.dispatchEvent("change"),!a.OPTIMIZE&&s.getStage()&&s.getStage().update())}var r,q="min, max, step, width, color, indicatorColor, indicatorScale, type, innerCircle, innerScale, useTicks, innerTicks, tickColor, limit";if(r=zob(a.Dial,arguments,q,this))return r;if(z_d("63"),this.zimContainer_constructor(),zot(c)&&(c=0),zot(d)&&(d=10),d-c==0)return void zog("ZIM Dial range must not be 0");zot(e)&&(e=1),zot(f)&&(f=100),zot(g)&&(g="#666"),zot(h)&&(h="#222"),zot(i)&&(i=1),zot(j)&&(j="arrow"),zot(k)&&(k=!0),zot(l)&&(l=.5),zot(m)&&(m=!0),zot(n)&&(n=!1),zot(o)&&(o=h),zot(p)&&(p=!0);var s=this;this.cursor="pointer";var t=f/2,u=c,v=0,w=this.backing=new a.Circle(t,g);if(this.addChild(w),k){var x=n?"rgba(0,0,0,.2)":"rgba(0,0,0,.1)";"black"!=g&&"#000"!=g&&"#000000"!=g&&"#111"!=g&&"#111111"!=g||(x="#222");var y=this.inner=new a.Circle(t*l,x);if(this.addChild(y),!n){var z="rgba(0,0,0,.1)",A=this.inner2=new a.Circle(t*(l-.1),z);this.addChild(A)}}var B=(d-c)/e;if(m&&0!=e){ticks=this.ticks=new a.Container,this.addChild(ticks);for(var C,D=0;D<B+1;D++){var C=new a.Rectangle(1,.2*t,o);C.regY=t*(n?l-.05:1.28),C.regX=.5,C.rotation=360/(B+1)*D,ticks.addChild(C)}}if(this.setBounds(-t,-t,f,f),"dot"==j||"circle"==j){var E=this.indicator=new a.Container,F=this.indicatorShape=new a.Circle(.19*t,h);E.addChild(F),a.scale(E,i),E.regY=t-E.getBounds().width*i/2-.07*t}else if("line"==j||"rectangle"==j){var E=this.indicator=new a.Container,F=this.indicatorShape=new a.Rectangle(.1*t,.3*t,h);E.addChild(F),a.scale(E,i),E.regY=t-E.getBounds().width*i/2-.07*t,E.regX=.05*t}else{var E=this.indicator=new a.Container,F=this.indicatorShape=new a.Triangle(.4*t,.4*t,.4*t,h);E.addChild(F),a.scale(E,i),E.regY=t-E.getBounds().height*i*(n?.85:.75),n&&(F.rotation=180)}E.regY/=i,this.addChild(E);var H,I,J,K,L=0;this.on("mousedown",function(){H=E.rotation;var a=s.parent.globalToLocal(s.getStage().mouseX,s.getStage().mouseY),b=a.x-s.x,c=s.y-a.y;I=180*Math.atan2(b,c)/Math.PI;var d=(new Date).getTime();J=s.on("pressmove",function(){a=s.parent.globalToLocal(s.getStage().mouseX,s.getStage().mouseY),b=a.x-s.x,c=s.y-a.y;var d=H+180*Math.atan2(b,c)/Math.PI-I;p&&(d<0&&(d+=360),d%=360,Math.abs(d-L)>180)||(L=d,N(d))}),K=this.on("pressup",function(){var e=(new Date).getTime()-d;if(e<200){a=s.parent.globalToLocal(s.getStage().mouseX,s.getStage().mouseY),b=a.x-s.x,c=s.y-a.y;var f=180*Math.atan2(b,c)/Math.PI;N(f)}H=E.rotation,s.off("pressmove",J),s.off("pressup",K)})}),Object.defineProperty(this,"currentValue",{get:function(){return u},set:function(b){zot(b)||(c<d?(b<c&&(b=c),b>d&&(b=d)):(b>c&&(b=c),b<d&&(b=d)),u=b,b=G(b),0!=e?E.rotation=(b-c)*(360-360/(B+1))/(d-c):E.rotation=360*(b-c)/(d-c),v=b-c,L=E.rotation,!a.OPTIMIZE&&s.getStage()&&s.getStage().update())}}),Object.defineProperty(this,"min",{get:function(){return c},set:function(a){zon&&zog("min is read only")}}),Object.defineProperty(this,"max",{get:function(){return d},set:function(a){zon&&zog("max is read only")}}),Object.defineProperty(this,"step",{get:function(){return e},set:function(a){zon&&zog("step is read only")}}),this._enabled=!0,Object.defineProperty(s,"enabled",{get:function(){return s._enabled},set:function(a){b(s,a)}}),this.clone=function(){return s.cloneProps(new a.Dial(c,d,e,f,g,h,i,j,k,l,m,n,o,p))},this.dispose=function(){return s.removeAllEventListeners(),!0}},a.extend(a.Dial,a.Container,"clone","zimContainer",!1),a.Tabs=function(c,d,e,f,g,h,i,j,k,l,m,n,o,p){function G(a){var b=e[t];b&&(v[t].color=zot(b.offColor)?h:b.offColor,j||(v[t].enabled=!0)),t=a,b=e[t],b&&(v[t].color=zot(b.color)?f:b.color,j||(v[t].enabled=!1))}var r,q="width, height, tabs, color, rollColor, offColor, spacing, currentEnabled, corner, labelColor, flatBottom, keyEnabled, gradient, gloss";if(r=zob(a.Tabs,arguments,q,this))return r;z_d("65"),this.zimContainer_constructor(),zot(c)&&(c=240),zot(d)&&(d=60),(zot(e)||e.length<=0)&&(e=[{label:1},{label:2},{label:3},{label:4}]),zot(f)&&(f="#333"),zot(g)&&(g="#555"),zot(h)&&(h="#777"),zot(j)&&(j=!1),zot(i)&&(i=1),zot(k)&&(k=0),zot(l)&&(l="white"),
zot(m)&&(m=!0),zot(n)&&(n=!0);var s=this;this.keyEnabled=n;var w,x,t=0,u=[],v=[],y=e.length,z=(c-i*(y-1))/y;if("number"==typeof e[0]||"string"==typeof e[0])for(var A=0;A<e.length;A++)e[A]={label:String(null!=e[A])?e[A]:"1"};for(var x,C,B=0,D=0,A=0;A<e.length;A++)x=e[A],zot(x.width)&&D++,B+=zot(x.width)?z:x.width;if(B>c-i*(y-1))for(A=0;A<e.length;A++)x=e[A],x.width=(c-i*(y-1))/B*(zot(x.width)?z:x.width);else if(Math.round(B)<Math.round(c-i*(y-1)))if(D>0)for(C=(B-D*z)/D,A=0;A<e.length;A++)x=e[A],x.width=zot(x.width)?C:x.width;else zon&&zog("ZIM Tabs - total less than width"),this.width=B+i*(y-1);var F,E=0;for(A=0;A<e.length;A++)x=e[A],zot(x.label)&&(x.label=" "),F=0==A?zot(x.color)?f:x.color:zot(x.offColor)?h:x.offColor,"string"!=typeof x.label&&"number"!=typeof x.label||(x.label=new a.Label(x.label,d/2,"arial",l)),w=new a.Button(zot(x.width)?z:x.width,d,x.label,F,zot(x.rollColor)?g:x.rollColor,null,null,k,-1,null,null,o,p,m),w.znum=A,x.label.znum=A,u.push(x.label),v.push(w),this.addChild(w),w.x=E,E=w.x+w.width+i,0!=A||j||(w.enabled=!1);this.on("mousedown"==a.ACTIONEVENT?"mousedown":"click",function(b){G(b.target.znum),s.dispatchEvent("change"),!a.OPTIMIZE&&s.getStage()&&s.getStage().update()}),window.addEventListener("keydown",function(b){if(s.keyEnabled&&9==b.keyCode){var c=t;G(b.shiftKey?--c<0?e.length-1:c:++c>e.length-1?0:c),s.dispatchEvent("change"),!a.OPTIMIZE&&s.getStage()&&s.getStage().update(),b.preventDefault()}}),Object.defineProperty(this,"selected",{get:function(){return v[t]},set:function(a){zon&&zog("selected is read only - try selectedIndex")}}),Object.defineProperty(this,"selectedIndex",{get:function(){return t},set:function(b){G(b),!a.OPTIMIZE&&s.getStage()&&s.getStage().update()}}),Object.defineProperty(this,"tabs",{get:function(){return t},set:function(b){G(Math.min(Math.max(b,0),e.length-1)),!a.OPTIMIZE&&s.getStage()&&s.getStage().update()}}),Object.defineProperty(this,"color",{get:function(){return f},set:function(b){f=b,zot(e[t].color)&&(v[t].color=f,!a.OPTIMIZE&&s.getStage()&&s.getStage().update())}}),Object.defineProperty(this,"rollColor",{get:function(){return g},set:function(a){g=a;for(var b=0;b<e.length;b++)zot(e[t].rollColor)&&(v[b].rollColor=g)}}),Object.defineProperty(this,"offColor",{get:function(){return h},set:function(b){h=b;for(var c=0;c<e.length;c++)zot(e[t].offColor)&&(v[c].color=h);!a.OPTIMIZE&&s.getStage()&&s.getStage().update()}}),Object.defineProperty(this,"label",{get:function(){return u[t]},set:function(a){zon&&zog("selected is read only - try selectedIndex")}}),Object.defineProperty(this,"text",{get:function(){return null!=u[t]?u[t].text:void 0},set:function(a){zon&&zog("selected is read only - try selectedIndex")}}),Object.defineProperty(this,"buttons",{get:function(){return v},set:function(a){zon&&zog("buttons is read only")}}),Object.defineProperty(this,"labels",{get:function(){return u},set:function(a){zon&&zog("labels is read only")}}),this._enabled=!0,Object.defineProperty(s,"enabled",{get:function(){return s._enabled},set:function(a){b(s,a)}}),this.clone=function(){for(var b=a.copy(e),q=0;q<b.length;q++)b[q].label=b[q].label.clone();return s.cloneProps(new a.Tabs(c,d,b,f,g,h,i,j,k,l,m,n,o,p))},this.dispose=function(){for(var a=0;a<s.buttons.length;a++)s.buttons[a].dispose(),s.labels[a].dispose();return s.removeAllEventListeners(),!0}},a.extend(a.Tabs,a.Container,"clone","zimContainer",!1),a.Pad=function(c,d,e,f,g,h,i,j,k,l,m){function y(b){var c=b.target;p.selected=c.selected,p.text=c.text,p.label=c.label;for(var e=c.selectedIndex,f=0;f<s.length;f++)s[f].selectedIndex=-1;c.selectedIndex=e,q=c.znum*d+e,p.dispatchEvent("change"),!a.OPTIMIZE&&p.getStage()&&p.getStage().update()}var o,n="width, cols, rows, keys, color, rollColor, offColor, spacing, currentEnabled, corner, labelColor";if(o=zob(a.Pad,arguments,n,this))return o;z_d("66"),this.zimContainer_constructor(),zot(c)&&(c=150),zot(d)&&(d=3),zot(e)&&(e=d),zot(f)&&(f=[1,2,3,4,5,6,7,8,9]),zot(k)&&(k=!0),zot(j)&&(j=1);var q,p=this;this.cols=d,this.rows=e;var u,r=c/d-j,s=[],t=0;this.labels=[],this.buttons=[];for(var v=0;v<e;v++){for(var w=[],x=0;x<d;x++)w.push(null!=f[t]?f[t]:""),t++;u=s[v]=new a.Tabs(c,r,w,g,h,i,j,k,l,m,!1,!1),this.labels=this.labels.concat(u.labels),this.buttons=this.buttons.concat(u.buttons),this.addChild(u),u.selectedIndex=-1,u.y=(r+j)*v,u.znum=v,u.on("change",y)}this.tabs=s,Object.defineProperty(this,"selectedIndex",{get:function(){return q},set:function(a){q=a;for(var b=0;b<s.length;b++)s[b].selectedIndex=-1;var c=Math.floor(q/d);c>=0&&c<p.tabs.length&&(p.tabs[c].selectedIndex=q%d)}}),this._enabled=!0,Object.defineProperty(p,"enabled",{get:function(){return p._enabled},set:function(a){b(p,a)}}),this.clone=function(){return p.cloneProps(new a.Pad(c,d,e,f,g,h,i,j,k,l,m))},this.dispose=function(){for(var a=0;a<p.tabs.length;a++)p.tabs[a].dispose();return p.removeAllEventListeners(),!0}},a.extend(a.Pad,a.Container,"clone","zimContainer",!1),a.ColorPicker=function(b,c,d,e,f,g,h,i,j,k,l,m,n,o){function O(a){return a=Math.floor(a).toString(16),a+""+a}function X(a){"#000"==M||"#000000"==M||"black"==M?(n.color="#222",n.alpha=1):(n.color="black",n.alpha=.5),n.x=w.x+a%d*(z+e)+z/2,n.y=w.x+Math.floor(a/d)*(z+e)+z/2}function la(){if(M!=N||v!=u){if(x&&f){t=s,s=N;var b=[t,s];for(E=0;E<2;E++){var c=w.graphics;H=Math.floor(E/d),I=E%d,R=I*(z+e),S=H*(z+e)+U,A[E]=b[E],c.f(ka.color).r(R-1,S-1,z+2,z+2).f(b[E]).r(R,S,z,z)}!a.OPTIMIZE&&r.getStage()&&r.getStage().update()}N=M,u=v,r.dispatchEvent("change")}else r.dispatchEvent("close")}function sa(a){return Math.round(a*Math.pow(10,2))/Math.pow(10,2)}var q,p="width, colors, cols, spacing, greyPicker, alphaPicker, startColor, drag, shadowColor, shadowBlur, buttonBar, circles, indicator, backingColor";if(q=zob(a.ColorPicker,arguments,p,this))return q;z_d("67"),this.zimContainer_constructor(),zot(b)&&(b=500),zot(c)&&(x=!0),zot(d)&&(d=10),zot(e)&&(e=2),zot(g)&&(g=!0),zot(f)&&(f=!0),zot(i)&&(i=!0),zot(j)&&(j="rgba(0,0,0,.3)"),zot(k)&&(k=14),zot(l)&&(l=!0),zot(m)&&(m=!1),zot(n)&&(n=!1,l||(n=!0)),zot(o)&&(o="black");var r=this,s="#e472c4",t="#50c4b7",u=1,v=1,w=new createjs.Shape;this.addChild(w),w.x+=e,w.y+=e;var y,z,x=!1,A=[];if(zot(c)){x=!0;var B=6,C=B*B*B;B=Math.ceil(Math.pow(C,.5)),z=(b-e)/18-e;var D=Math.floor(Math.pow(B*B,1/3));y=[];for(var E=0;E<6;E++)for(var F=0;F<6;F++)for(var G=0;G<6;G++)y.push("#"+O(3*E)+O(3*F)+O(3*G));c=[];var H,I,J,K;for(E=0;E<y.length;E++)H=Math.floor(E/6),I=E%6,D=H>=18?1:0,J=H-6*D*3,K=I+6*D,c[18*K+J]=y[E];d=18,A=[t,s]}else z=(b-e)/d-e;var L=Math.ceil(c.length/d),M=String(c[c.length-1]);zot(h)||(M=String(h));var I,H,R,S,N=t,P=w.graphics,D=0;for(E=0;E<c.length;E++)H=E%d,I=Math.floor(E/d),R=H*(z+e),S=I*(z+e),m?P.f(c[E]).dc(R+z/2,S+z/2,z/2):P.f(c[E]).r(R,S,z,z);var T=S+z+e,U=T;if(f){for(E=0;E<16;E++)A.push("#"+O(E)+O(E)+O(E));for(E=0;E<A.length;E++)H=Math.floor(E/d),I=E%d,R=I*(z+e),S=H*(z+e)+T,m?P.f(A[E]).dc(R+z/2,S+z/2,z/2):P.f(A[E]).r(R,S,z,z);T=S+z+e;var V=d,W=Math.ceil(A.length/d)}n&&(n=this.indicator=m?new a.Circle(z/2*.5):new a.Rectangle(.5*z,.5*z),n.alpha=.5,n.centerReg(),this.addChild(n),X(c.indexOf(M)));var Y=10;if(g){var Z=new a.Container;Z.setBounds(0,0,600,70),this.addChild(Z),Z.x=0,Z.y=T;var $=this.alphaBacking=new a.Rectangle(600-2*Y,50,"#222",null,null,0);Z.addChild($),a.centerReg($,Z);var _=this.alphaBut=new a.Button({width:20,height:30,label:"",corner:0,hitPadding:20}),aa=this.alphaSlider=new a.Slider(0,1,.05,_,330);aa.currentValue=1,Z.addChild(aa),aa.x=40,aa.y=Z.height/2;var ba=this.alphaText=new a.Label("Alpha: 1",30,null,"orange");Z.addChild(ba),ba.x=aa.x+aa.bar.width+40,ba.y=Z.height/2-ba.height/2,Z.scaleX=Z.scaleY=b/600,aa.on("change",function(){ba.text="Alpha: "+sa(aa.currentValue),ia&&(ia.alpha=v=aa.currentValue),r.getStage()&&r.getStage().update()}),T+=Z.height-Y}if(l){var ca=new a.Container;ca.setBounds(0,0,600,100),this.addChild(ca),ca.x=0,ca.y=T+Y;var da=this.swatchText=new a.Label(M.toUpperCase().substr(0,7),30,null,"orange");if(ca.addChild(da),a.centerReg(da),da.x=90,da.y=48,i){var ea=this.grip=new createjs.Shape;ca.addChild(ea),ea.graphics.f("rgba(256,256,256,.25)").r(0,0,5,20).r(10,0,5,20).r(20,0,5,20).r(30,0,5,20),ea.x=70,ea.y=65,da.y=40}var fa=this.closeBut=new a.Button(90,90,"X","#222","#444",null,null,0);ca.addChild(fa),fa.x=600-fa.width-Y,fa.y=0,fa.on("mousedown"==a.ACTIONEVENT?"mousedown":"click",function(){r.dispatchEvent("close")});var ga=this.okBut=new a.Button(150,90,"OK","#222","#444",null,null,0);ca.addChild(ga),ga.x=fa.x-ga.width-Y,ga.y=0,ga.on("mousedown"==a.ACTIONEVENT?"mousedown":"click",la);var ha=this.swatchBacking=new createjs.Shape;ca.addChild(ha);var P=ha.graphics;P.f("black").r(.5,.5,50,89).f("#666").r(50,.5,50,89).f("white").r(100,.5,49.5,89),ha.x=ga.x-150-Y,ha.y=0;var ia=this.swatch=new a.Rectangle(150,90,M);ca.addChild(ia),ia.x=ha.x,ia.y=0,ia.on("mousedown"==a.ACTIONEVENT?"mousedown":"click",la),ia.cursor="pointer",ca.scaleX=ca.scaleY=b/600,T+=ca.height}else w.cursor="pointer";g||l||(T-=Y-e);var ja=T+Y;this.setBounds(0,0,b,ja);var ka=this.backing=new a.Rectangle(b,ja,o);if(this.addChildAt(ka,0),j!=-1&&k>0&&(ka.shadow=new createjs.Shadow(j,8,8,k)),i){var ma,na;ka.on("mousedown",function(a){ma=a.stageX-r.x,na=a.stageY-r.y,ka.cursor="move"}),ka.on("pressmove",function(a){r.x=a.stageX-ma,r.y=a.stageY-na,r.getStage()&&r.getStage().update()}),ka.on("pressup",function(a){ka.cursor="default",r.getStage()&&r.getStage().update()})}var oa=d*(z+e),pa=L*(z+e);if(f)var qa=V*(z+e),ra=W*(z+e);w.on("mousedown"==a.ACTIONEVENT?"mousedown":"click",function(){var b=a.hitTestGrid(w,oa,pa,d,L,r.getStage().mouseX,r.getStage().mouseY,0,0,e,e);zot(b)||(M=c[b],l?(ia.color=M,da.text=String(c[b]).toUpperCase().substr(0,7),a.centerReg(da)):la()),f&&(b=null,b=a.hitTestGrid(w,qa,ra,V,W,r.getStage().mouseX,r.getStage().mouseY,0,pa,e,e),zot(b)||(M=A[b],l?(ia.color=M,da.text=A[b].toUpperCase(),a.centerReg(da)):la())),n&&X(c.indexOf(M)),l?r.getStage()&&r.getStage().update():n&&!a.OPTIMIZE&&r.getStage()&&r.getStage().update()}),Object.defineProperty(this,"selectedColor",{get:function(){return M},set:function(b){N=M=b,l&&(ia.color=M,da.text=M,a.centerReg(da),r.getStage()&&r.getStage().update()),n&&X(c.indexOf(M))}}),Object.defineProperty(this,"selectedIndex",{get:function(){return c.indexOf(M)},set:function(b){N=M=c[b],l&&(ia.color=M,da.text=M,a.centerReg(da),r.getStage()&&r.getStage().update()),n&&X(c.indexOf(M))}}),Object.defineProperty(this,"selectedAlpha",{get:function(){return g?sa(aa.currentValue):1},set:function(a){g&&(u=ia.alpha=aa.currentValue=a,ba.text="Alpha: "+sa(aa.currentValue),r.getStage()&&r.getStage().update())}}),this.clone=function(){return r.cloneProps(new a.ColorPicker(b,x?null:c,d,e,f,g,h,i,j,k,l,m,n,o))},this.dispose=function(){return aa.dispose(),w.removeAllEventListeners(),ka.removeAllEventListeners(),fa.removeAllEventListeners(),ia.removeAllEventListeners(),ga.removeAllEventListeners(),!0}},a.extend(a.ColorPicker,a.Container,"clone","zimContainer",!1),a.Swipe=function(b,c,d){var f,e="obj, distance, duration";if(f=zob(a.Swipe,arguments,e,this))return f;if(z_d("70"),this.cjsEventDispatcher_constructor(),zot(b)||!b.on)return void zog("zim pages - Swipe():\nPlease pass in object");zot(c)&&(c=30),zot(d)&&(d=80),this.distance=c,this.duration=d,this.active=!0;var g,h,i,j,k,l,m=this;b.on("mousedown",function(a){function c(){var b=new createjs.Event("swipe");b.obj=m.obj,b.swipeX=b.swipeY=0,m.direction="none",Math.abs(i-g)>Math.abs(j-h)?(i-g>m.distance&&(b.swipeX=1,m.direction="right"),g-i>m.distance&&(b.swipeX=-1,m.direction="left")):(j-h>m.distance&&(b.swipeY=1,m.direction="down"),h-j>m.distance&&(b.swipeY=-1,m.direction="up")),m.dispatchEvent(b)}m.active&&!a.target.zimNoSwipe&&(m.obj=a.target,i=g=a.stageX,j=h=a.stageY,k=!0,m.dispatchEvent("swipedown"),clearTimeout(l),l=setTimeout(function(){k&&(c(),k=!1)},m.duration),b.on("pressmove",function(a){i=a.stageX,j=a.stageY}),b.on("pressup",function(a){k&&(c(),k=!1,clearTimeout(l))}))}),this.disable=function(){m.active=!1},this.enable=function(){m.active=!0}},a.extend(a.Swipe,createjs.EventDispatcher,"clone","cjsEventDispatcher",!1),a.Pages=function(b,c,d,e,f){function o(){m=new createjs.Shape,m.graphics.f("black").r(0,0,j,k+1),n=new createjs.Shape,n.graphics.f("white").r(0,0,j,k+1)}var h,g="holder, pages, transition, speed, transitionTable";if(h=zob(a.Pages,arguments,g,this))return h;if(z_d("71"),this.zimContainer_constructor(),zot(b)||!b.getBounds||!b.getBounds())return void zog("zim pages - Pages():\nobject must have bounds set");zot(c)&&(c=[]),zot(d)&&(d="none"),zot(e)&&(e=200),zot(f)&&(f=[]),this.transitionTable=f,this.speed=e,this.active=!0;var m,n,i=this,j=b.getBounds().width,k=b.getBounds().height,l=this.page=c[0]?c[0].page:null;"none"==d&&f==[]||o();for(var q,r,p=["left","right","up","down"],s=0;s<c.length;s++)q=c[s],q.page.zimSwipeArray=q.swipe?q.swipe:[];this.addChild(l),this.swipe=new a.Swipe(b);var t,u=!1,v=this.swipe.on("swipe",function(a){if(i.active){var b=a.currentTarget.direction;if("none"!=b){var c="";"left"==b?c="right":"right"==b?c="left":"up"==b?c="down":"down"==b&&(c="up"),b=c;var d=p.indexOf(b);r=l.zimSwipeArray[d],t=[r,b,null,null,!0],i.page=l,i.nextPage=r,i.direction=b,i.dispatchEvent("swipe"),setTimeout(function(){u||i.go(r,b,null,null,!0)},50)}}});this.addPage=function(a,b){zot(b)&&(b=[]);var c={page:a,swipe:b};c.page.zimSwipeArray=c.swipe?c.swipe:[],l||(l=i.page=c.page,i.addChild(l))},this.removePage=function(a){i.currentPage==a&&(i.removeChild(a),b.getStage()&&b.getStage().update()),a.zimSwipeArray=null},this.setSwipe=function(a,b){zot(b)&&(b=[]);var c={page:a,swipe:b};c.page.zimSwipeArray=c.swipe?c.swipe:[]},this.pause=function(){u=!0},this.unpause=function(){u&&i.go(t[0],t[1],t[2],t[3],t[4])},this.go=function(c,f,g,h,o){function y(a){a[0].uncache(),a[1].uncache(),i.dispatchEvent("pagetransitioned"),i.removeChild(i.lastPage),i.removeChild(m),i.removeChild(n)}function z(b){i.removeChild(i.lastPage),a.animate(b.shift(),{alpha:0},i.speed/2,null,y,b)}setTimeout(function(){u=!1},200);for(var q=[{x:j},{x:-j},{y:k},{y:-k}],r=[{x:0},{x:0},{y:0},{y:0}],s=[{x:j/2,alpha:0},{x:-j/2,alpha:0},{y:k/2,alpha:0},{y:-k/2,alpha:0}],t=d,v=e,w=0;w<i.transitionTable.length;w++)if(i.transitionTable[w][0]==l&&i.transitionTable[w][1]==c){t=i.transitionTable[w][2],v=i.transitionTable[w][3];break}if(zot(g)&&(g=t),zot(h)&&(h=v),i.speed=h,i.direction=f,""==c||null==c)i.page=l,i.dispatchEvent("nothing");else if("string"==typeof c)i.page=l,i.dispatchEvent(c);else{if(c==l)return;zot(f)&&(f="right");var x=p.indexOf(f);c.x=0,c.y=0,c.alpha=1,"slide"==g?(c.x=-(0|q[x].x),c.y=-(0|q[x].y),c.cache(0,0,(j+1)/c.scaleX,(k+1)/c.scaleY),l.cache(0,0,(j+1)/l.scaleX,(k+1)/l.scaleY),i.addChild(c),i.addChild(l),a.animate(l,q[x],i.speed,null,y,[l,c]),a.animate(c,r[x],i.speed)):"reveal"==g?(c.cache(0,0,(j+1)/c.scaleX,(k+1)/c.scaleY),l.cache(0,0,(j+1)/l.scaleX,(k+1)/l.scaleY),i.addChild(c),i.addChild(l),a.animate(l,s[x],i.speed,null,y,[l,c])):"fade"==g?(c.cache(0,0,(j+1)/c.scaleX,(k+1)/c.scaleY),l.cache(0,0,(j+1)/l.scaleX,(k+1)/l.scaleY),c.alpha=1,i.addChild(c),i.addChild(l),a.animate(l,{alpha:0},i.speed,null,y,[l,c])):"black"==g?(c.cache(0,0,(j+1)/c.scaleX,(k+1)/c.scaleY),l.cache(0,0,(j+1)/l.scaleX,(k+1)/l.scaleY),c.alpha=1,i.addChild(c),i.addChild(l),m.alpha=0,i.addChild(m),a.animate(m,{alpha:1},i.speed/2,null,z,[m,l,c])):"white"==g?(c.cache(0,0,(j+1)/c.scaleX,(k+1)/c.scaleY),l.cache(0,0,(j+1)/l.scaleX,(k+1)/l.scaleY),c.alpha=1,i.addChild(c),i.addChild(l),n.alpha=0,i.addChild(n),a.animate(n,{alpha:1},i.speed/2,null,z,[n,l,c])):(i.addChild(c),i.removeChild(l)),i.lastPage=l,i.page=c,zot(o)&&(o=!1),i.fromSwipe=o,i.dispatchEvent("page"),l=c,b.getStage()&&b.getStage().update()}},this.resize=function(){j=b.getBounds().width,k=b.getBounds().height,"none"==d&&f==[]||o()},this.puff=function(a){for(var b=0;b<c.length;b++)i.addChild(c[b].page);i.addChild(l),a>0&&setTimeout(function(){i.settle()},a)},this.settle=function(){i.removeAllChildren(),i.addChild(l),i.dispatchEvent("puffed")},this.disable=function(){i.active=!1},this.enable=function(){i.active=!0},this.dispose=function(){return i.swipe.off("swipe",v),i.removeAllChildren(),c=null,!0}},a.extend(a.Pages,a.Container,"clone","zimContainer",!1),zot(a.ACTIONEVENT)&&(a.ACTIONEVENT="mousedown"),a.HotSpots=function(b,c,d){function m(b){var e=null;if(!Array.isArray(b.rect)){if(e=b.rect,!e)return void zog("zim pages - HotSpots(): HotSpot "+b.page+" "+b.rect+" button does not exist");b.rect=[e.x,e.y,1,1]}j=new a.HotSpot(b.page,b.rect[0],b.rect[1],b.rect[2],b.rect[3],b.call,c),j.zimHSpage=b.page,j.button=e,k.push(j),j.on(g,n),e&&(j.spot.mouseEnabled=!1,j.spot.mouseChildren=!1,e.zimHScall=b.call,e.zimHSEvent=e.on(g,n,!0),d||(e.zimHSMDEvent=e.on("mousedown",function(a){a.stopImmediatePropagation()})),e.cursor="pointer")}function n(a){a.stopImmediatePropagation&&a.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0),"function"==typeof a.currentTarget.zimHScall&&a.currentTarget.zimHScall(a)}var f,e="spots, local, mouseDowns";if(f=zob(a.HotSpots,arguments,e,this))return f;if(z_d("72"),this.zimContainer_constructor(),zot(b)||!Array.isArray(b))return void zog("zim pages - HotSpots():\nplease provide an array of HotSpot data");zot(c)&&(c=!0),zot(d)&&(d=!1);for(var i,j,g="mousedown"==a.ACTIONEVENT?"mousedown":"click",k=[],l=0;l<b.length;l++)m(b[l]);this.addHotSpot=function(a,c,d){i={page:a,rect:c,call:d},b.push(i),m(i)},this.show=function(){for(var a=0;a<k.length;a++)j=k[a],j.button||j.show()},this.hide=function(){for(var a=0;a<k.length;a++)j=k[a],j.hide()},this.removeHotSpots=function(c,e){for(var f=b.length-1;f>=0;f--)i=b[f],j=k[f],e&&!Array.isArray(e)&&(e=[e.x,e.y,e.getBounds().width,e.getBounds().height]),(zot(c)&&zot(e)||zot(e)&&c==i.page||zot(c)&&a.arraysEqual(e,i.rect)||c==i.page&&a.arraysEqual(e,i.rect))&&(b.splice(f,1),j.button&&(j.button.off(g,j.button.zimHSEvent),j.button.zimHSEvent=null,d||(j.button.off("mousedown",j.button.zimHSMDEvent),j.button.zimHSMDEvent=null)),j.off(g,n),j.dispose(),k.splice(f,1))},this.dispose=function(){for(var a=0;a<k.length;a++)j=k[a],j.button&&(j.button.off(g,j.button.zimHSEvent),j.button.zimHSCall=null,j.button.zimHSEvent=null,d||(j.button.off("mousedown",j.button.zimHSMDEvent),j.button.zimHSMDEvent=null)),j.off(g,n),j.dispose();return!0}},a.extend(a.HotSpots,a.Container,"clone","zimContainer",!1),a.HotSpot=function(b,c,d,e,f,g,h){var j,i="obj, x, y, width, height, call, local";if(j=zob(a.HotSpot,arguments,i,this))return j;if(z_d("73"),this.zimContainer_constructor(),zot(b)||!b.addChild)return void zog("zim pages - HotSpot():\nPlease pass in container object for obj");if(b instanceof createjs.Container==0)return void zog("zim pages - HotSpot():\nObjects passed in should be Containers");if(zot(c)||zot(d)||zot(e)||zot(f))return void zog("zim pages - HotSpot():\nPlease pass in x, y, width, height");zot(h)&&(h=!0),eventType="mousedown"==a.ACTIONEVENT?"mousedown":"click";var k=e,l=f,n=new createjs.Shape,o=new createjs.Shape;if(h)n.graphics.f("#999999").dr(c,d,k,l),o.graphics.f("#999999").dr(c,d,1,1);else{var p=b.globalToLocal(c,d),q=b.globalToLocal(c+k,d+l),r=q.x-p.x,s=q.y-p.y;n.graphics.f("#999999").dr(p.x,p.y,r,s),o.graphics.f("#999999").dr(p.x,p.y,1,1)}n.alpha=.4,n.mouseEnabled=!1,o.alpha=.01,o.cursor="pointer",this.spot=o;var t=o.on(eventType,function(a){"function"==typeof g&&g()});b.addChild(o),o.hitArea=n,this.show=function(){b.addChild(n)},this.hide=function(){b.removeChild(n)},this.dispose=function(){return o.off(eventType,t),b.removeChild(o),delete o,!0}},a.extend(a.HotSpot,a.Container,"clone","zimContainer",!1),a.Manager=function(a){z_d("75");var b=this;this.items=[],this.add=function(a){b.items.push(a)},this.resize=function(){if(b)for(var a=0;a<b.items.length;a++)b.items[a].resize()||b.items.splice(a)},this.dispose=function(){zog(b.items.length);for(var a=b.items.length-1;a>=0;a--)b.items[a].dispose();return b.items=[],b=null,!0}},a.Guide=function(b,c,d,e,f){function s(b,c,d){var e=new a.Container;return e.shape=new createjs.Shape,e.shape.graphics.s(c).ss(1).f(b).r(0,0,l,m),e.shape.alpha=.9,e.addChild(e.shape),e.label=new createjs.Text("10","16px verdana",d),e.label.textAlign="center",e.label.textBaseline="middle",e.addChild(e.label),e.mouseChildren=!1,e.mouseEnabled=!1,e}function z(){clearInterval(t),"stage"==b?(j=i.getStage(),b=j):j=b.getStage(),v=b.getBounds().width,w=b.getBounds().height,c?(r.y=w/2,r.label.text="y:"+(i.pixels?Math.round(70*v/100):"70%")):(r.x=v/2,r.label.text="x:"+(i.pixels?Math.round(70*w/100):"70%")),x=new createjs.Shape,i.addChild(x),c?x.x=.7*v:x.y=.7*w,u||(b.addChild(i),C()),j.off("stagemousemove",k),k=j.on("stagemousemove",B),j.update()}function B(a){var e,f;a?(e=b.globalToLocal(a.rawX,a.rawY),A=e):e={x:A.x,y:A.y},d?c?(f=Math.round(Math.abs(e.x-x.x)/v*100),r.label.text="x:"+Math.max(0,Math.min(f,100))+"%",r.y=Math.max(o,Math.min(e.y,q))):(f=Math.round(Math.abs(e.y-x.y)/w*100),r.label.text="y:"+Math.max(0,Math.min(f,100))+"%",r.x=Math.max(n,Math.min(e.x,p))):c?(f=Math.round(Math.abs(e.x-x.x)),r.label.text="x:"+Math.max(0,Math.min(f,Math.round(v))),r.y=Math.max(o,Math.min(e.y,q))):(f=Math.round(Math.abs(e.y-x.y)),r.label.text="y:"+Math.max(0,Math.min(f,Math.round(w))),r.x=Math.max(n,Math.min(e.x,p))),j&&j.update()}function C(){u=!0,v=b.getBounds().width,w=b.getBounds().height;var d;c?(d="ew-resize",y=new createjs.Rectangle(0,0,v,0)):(d="ns-resize",y=new createjs.Rectangle(0,0,0,w)),a.noDrag(x),setTimeout(function(){a.drag(x,y,d,d,null,null,!0)},500),j.mouseMoveOutside=!0,j.enableMouseOver(10),p=v-2*l/3,q=w-m-m,x.uncache();var e=x.graphics;c?(e.c().s("rgba(0,255,255,.1)").ss(20).mt(0,0).lt(0,w),e.f().s("white").ss(2).mt(0,0).lt(0,w),e.s("#00c5af").sd([20,20]).mt(0,0).lt(0,w).sd(),x.cache(-10,0,20,w)):(e.c().s("rgba(255,0,255,.1)").ss(20).mt(0,0).lt(v,0),e.f().s("white").ss(2).mt(0,0).lt(v,0),e.s("#d61fa0").sd([20,20]).mt(0,0).lt(v,0).sd(),x.cache(0,-10,v,20)),c?r.x=v:r.y=w,i.addChild(r)}function D(a){a||(a=event),j&&(String.fromCharCode(a.keyCode)==e.toUpperCase()&&(i.visible=!i.visible,j.off("stagemousemove",k),i.visible&&(k=j.on("stagemousemove",B,i)),j.update()),String.fromCharCode(a.keyCode)==f.toUpperCase()&&(i.pixels=!i.pixels))}var h,g="obj, vertical, percent, hideKey, pixelKey";if(h=zob(a.Guide,arguments,g,this))return h;if(z_d("76"),this.zimContainer_constructor(),zot(b)&&(b="stage"),zot(c)&&(c=!0),!("stage"==b||b.getBounds&&b.getBounds()))return void zog("zim pages - Guide(): Please provide bounds for the obj (setBounds())");zot(d)&&(d=!0),zot(e)&&(e="G"),zot(f)&&(f="P");var j,k,p,q,r,i=this,l=80,m=26,n=l/6+l/2,o=2*m;c?(r=s("#00c5af","white","white"),r.shape.regX=l+l/6,r.shape.regY=m/2,r.label.x=-l/2-l/6):(r=s("#d61fa0","white","white"),r.shape.regX=l/2,r.shape.regY=m+m/4,r.label.y=3*-m/4);var v,w,x,y,t=setInterval(function(){"stage"==b?i&&i.getStage()&&z():b&&b.getStage()&&z()},100),u=!1,A={x:0,y:0};Object.defineProperty(this,"pixels",{get:function(){return!d},set:function(a){d=!a,i.resize()}}),window.addEventListener("keydown",D),this.resize=function(){return!!i&&(j&&(C(),B()),!0)},this.dispose=function(){return!!i&&(a.noDrag(x),clearInterval(t),i.removeAllChildren(),window.removeEventListener("keydown",D),i.parent&&i.parent.removeChild(i),i=null,!0)}},a.extend(a.Guide,a.Container,"clone","zimContainer",!1),a.GuideManager=function(){z_d("77"),a.Manager.call(this,"GuideManager")},a.GuideManager.prototype=new a.Manager,a.GuideManager.prototype.constructor=a.GuideManager,a.Grid=function(b,c,d,e,f){function q(b,c,d){var e=new a.Container;return e.shape=new createjs.Shape,e.shape.graphics.s(c).ss(1).f(b).r(0,0,m,n),e.shape.alpha=.9,e.addChild(e.shape),e.label=new createjs.Text("10","16px verdana",d),e.label.textAlign="center",e.label.textBaseline="middle",e.addChild(e.label),e.mouseChildren=!1,e.mouseEnabled=!1,e}function x(){clearInterval(v),"stage"==b?(j=i.getStage(),b=j):j=b.getStage(),w||(D(),b.addChild(i)),j.off("stagemousemove",l),l=j.on("stagemousemove",z),j.update()}function z(a){var c;a?(c=b.globalToLocal(a.rawX,a.rawY),y=c):c={x:y.x,y:y.y},d?(o.label.text="x:"+Math.max(0,Math.min(Math.round(c.x/A*100),100))+"%",o.x=Math.max(r,Math.min(c.x,t)),p.label.text="y:"+Math.max(0,Math.min(Math.round(c.y/B*100),100))+"%",p.y=Math.max(s,Math.min(c.y,u))):(o.label.text="x:"+Math.max(0,Math.min(Math.round(c.x),Math.round(A))),o.x=Math.max(r,Math.min(c.x,t)),p.label.text="y:"+Math.max(0,Math.min(Math.round(c.y),Math.round(B))),p.y=Math.max(s,Math.min(c.y,u))),j&&j.update()}function D(){w=!0,b&&b.getBounds&&(A=b.getBounds().width,B=b.getBounds().height),j&&(j.mouseMoveOutside=!0,j.enableMouseOver(10)),t=A-2*m/3,u=B-n-n,C=new a.Container,i.addChild(C);var e=new createjs.Shape;C.addChild(e);var f=e.graphics;f.s(c).ss(1);var g=new createjs.Shape;if(C.addChild(g),d){for(var h=1;h<22;h++)f.mt(h*A/20,0).lt(h*A/20,B);for(var h=1;h<20;h++)f.mt(0,h*B/20).lt(A,h*B/20);e.alpha=.3,f=g.graphics,f.s(c).ss(1);for(var h=1;h<10;h++)f.mt(h*A/10,0).lt(h*A/10,B);for(var h=1;h<10;h++)f.mt(0,h*B/10).lt(A,h*B/10)}else{for(var h=0;h<A/k;h++)f.mt(h*k,0).lt(h*k,B);for(var h=0;h<B/k;h++)f.mt(0,h*k).lt(A,h*k);e.alpha=.3,f=g.graphics,f.s(c).ss(1);for(var h=0;h<A/(10*k);h++)f.mt(h*(10*k),0).lt(h*(10*k),B);for(var h=0;h<B/(10*k);h++)f.mt(0,h*(10*k)).lt(A,h*(10*k))}var l=80;f.s("#FFFFFF").ss(8),f.mt(A/2,B/2-l/2).lt(A/2,B/2+l/2),f.mt(A/2-l/2,B/2).lt(A/2+l/2,B/2),f.s("#000000").ss(4),f.mt(A/2,B/2-l/2).lt(A/2,B/2+l/2),f.mt(A/2-l/2,B/2).lt(A/2+l/2,B/2),f.s(c).ss(3),f.dr(0,0,A,B),g.alpha=.5,C.cache(0,0,A,B),i.addChild(o),i.addChild(p),j&&j.update()}function E(a){a||(a=event),j&&(String.fromCharCode(a.keyCode)==e.toUpperCase()&&(i.visible=!i.visible,j.off("stagemousemove",l),i.visible&&(l=j.on("stagemousemove",z,i)),j.update()),String.fromCharCode(a.keyCode)==f.toUpperCase()&&(i.removeChild(C),C=null,i.pixels=!i.pixels))}var h,g="obj, color, percent, hideKey, pixelKey";if(h=zob(a.Grid,arguments,g,this))return h;if(z_d("78"),this.zimContainer_constructor(),zot(b)&&(b="stage"),zot(c)&&(c="black"),!("stage"==b||b.getBounds&&b.getBounds()))return void zog("zim pages - Grid(): Please provide bounds for the obj (setBounds())");zot(d)&&(d=!0),zot(e)&&(e="G"),zot(f)&&(f="P");var j,l,i=this,k=10;this.mouseChildren=!1,this.mouseEnabled=!1;var m=80,n=26,o=q("#dddddd",c,"#333333");o.shape.regX=m/2,o.shape.regY=-n/4,o.label.y=3*n/4;var p=q("#dddddd",c,"#333333");p.shape.regX=-m/6,p.shape.regY=n/2,p.label.x=m/2+m/6;var t,u,r=m/6+m/2,s=2*n;o.x=r,p.y=s,o.label.text="x:0",p.label.text="y:0";var A,B,C,v=setInterval(function(){"stage"==b?i&&i.getStage()&&x():b&&b.getStage()&&x()},100),w=!1,y={x:0,y:0};Object.defineProperty(this,"pixels",{get:function(){return!d},set:function(a){d=!a,i.resize()}}),window.addEventListener("keydown",E),this.resize=function(){return!!i&&(i.removeChild(C),C=null,j&&(D(),z(),setTimeout(function(){i.removeChild(C),C=null,D()},200)),!0)},this.dispose=function(){return clearInterval(v),i.removeAllChildren(),window.removeEventListener("keydown",E),i.parent&&i.parent.removeChild(i),i=null,!0}},a.extend(a.Grid,a.Container,"clone","zimContainer",!1),a.GridManager=function(){z_d("79"),a.Manager.call(this,"GridManager")},a.GridManager.prototype=new a.Manager,a.GridManager.prototype.constructor=a.GridManager,a.Layout=function(b,c,d,e,f,g,h,i){function z(){for(var a=0,b=0;b<c.length;b++)o=c[b],o.given=0,0==o[r]&&(a+=o.object.getBounds()[r]);for(var b=0;b<c.length;b++)o=c[b],0==o[r]&&(o.given=o.object.getBounds()[r]/a*y)}function A(a){a||(a=event),g&&String.fromCharCode(a.keyCode)==i.toUpperCase()&&(g.visible=!g.visible,g.getStage()&&g.getStage().update())}var k,j="holder, regions, lastMargin, backgroundColor, vertical, regionShape, scalingObject, hideKey";if(k=zob(a.Layout,arguments,j,this))return k;if(z_d("80"),this.cjsEventDispatcher_constructor(),zot(b)||!b.getBounds)return void zog("zim pages - Layout(): please provide an object with bounds set that holds the objects being laid out");if(h=zot(h)?b:h,!h.getBounds||!h.getBounds())return void zog("zim pages - Layout(): holder must have bounds set or provide a scalingObject with bounds");var l=h.getBounds();b.setBounds(0,0,l.width,l.height),zot(d)&&(d=0),zot(f)&&(f=!0),zot(e)&&(e=""),zot(i)&&(i="B");var m=new createjs.Shape,n=this;this.active=!0,this.regions=c;var o,p=0,q="minWidth",r="width",s="height",t="marginLeft",u="maxHeight",v="x",w="y";f&&(q="minHeight",r="height",s="width",t="marginTop",u="maxWidth",v="y",w="x");for(var x=0;x<c.length;x++){if(o=c[x],!o.object||!o.object.getBounds())return void zog("zim pages - Layout(): each region object must have an object with setBounds() set");o[q]||(o[q]=0),o[r]||(o[r]=0),o.backgroundColor||(o.backgroundColor=""),o.given=0,o.maxGiven=0,o[t]||(o[t]=0),o[u]||(o[u]=100),f?(o.align||(o.align="middle"),o.valign||(0==x?o.valign="top":x==c.length-1?o.valign="bottom":o.valign="middle",1==c.length&&(o.valign="middle"))):(o.valign||(o.valign="top"),o.align||(0==x?o.align="left":x==c.length-1?o.align="right":o.align="middle",1==c.length&&(o.align="middle"))),o[r]&&(o[q]=0),p+=o[r]+o[t]}if(p+=d,p>100)return void zog("zim pages - Layout(): cannot fit regions into 100% bounds");var y=100-p;z(),this.resize=function(){if(n.active){l=h.getBounds(),b.setBounds(0,0,l.width,l.height),m.graphics.clear(),""!=e&&m.graphics.f(e).r(0,0,l.width,l.height);for(var i=0;i<c.length;i++)o=c[i],o.maxGiven=0,o.marginGiven=0;for(var k,v,w,x,A,B,C,j=!0,D=y;j;){v=0,j=!1,k=!0;for(var i=0;i<c.length;i++)o=c[i],o.given>0&&0==o.maxGiven&&(w=o.object.getBounds()[r],x=o.object.getBounds()[s],A=o.given*l[r]/100,B=o[u]*l[s]/100,C=x/w*A,C>B?(o.maxGiven=w/x*B*100/l[r],v+=o.given-o.maxGiven,D-=o.maxGiven):k=!1);if(k)break;totalPrimaries=0;for(var i=0;i<c.length;i++)o=c[i],0==o[r]&&0==o.maxGiven&&(totalPrimaries+=o.object.getBounds()[r]);for(var i=0;i<c.length;i++)o=c[i],0==o[r]&&0==o.maxGiven&&(o.given=o.object.getBounds()[r]/totalPrimaries*D)}var E=!0;if(o=c[0],o.maxGiven>0?o.maxGiven<o[q]&&(o[r]=o[q],E=!1):o.given>0&&o.given<o[q]&&(o[r]=o[q],E=!1),o=c[c.length-1],o.maxGiven>0?o.maxGiven<o[q]&&(o[r]=o[q],E=!1):o.given>0&&o.given<o[q]&&(o[r]=o[q],E=!1),!E){p=0;for(var i=0;i<c.length;i++)o=c[i],p+=o[r]+o[t];return p+=d,p>100?void zog("zim build - Layout(): cannot fit regions into 100% bounds"):(y=100-p,z(),void n.resize())}for(var F=!0,G=0,H=0,i=0;i<c.length;i++)o=c[i],G+=o[t],o[r]>0?H+=o[r]:o.maxGiven>0?H+=o.maxGiven:o.given>0&&(H+=o.given),0==o[r]&&(F=!1);if(F||k){G+=d;var I=100-H-G;if(G-=d+c[0][t],0!=I&&0!=G)for(var i=0;i<c.length;i++)0!=i&&(o=c[i],o.marginGiven=o[t]/G*(G+I))}var w,x,L,M,N,J=0,K=0;if(g&&g.graphics){var O=g.graphics;O.c()}for(var i=0;i<c.length;i++)o=c[i],J+=o.marginGiven>0?o.marginGiven*l[r]/100:o[t]*l[r]/100,w=o[r]>0?o[r]:o.maxGiven>0?o.maxGiven:o.given>0?o.given:0,w=w*l[r]/100,x=o[u]*l[s]/100,K=(l[s]-x)/2,L=f?a.fit(o.object,K,J,x,w):a.fit(o.object,J,K,w,x),"top"==o.valign?o.object.y=L.bY:"bottom"==o.valign&&(o.object.y=L.bY+L.bHeight-L.height),"left"==o.align?o.object.x=L.bX:"right"==o.align&&(o.object.x=L.bX+L.bWidth-L.width),g&&g.graphics&&(O.s("white").ss(2).r(L.bX,L.bY,L.bWidth,L.bHeight),O.s("#ff8203").sd([20,20]).r(L.bX,L.bY,L.bWidth,L.bHeight).sd()),N=M=0,0!=J&&J+w!=l[r]||(f?N=1:M=1),x==l[s]&&(f?M=1:N=1),""!=o.backgroundColor&&m.graphics.f(o.backgroundColor).r(L.bX,L.bY,L.bWidth+M,L.bHeight+N),J+=w}},this.resize(),g&&b.addChild(g),b.addChildAt(m,0),window.addEventListener("keydown",A),this.disable=function(){n.active=!1,window.removeEventListener("keydown",A),g&&(g.alpha=0)},this.enable=function(){n.active=!0,window.addEventListener("keydown",A),n.resize(),g&&(g.alpha=1)},this.removeShape=function(){g&&(g.graphics.clear(),b.removeChild(g),g=null,g=!1),window.removeEventListener("keydown",A)},this.addShape=function(a,c){n.removeShape(),g=a,window.addEventListener("keydown",A),b.addChild(g),n.resize()},this.dispose=function(){return n.removeShape(),!0}},a.extend(a.Layout,createjs.EventDispatcher,"clone","cjsEventDispatcher",!1),a.LayoutManager=function(){z_d("81");var a=this;this.items=[],this.add=function(b){
a.items.push(b)},this.resize=function(){for(var b=0;b<a.items.length;b++)a.items[b].resize()},this.disable=function(){for(var b=0;b<a.items.length;b++)a.items[b].disable()},this.enable=function(){for(var b=0;b<a.items.length;b++)a.items[b].enable()},this.dispose=function(){for(var b=0;b<a.items.length;b++)a.items[b].removeShape();return!0}},a.Parallax=function(b,c,d,e){function o(a){j.step()}var g,f="stage, damp, layers, auto";if(g=zob(a.Parallax,arguments,f,this))return g;if(z_d("68"),zot(b)||!b.getBounds)return void zog("zim build - Parallax(): please pass in the stage with bounds as first parameter");if(!b.getBounds())return void zog("zim build - Parallax(): Please give the stage bounds using setBounds()");zot(e)&&(e=!0);var h=b.getBounds().width,j=(b.getBounds().height,this),k=zot(c)?.1:c;this.addLayer=function(b){if(!(zot(b.obj)||zot(b.prop)||zot(b.propChange))){var c={obj:b.obj,prop:b.prop};c[c.prop]=b.propChange,zot(b.input)&&(b.input="mouseX"),c.input=b.input;var d=zot(b.inMin)?0:b.inMin,e=zot(b.inMax)?h:b.inMax,f=zot(b.factor)?1:b.factor,g=!zot(b.integer)&&b.integer;return c["p_"+c.prop]=new a.ProportionDamp(d,e,0,c[c.prop],k,f,g),"scale"==c.prop?c["s_"+c.prop]=c.obj.scaleX:"frame"==c.prop?c["s_"+c.prop]=c.obj.currentFrame:c["s_"+c.prop]=c.obj[c.prop],l.push(c),l.length-1}},this.removeLayer=function(a){if(!zot(a)){var b=l[a];b["p_"+b.prop].dispose(),l.splice(a,1)}},this.immediate=function(a){for(var b,c=0;c<l.length;c++)b=l[c],b["p_"+b.prop].immediate(a[c])},this.dispose=function(){return l=null,e&&a.Ticker.remove(n),!0},d=zot(d)?[]:d;for(var l=[],m=0;m<d.length;m++)this.addLayer(d[m]);if(e)var n=a.Ticker.add(o,b);this.step=function(c){for(var d,f,g=0;g<l.length;g++)d=l[g],zot(c)?"mouseX"==d.input?f=b.mouseX:"mouseY"==d.input?f=b.mouseY:"scrollX"==d.input?f=a.scrollX():"scrollY"==d.input&&(f=a.scrollY()):f=c,"scale"==d.prop?d.obj.scaleX=d.obj.scaleY=d["s_"+d.prop]+d["p_"+d.prop].convert(f):"frame"==d.prop?d.obj.gotoAndStop(d["s_"+d.prop]+d["p_"+d.prop].convert(f)):(d.obj[d.prop]=d["s_"+d.prop]+d["p_"+d.prop].convert(f),"mouseX"==d.input&&e&&(d.obj[d.prop]-=d[d.prop]/2))},Object.defineProperty(j,"damp",{get:function(){return k},set:function(a){k=a;for(var b,c=0;c<l.length;c++)b=l[c],b["p_"+b.prop].damp=k}})},a.Scroller=function(b,c,d,e,f,g,h){function v(a){r||(r=h.getBounds().width,s=h.getBounds().height),0!=m.speed&&0!=m.direction&&(e?(k.x-=m.speed*m.direction,k.x<l.x?l.x=k.x+p:l.x=k.x-p,m.direction*m.speed>0?l.x<0&&k.x<l.x?k.x=l.x+p:k.x<0&&l.x<k.x&&(l.x=k.x+p):l.x>r&&l.x>k.x?l.x=k.x-p:k.x>r&&k.x>l.x&&(k.x=l.x-p)):(k.y-=m.speed*m.direction,k.y<l.y?l.y=k.y+q:l.y=k.y-q,m.direction*m.speed>0?l.y<0&&k.y<l.y?k.y=l.y+q:k.y<0&&l.y<k.y&&(l.y=k.y+q):l.y>s&&l.y>k.y?l.y=k.y-q:k.y>s&&k.y>l.y&&(k.y=l.y-q)))}var j,i="backing, speed, direction, horizontal, gapFix, stage, container";if(j=zob(a.Scroller,arguments,i,this))return j;z_d("69"),this.cjsEventDispatcher_constructor();var k=this.backing1=b;if(!zot(k)&&k.getBounds){var l=this.backing2=b.clone();k.parent.addChild(l),zot(e)&&(e=!0),zot(f)&&(f=0);var m=this;this.speed=zot(c)?1:c;var n=this.baseSpeed=this.speed;this.direction=zot(d)?1:d;var o=e?k.scaleX:k.scaleY;if(!k.getBounds())return void zog("zim build - Scroller(): please setBounds() on backing objects");if(!g&&!k.getStage())return void zog("zim build - Scroller(): please pass in stage parameter or add backing objects to stage to start");if(g=g||k.getStage(),zot(h)&&(h=g),!h.getBounds())return void zog("zim build - Scroller(): please setBounds() on container or stage if no container");var r,s,p=k.getBounds().width*o-f,q=k.getBounds().height*o-f;e?l.x=p:l.y=q;var t=!1,u=a.Ticker.add(v,g);this.paused=!1,this.pause=function(b,c){return zot(b)&&(b=!0),zot(c)&&(c=0),b?(n=m.speed,c>0?(t=!0,a.animate({target:m,obj:{pausingSpeed:0},ticker:!1,time:c,call:function(){m.speed=0,m.paused=!0,t=!1,m.dispatchEvent("pause")}})):(t=!1,m.speed=0,m.paused=!0,setTimeout(function(){m.dispatchEvent("pause")},10))):(t=!1,c>0?a.animate({target:m,obj:{pausingSpeed:n},ticker:!1,time:c,call:function(){m.speed=n,m.paused=!1,t=!1}}):(m.speed=n,m.paused=!1)),m},Object.defineProperty(m,"percentSpeed",{get:function(){return 0==m.baseSpeed?NaN:m.speed/m.baseSpeed*100},set:function(a){t||m.paused||(m.speed=m.baseSpeed*a/100)}}),Object.defineProperty(m,"pausingSpeed",{get:function(){return 0==m.baseSpeed?NaN:m.speed/m.baseSpeed*100},set:function(a){m.speed=m.baseSpeed*a/100}}),this.dispose=function(){return zon&&zog("bye from Scroller"),a.Ticker.remove(u),!0}}},a.extend(a.Scroller,createjs.EventDispatcher,null,"cjsEventDispatcher"),a.Dynamo=function(b,c,d,e,f,g,h){function v(){if(o=requestAnimationFrame(v),p=k[l].s,0!=n.speed&&0!=p&&(s=1e3/Math.abs(n.speed)*p,r=Date.now(),r-q>s)){q=r;var a=n.frame+(n.speed>0||!h?1:-1),c=!1;a>=k.length&&(c=!0,a=0),a<0&&(c=!0,a=k.length-1),n.frame=a,c&&n.dispatchEvent("loop"),n.dispatchEvent("change"),g&&b.getStage()&&b.getStage().update(),zot(t)||t!=n.frame||(u=!1,n.speed=0,n.paused=!0,n.dispatchEvent("pause"))}}var j,i="sprite, speed, label, startFrame, endFrame, update, reversable";if(j=zob(a.Dynamo,arguments,i,this))return j;z_d("69.2"),this.cjsEventDispatcher_constructor();var k=this.frames=b.parseFrames(d,e,f);if(0!=k.length){this.totalFrames=k.length;var l=0;zot(c)&&(c=30),zot(h)&&(h=!0);var m=this.baseSpeed=this.speed=c;zot(g)&&(g=!1);var o,p,r,s,t,n=this,q=Date.now(),u=!1;v(),this.paused=!1,this.pause=function(b,c,d){return zot(b)&&(b=!0),zot(c)&&(c=0),b?(m=n.speed,zot(d)?c>0?(u=!0,a.animate({target:n,obj:{pausingSpeed:0},ticker:!1,time:c,call:function(){u=!1,n.speed=0,n.paused=!0,n.dispatchEvent("pause")}})):(u=!1,n.speed=0,n.paused=!0,setTimeout(function(){n.dispatchEvent("pause")},10)):(u=!0,t=d)):(t=null,c>0?(u=!0,a.animate({target:n,obj:{pausingSpeed:m},ticker:!1,time:c,call:function(){u=!1,n.speed=m,n.paused=!1}})):(u=!1,n.speed=m,n.paused=!1)),n},Object.defineProperty(n,"frame",{get:function(){return l},set:function(a){l=Math.round(a)%k.length;var c=k[l];zot(c)||(b.frame=c.f)}}),Object.defineProperty(n,"percentSpeed",{get:function(){return 0==n.baseSpeed?NaN:n.speed/n.baseSpeed*100},set:function(a){u||n.paused||(n.speed=n.baseSpeed*a/100)}}),Object.defineProperty(n,"pausingSpeed",{get:function(){return 0==n.baseSpeed?NaN:n.speed/n.baseSpeed*100},set:function(a){n.speed=n.baseSpeed*a/100}}),this.dispose=function(){cancelAnimationFrame(o)}}},a.extend(a.Dynamo,createjs.EventDispatcher,null,"cjsEventDispatcher"),a.Accelerator=function(a){z_d("69.3"),this.cjsEventDispatcher_constructor();var b=this;this.paused=!1,this.items=[],this.paused=!1,this._percentSpeed=100,this.add=function(a){var c;c=Array.isArray(a)?a:[a];for(var d,e=0;e<c.length;e++)d=b.items.indexOf(c[e]),d<0&&c[e].pause&&b.items.push(c[e]);return b},a&&this.add(a),this.remove=function(a){var c;c=Array.isArray(a)?a:[a];for(var d,e=0;e<c.length;e++)d=b.items.indexOf(c[e]),d>=0&&b.items.splice(d,1);return b},this.pause=function(a,c,d){function h(c){for(var d=0;d<b.items.length;d++)1!=e[d]&&b.items[d].pause(a)}zot(a)&&(a=!0);var e=[];if(a){zot(d)||(c=null);for(var f=!1,g=0;g<b.items.length;g++)(zot(c)||!zot(d)||b.items[g].totalFrames)&&(!b.items[g].totalFrames||zot(c)&&zot(d))||(b.items[g].pause(!0,c,d),f=!0,e[g]=1,b.items[g].on("pause",function(){b.paused||(h(!0),b.paused=!0,b.dispatchEvent("pause"))},null,!0));f||(h(),b.paused=!0,setTimeout(function(){b.dispatchEvent("pause")},10))}else b.paused=!1,h()},Object.defineProperty(b,"percentSpeed",{get:function(){return b._percentSpeed},set:function(a){b._percentSpeed=a;for(var c=0;c<b.items.length;c++)b.items[c].percentSpeed=a}}),this.dispose=function(){for(var a=0;a<b.items.length;a++)b.items[a].dispose();return!0}},a.extend(a.Accelerator,createjs.EventDispatcher,null,"cjsEventDispatcher"),a.Swiper=function(b,c,d,e,f,g,h,i,j){function v(){o=f?r.mouseX:r.mouseY,p=m.target[m.property],m.dispatchEvent("swipedown")}function w(){var a=o-(f?r.mouseX:r.mouseY);q=p-a*e,zot(g)||(q=Math.max(q,g)),zot(h)||(q=Math.min(q,h)),m.desiredValue=q,m.dispatchEvent("swipemove")}function A(){n.canvas?(n.off("stagemousedown",s),n.off("stagemousemove",t),n.off("stagemouseup",u)):(n.off("mousedown",s),n.off("pressmove",t),n.off("pressup",u)),a.Ticker.remove(y)}function B(){n.canvas?n.on("stagemousedown",s):(n.on("mousedown",s),n.on("pressmove",t),n.on("pressup",u)),a.Ticker.add(y,r)}var l,k="swipeOn, target, property, sensitivity, horizontal, min, max, damp, integer";if(l=zob(a.Swiper,arguments,k,this))return l;if(z_d("69.5"),this.cjsEventDispatcher_constructor(),zot(b)||!b.getStage||!b.getStage())return void zog("zim.Swiper() - please provide container on stage");if(!zot(c)){zot(e)&&(e=1),zot(f)&&(f=!0),zot(i)&&(i=.1),zot(j)&&(j=!1);var o,p,r,m=this,n=b,q=m.desiredValue=c[d];this.target=c,this.property=d;var s,t,u;n.canvas?(s=n.on("stagemousedown",function(){v(),t=n.on("stagemousemove",w),u=n.on("stagemouseup",function(){n.off("stagemousemove",t),n.off("stagemouseup",u),m.dispatchEvent("swipeup")})}),r=n):(r=n.getStage(),s=n.on("mousedown",v),t=n.on("pressmove",w),u=n.on("pressup",function(){m.dispatchEvent("swipeup")}));var x=new a.Damp(m.target[m.property]),y=a.Ticker.add(function(){m.target[m.property]=j?Math.round(x.convert(q)):x.convert(q)},r);this.immediate=function(a){x.immediate(a),m.target[m.property]=j?Math.round(a):a,m.desiredValue=q=a};var z=!0;Object.defineProperty(m,"enabled",{get:function(){return z},set:function(a){z!=a&&(a?B():A(),z=Boolean(a))}}),this.dispose=function(){A(),x=null}}},a.extend(a.Swiper,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),a.MotionController=function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function I(a){var c,b="keydown"==d?a.keyCode:a.buttonCode;for(x=0;x<4;x++)if(h[x].indexOf(b)>-1){if(i||"both"!=u.axis||(E.dirX=E.dirY=0),E["dir"+A[x]]=B[x],y[x]=1,c=z.indexOf(x),0==c)return;return c>0&&z.splice(c,1),void z.unshift(x)}}function L(a){var c,b="keydown"==d?a.keyCode:a.buttonCode;for(x=0;x<4;x++)if(h[x].indexOf(b)>-1){if(y[x]=0,c=z.indexOf(x),c>=0&&z.splice(c,1),"both"!=u.axis||i)E["dir"+A[x]]=-y[2*Math.floor(x/2)]+y[2*Math.floor(x/2)+1];else if(z.length>0){E["dir"+A[x]]=0;var e=z[0];E["dir"+A[e]]=B[e]}else E.dirX=E.dirY=0;return}}function T(a){M.rotation+=a.dirX*u.turnSpeed,u.angle=M.rotation,M.speedX=Math.sin(M.rotation*Math.PI/180)*u.speed*-a.dirY,M.speedY=-Math.cos(M.rotation*Math.PI/180)*u.speed*-a.dirY,u.x+=M.speedX,u.y+=M.speedY}function U(){var a=u.x-u.target.x,b=u.y-u.target.y,c=W(a,b);if(v=c.speedX,w=c.speedY,l&&(u.angle=c.angle,!zot(u.angle))){var d=V(u.angle),e=u.target.rotation=V(u.target.rotation);Math.abs(d-e)>180&&(e>d?e-=360:d-=360),u.dampR.immediate(e),u.target.rotation=e,u.angle=d}}function V(a){return(a%360+360)%360}function W(a,b){var e,c=u.speed,d=u.speed,f=Math.sqrt(Math.pow(a,2)+Math.pow(b,2));return f>0&&(c=Math.abs(a)/f*u.speed,d=Math.abs(b)/f*u.speed,e=90-180*Math.atan2(a,b)/Math.PI),{speedX:c,speedY:d,angle:e}}function ba(){"keydown"==d?(frame.on("keydown",F),frame.on("keyup",J),a.Ticker.add(N,t)):"gamebutton"==d?(G.on("buttondown",H),G.on("buttonup",K),a.Ticker.add(N,t)):"gamestick"==d?G.on("data",P):"swipe"==d?(Q.enabled=!0,R.enabled=!0,Q.on("swipemove",S)):"mousedown"!=d&&"mousemove"!=d||t.on("stage"+d,O),a.Ticker.add(_,t)}function ca(){"keydown"==d?(frame.off("keydown",F),frame.off("keyup",J),a.Ticker.remove(N)):"gamebutton"==d?(G.off("buttondown",H),G.off("buttonup",K),a.Ticker.remove(N)):"gamestick"==d?G.off("data",P):"swipe"==d?(Q.enabled=!1,R.enabled=!1,Q.off("swipemove",S)):"mousedown"!=d&&"mousemove"!=d||t.off("stage"+d,O),a.Ticker.remove(_)}var s,r="container, target, type, speed, axis, rect, map, diagonal, damp, flip, rotate, constant, firstPerson, turnSpeed, moveThreshold, stickThreshold";if(s=zob(a.MotionController,arguments,r,this))return s;if(z_d("69.7"),this.cjsEventDispatcher_constructor(),zot(b)||!b.getStage)return void zog("zim Controller(): Please pass in a reference to a container as first parameter");if(zot(b.getStage()))return void zog("zim Controller(): The Container must be on the stage");var t=b.getStage();if(zot(c))return void zog("zim Controller(): Please pass in a target object to control");zot(e)&&(e=7),(zot(d)||"mousemove"!=d&&"keydown"!=d&&"gamebutton"!=d&&"gamestick"!=d&&"swipe"!=d&&"manual"!=d)&&(d="mousedown"),zot(f)&&(f="both"),"keydown"==d&&zot(h)&&(h=[[65,37],[68,39],[87,38],[83,40]]),"gamebutton"==d&&zot(h)&&(h=n?[14,15,a.GamePad.RT,a.GamePad.LT]:[14,15,12,13]),"gamestick"==d&&zot(h)&&(h=n?[[0,2],[0,2],[1],[1]]:[0,0,1,1]),"gamestick"==d&&zot(h)&&(h=[0,0,1,1]),zot(i)&&(i=!0),"horizontal"!=f&&"vertical"!=f||(i=!1),zot(j)&&(j="keydown"==d||"gamebutton"==d?1:.1),zot(n)&&(n=!1),zot(o)&&(o=.4*e),zot(p)&&(p=4),zot(q)&&(q=.2);var u=this;this.dirX=0,this.dirY=0,this.speed=e,this.turnSpeed=o,this.axis=f,this.target=c,this.moveThreshold=p,this.stickThreshold=q;var v=u.speed,w=u.speed;if(u.angle=0,u.x=this.target.x,u.y=this.target.y,"keydown"==d||"gamebutton"==d){for(var x=0;x<4;x++)Array.isArray(h[x])||(h[x]=[h[x]]);var y=[0,0,0,0],z=[],A=["X","X","Y","Y"],B=[-1,1,-1,1],E={dirX:0,dirY:0};if("keydown"==d)var F=frame.on("keydown",I);else var G=u.gamepad=new a.GamePad,H=G.on("buttondown",I);if(zot(m))if("keydown"==d)var J=frame.on("keyup",L);else var K=G.on("buttonup",L);var M={rotation:0,speedX:u.speed,speedY:u.speed},N=a.Ticker.add(function(){if(n)return void T(E);var a=u.speed,b=u.speed;if("both"==u.axis&&0!=E.dirX&&0!=E.dirY){var c=W(E.dirX,E.dirY);a=c.speedX,b=c.speedY}"horizontal"!=u.axis&&"both"!=u.axis||(u.x+=a*E.dirX),"vertical"!=u.axis&&"both"!=u.axis||(u.y+=b*E.dirY),U()},t)}else if("mousedown"==d||"mousemove"==d)var O=t.on("stage"+d,function(){var a=b.globalToLocal(t.mouseX,t.mouseY);u.x=a.x,u.y=a.y,U()});else if("gamestick"==d){for(var G=this.gamepad=new a.GamePad,x=0;x<4;x++)Array.isArray(h[x])||(h[x]=[h[x]]);var M={rotation:0,speedX:u.speed,speedY:u.speed},P=G.on("data",function(a){for(var b={dirX:0,dirY:0},c=0;c<h[0].length;c++){var d=a.axes[h[0][c]];if(Math.abs(d)>u.stickThreshold){b.dirX=d;break}}for(var c=0;c<h[2].length;c++){var d=a.axes[h[2][c]];if(Math.abs(d)>u.stickThreshold){b.dirY=d;break}}return n?void T(b):(u.x+=u.speed*b.dirX,u.y+=u.speed*b.dirY,void U())})}else if("swipe"==d)var Q=new a.Swiper(t,u,"x",.8),R=new a.Swiper(t,u,"y",.8,!1),S=Q.on("swipemove",function(){U()});var X=this.x=this.target.x,Y=this.y=this.target.y;this.dampX=new a.Damp(X,j),this.dampY=new a.Damp(Y,j),this.dampR=new a.Damp(this.target.rotation,j);var Z=0,$=0,_=a.Ticker.add(function(){if(g&&(u.x=a.constrain(u.x,g.x,g.x+g.width),u.y=a.constrain(u.y,g.y,g.y+g.height)),"horizontal"!=u.axis&&"both"!=u.axis||(u.dirX=a.sign(u.x-X),Math.abs(u.x-X)<v?X=u.x:X+=u.dirX*v,u.target.x=u.dampX.convert(X)),"vertical"!=u.axis&&"both"!=u.axis||(u.dirY=a.sign(u.y-Y),Math.abs(u.y-Y)<w?Y=u.y:Y+=a.sign(u.y-Y)*w,u.target.y=u.dampY.convert(Y)),u.dirX!=Z||u.dirY!=$){var b=new createjs.Event("change");if(u.dirX!=Z){var d=["left",null,"right"];b.dir=d[u.dirX+1],Z=u.dirX,"horizontal"!=k&&"both"!=k||(c.scaleX=u.dirX?Math.abs(c.scaleX)*u.dirX:c.scaleX)}else{var d=["up",null,"down"];b.dir=d[u.dirY+1],$=u.dirY,"vertical"!=k&&"both"!=k||(c.scaleY=u.dirY?Math.abs(c.scaleY)*u.dirY:c.scaleY)}u.dispatchEvent(b)}u.movingX=Math.abs(X-u.target.x)>u.moveThreshold,u.movingY=Math.abs(Y-u.target.y)>u.moveThreshold,u.moving=u.movingX||u.movingY,l&&!zot(u.angle)&&(u.target.rotation=u.dampR.convert(u.angle))},t);this.immediate=function(a,b,c){!zot(a)&&u.dampX&&(u.dampX.immediate(a),u.x=u.target.x=X=a,Q&&Q.immediate(a)),!zot(b)&&u.dampY&&(u.dampY.immediate(b),u.y=u.target.y=Y=b,R&&R.immediate(b)),!zot(c)&&u.dampR&&(u.dampR.immediate(c),u.angle=u.target.rotation=c)},this.convert=function(a,b){zot(a)||(u.x=a),zot(b)||(u.y=b),U()};var aa=!0;Object.defineProperty(u,"enabled",{get:function(){return aa},set:function(a){aa!=a&&(a?ba():ca(),aa=Boolean(a))}}),this.dispose=function(){ca(),G&&G.dispose(),Q&&Q.dispose(),R&&Q.dispose()}},a.extend(a.MotionController,createjs.EventDispatcher,"enabled","cjsEventDispatcher"),a.GamePad=function(){function d(d){function h(){a=requestAnimationFrame(h),b.data=navigator.getGamepads()[b.currentIndex];for(var e=b.buttons=[],f=0;f<b.data.buttons.length;f++)if(e[f]=b.data.buttons[f].pressed,e[f]!=b.lastData[f]){if(b.lastData[f]=e[f],e[f])var g=new createjs.Event("buttondown");else var g=new createjs.Event("buttonup");g.buttonCode=f,g.button=c[f],b.dispatchEvent(g)}var g=new createjs.Event("data");g.axes=b.axes=b.data.axes,g.buttons=b.buttons,b.dispatchEvent(g)}b.connected=!0,f("gamepadconnected",d);var e=navigator.getGamepads()[b.currentIndex];b.lastData=[];for(var g=0;g<e.buttons.length;g++)b.lastData[g]=e.buttons[g].pressed;h()}function f(a,c){var d=new createjs.Event(a);d.index=c.gamepad.index,d.id=c.gamepad.id,d.buttons=c.gamepad.buttons,d.axes=c.gamepad.axes,b.dispatchEvent(d)}if(z_d("69.8"),this.cjsEventDispatcher_constructor(),!navigator.getGamepads)return this.error=!0,void(zon&&zog("zim.GamePad() - no browswer support"));var a;window.addEventListener("gamepadconnected",d),this.currentIndex=0;var b=this,e=setInterval(function(){navigator.getGamepads&&navigator.getGamepads()[0]&&(b.connected||d(),clearInterval(e))},500),g=window.addEventListener("gamepaddisconnected",function(c){c.gamepad.index==b.currentIndex&&(cancelAnimationFrame(a),connected=!1,b.dispatchEvent("gamepaddisconnected"))});this.dispose=function(){window.removeEventListener("gamepadconnected",d),window.addEventListener("gamepaddisconnected",g),cancelAnimationFrame(a),clearInterval(e),b.connected=!1}};for(var c=["A","B","X","Y","LB","RB","LT","RT","BACK","START","LS","RS","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT"],d=0;d<c.length;d++)a.GamePad[c[d]]=d;var e=["LSX","LSY","RSX","RSY"];for(d=0;d<e.length;d++)a.GamePad[e[d]]=d;return a.extend(a.GamePad,createjs.EventDispatcher,null,"cjsEventDispatcher"),zon&&zog("ZIM FRAME"),a.Frame=function(b,c,d,e,f,g,h,i,j,k,l,m){function C(){if(!B){if(B=!0,q.indexOf(b)==-1){if(z=b,zot(zid(z)))return void zog("zim.Frame - scaling: HTML tag with id="+b+" must exist");A=this.tag=zid(z),b=zot(c)||zot(d)?"tag":"inline","myCanvas"==k&&(k=z+"Canvas")}zot(c)&&(c=500),zot(d)&&(d=500),D(),E(),p?(h&&setTimeout(function(){window.scrollTo(0,0)},50),setTimeout(function(){F(),r.dispatchEvent("ready"),y=!0,G()},100),m>100&&setTimeout(function(){F(),G()},m)):(r.dispatchEvent("ready"),y=!0,G())}}function D(){var c=r.canvas=document.createElement("canvas");c.setAttribute("id",k),"full"==b||"tag"==b?(c.setAttribute("width",a.windowWidth()),c.setAttribute("height",a.windowHeight())):(c.setAttribute("width",t),c.setAttribute("height",u)),"tag"==b||"inline"==b?A.appendChild(c):document.body.appendChild(c),zot(e)||(c.style.backgroundColor=e),"full"!=b&&"fit"!=b&&"outside"!=b||(c.style.position="absolute",document.body.style.overflow="hidden")}function E(){F(),q.indexOf(b)!=-1&&(r.zil=zil()),s=new createjs.Stage(k),s.setBounds(0,0,t,u),s.width=t,s.height=u,f&&s.enableMouseOver(10),g&&createjs.Touch.enable(s,!0)}function F(){var f,g,c=zid(k),d=a.windowWidth(),e=a.windowHeight();if(w=r.orientation=d>e?"horizontal":"vertical",w!=x&&(x=w,r.dispatchEvent("orientation")),p&&h&&setTimeout(function(){window.scrollTo(0,0)},100),c){if("fit"==b)r.scale=d/e>=t/u?e/u:d/t;else if("outside"==b)r.scale=d/e>=t/u?d/t:e/u;else{if("full"==b)return c.style.left=c.style.top="0px",c.width=t=d,c.height=u=e,void(s&&(s.setBounds(0,0,t,u),s.width=t,s.height=u));if("tag"==b)return t=A.offsetWidth,u=A.offsetHeight,s&&(s.setBounds(0,0,t,u),s.width=t,s.height=u),A.style.overflow="hidden",void(c.style.left=c.style.top="0px");if("inline"==b)return s&&(s.setBounds(0,0,t,u),s.width=t,s.height=u),void(c.style.left=c.style.top="0px")}g=u*r.scale,f=t*r.scale,c.style.width=f+"px",c.style.height=g+"px","left"==i?r.x=0:"right"==i?r.x=d-f:r.x=(d-f)/2,"top"==j?r.y=0:"bottom"==j?r.y=e-g:r.y=(e-g)/2,c.style.left=r.x+"px",c.style.top=r.y+"px"}}function G(){y&&(r.dispatchEvent("resize"),!a.OPTIMIZE&&s&&"full"==b&&s.update())}var o,n="scaling, width, height, color, rollover, touch, scrollTop, align, valign, canvasID, rollPerSecond, delay";if(o=zob(a.Frame,arguments,n,this))return o;z_d("83"),this.cjsEventDispatcher_constructor();var p=a.mobile();zot(b)&&(b="full"),zot(f)&&(f=!p),zot(g)&&(g=!0),zot(h)&&(h=!0),zot(i)&&(i="center"),zot(j)&&(j="center"),zot(k)&&(k="myCanvas"),zot(l)&&(l=20),zot(m)&&(m=0);var q=["fit","outside","full"];this.scale=1,this.x=0,this.y=0;var s,w,x,z,A,r=this,t=c,u=d,y=!1,B=!1;"interactive"===document.readyState||"complete"===document.readyState?setTimeout(function(){C()},200):document.addEventListener("DOMContentLoaded",C),window.addEventListener("resize",function(){F(),G(),m>0&&p&&setTimeout(function(){F(),G()},m)}),this.loadAssetsCount=0,this.assets={},this.loadAssets=function(b,c,d,e){if(!zot(b)){zot(d)&&(d=!1),Array.isArray(b)||(b=[b]),zot(e)&&(e=0);var h,i,j,f=!1,g=[],l=/\.([^.]+)$/i;for(j=0;j<b.length;j++)h=b[j],i=h.match(l),createjs.Sound.SUPPORTED_EXTENSIONS.indexOf(i[1])>=0&&(f=!0),g.push({src:h});var m=new a.Queue;r.loadAssetsCount++,r.isLoading=!0;var n=m.preload=r.preload=new createjs.LoadQueue(d,c);f&&n.installPlugin(createjs.Sound),n.on("progress",function(a){m.dispatchEvent(a),r.dispatchEvent(a)}),n.on("error",function(a){m.dispatchEvent(a),r.dispatchEvent(a)}),n.on("fileload",function(b){var f,c=b.item,d=b.item.type;c.id.match(l);f=d&&d==createjs.LoadQueue.SOUND?r.assets[c.id]={type:"sound",id:c.id,play:function(a){var b=createjs.Sound.play(c.id,a);return b.getStage=function(){return s},b}}:d==createjs.LoadQueue.IMAGE?r.assets[c.id]=new a.Bitmap(b.result,c.id):r.assets[c.id]=b.result;var g=new createjs.Event("assetload");g.item=c,g.asset=f,m.dispatchEvent(b),r.dispatchEvent(g)});var o=Date.now();return r.preloadEvent=n.on("complete",function(a){var b=Date.now();e=Math.max(0,e-(b-o)),setTimeout(function(){r.loadAssetsCount--,r.loadAssetsCount<=0&&(r.isLoading=!1),m.isLoading=!1,m.dispatchEvent(a),r.dispatchEvent(a)},e)}),n.loadManifest(g),m}},this.asset=function(a){if(!zot(a))return r.assets[a]||{play:function(){if(zon)return zog("zim.Frame - asset(sound) not found"),{}}}},Object.defineProperty(r,"stage",{get:function(){return s},set:function(a){zog("zim.Frame(): stage is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(r,"width",{get:function(){return t},set:function(a){zog("zim.Frame(): width is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(r,"height",{get:function(){return u},set:function(a){zog("zim.Frame(): height is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(this,"color",{get:function(){return e},set:function(a){e=a,zot(a)?zid(k).style.backgroundColor="default":zid(k).style.backgroundColor=e}}),this.remakeCanvas=function(a,c){"full"!=b&&(zot(a)&&(a=t),zot(c)&&(c=u),zid(k)&&zid(k).parentNode.removeChild(zid(k)),t=a,u=c,D(),E())};var H=new createjs.Event("keydown");this.eventRemove=H.remove,window.addEventListener("keydown",function(a){a.remove=r.eventRemove,r.dispatchEvent(a)}),window.addEventListener("keyup",function(a){a.remove=r.eventRemove,r.dispatchEvent(a)}),this.dispose=function(){return window.removeEventListener("resize",F),s.removeAllChildren(),s.removeAllEventListeners(),zid(k)&&zid(k).parentNode.removeChild(zid(k)),s=null,r=null,!0},this.orange="#f58e25",this.green="#acd241",this.pink="#e472c4",this.blue="#50c4b7",this.brown="#d1a170",this.yellow="#ebcb35",this.silver="#999999",this.tin="#777777",this.grey="#555555",this.gray="#555555",this.lighter="#eeeeee",this.light="#cccccc",this.dark="#333333",this.darker="#111111",this.purple="#993399",this.black="#000000",this.white="#FFFFFF",this.clear="rgba(0,0,0,0)",this.faint="rgba(0,0,0,.01)",this.makeCircles=function(b){zot(b)&&(b=100);var c=[r.wrap,r.code,r.create,r.build,r.pages,r.bits],d=new a.Shape,e=d.graphics;d.radius=b;for(var f=0;f<c.length;f++)e.f(c[f]).dc(0,0,d.radius/c.length*(c.length-f));return d.setBounds(-d.radius,-d.radius,2*d.radius,2*d.radius),d}},a.extend(a.Frame,createjs.EventDispatcher,"clone","cjsEventDispatcher",!1),a.Queue=function(){this.cjsEventDispatcher_constructor(),this.isLoading=!0},a.extend(a.Queue,createjs.EventDispatcher,null,"cjsEventDispatcher"),a.DISTILL=!1,a.distillery=[],a.distill=function(){zog("zim.distill() - go to http://zimjs.com/code/distill and enter the following:"),zog(a.distillery.length>0?a.distillery.join(" "):"must set zim.DISTILL = true;")},a}(zim||{}),zim=function(a){return a.Wonder=function(b,c,d,e,f){function m(){j.length>0&&(a.async(f+"?wonder="+JSON.stringify(j)),j=[],l++)}function p(a,b){return zot(a)?(zog("zim.Wonder "+b+" - please provide a keyword"),!1):!i[b+"sOff"][a]}var h,g="wid, client, app, notes, server";if(h=zob(a.Wonder,arguments,g,this))return h;if(z_d("82"),zot(b))return void zog("zim.Wonder() - please provide Wonder ID (see http://zimjs.com/code/wonder/)");zot(f)&&(f="http://54.165.135.152:3001/wonder");var i=this;zot(a.wonderSession)&&(a.wonderSession="W"+a.rand(1e5,999999));var n,j=[],k=setInterval(m,1e3),l=0,o=setInterval(function(){l>28&&(j.push({id:b,c:c,a:d,n:e,k:n,t:"e",v:"frequency max - terminated",s:a.wonderSession}),zog("zim.Wonder() - frequency max - terminated"),i.dispose()),l=0},3e4);this.countsOff={},this.timesOff={},this.ordersOff={},this.count=function(f){p(f,"count")&&(n=f,j.push({id:b,c:c,a:d,n:e,k:f,t:"c",v:1,s:a.wonderSession}))};var q={};this.timeStart=function(a){p(a,"time")&&(i.timeEnd(a),n=a,q[a]=(new Date).getTime())};var r={};this.timePause=function(a){p(a,"time")&&(r[a]||(r[a]=(new Date).getTime()))},this.timeUnpause=function(a){if(p(a,"time")&&r[a]){var b=(new Date).getTime()-r[a];q[a]&&(q[a]+=b),delete r[a]}},this.timeEnd=function(f){if(p(f,"time")&&q[f]){var g=r[f]?r[f]:(new Date).getTime(),h=Math.round((g-q[f])/1e3);delete r[f],delete q[f],j.push({id:b,c:c,a:d,n:e,k:f,t:"t",v:h,s:a.wonderSession})}},this.order=function(f,g){if(p(f,"order"))return n=f,zot(g)?void zog("zim.Wonder order() - please provide an item"):void j.push({id:b,c:c,a:d,n:e,k:f,t:"o",v:g,s:a.wonderSession})},this.countOff=function(a){i.countsOff[a]=1},this.countOn=function(a){delete i.countOff[a]},this.timeOff=function(a){i.timesOff[a]=1},this.timeOn=function(a){delete i.timesOff[a]},this.orderOff=function(a){i.ordersOff[a]=1},this.orderOn=function(a){delete i.ordersOff[a]},this.dispose=function(){m(),clearInterval(k),clearInterval(o)}},a}(zim||{});